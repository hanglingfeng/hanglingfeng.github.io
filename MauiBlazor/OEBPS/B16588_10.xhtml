<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
<title>B16588_10</title>
<link href="css/style-JRserifv6.css" rel="stylesheet" type="text/css"/>
<!-- kobo-style -->
<style id="koboSpanStyle" type="text/css" xmlns="http://www.w3.org/1999/xhtml">.koboSpan { -webkit-text-combine: inherit; }</style>
</head>
<body id="B16588_10" xml:lang="en-GB">
<div id="_idContainer110">
<h1 class="chapter-number" id="_idParaDest-194"><a id="_idTextAnchor210"/><span class="koboSpan" id="kobo.1.1" xmlns="http://www.w3.org/1999/xhtml">10</span></h1>
<h1 id="_idParaDest-195"><a id="_idTextAnchor211"/><span class="koboSpan" id="kobo.2.1" xmlns="http://www.w3.org/1999/xhtml">Advanced Topics in Creating Razor Components</span></h1>
<p><span class="koboSpan" id="kobo.3.1" xmlns="http://www.w3.org/1999/xhtml">In Blazor app development, everything is a component. </span><span class="koboSpan" id="kobo.3.2" xmlns="http://www.w3.org/1999/xhtml">We learned how to create Razor components in the last chapter. </span><span class="koboSpan" id="kobo.3.3" xmlns="http://www.w3.org/1999/xhtml">In this chapter, we will explore more advanced topics about Razor components. </span><span class="koboSpan" id="kobo.3.4" xmlns="http://www.w3.org/1999/xhtml">To convert list groups and context menus to Razor components, we need to understand advanced topics such as templated components and form validation. </span><span class="koboSpan" id="kobo.3.5" xmlns="http://www.w3.org/1999/xhtml">We will introduce these concepts while we are creating more Razor components in </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1" xmlns="http://www.w3.org/1999/xhtml">our project.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1" xmlns="http://www.w3.org/1999/xhtml">We will cover the following topics in </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1" xmlns="http://www.w3.org/1999/xhtml">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.7.1" xmlns="http://www.w3.org/1999/xhtml">Creating more </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1" xmlns="http://www.w3.org/1999/xhtml">Razor components</span></span></li>
<li><span class="koboSpan" id="kobo.9.1" xmlns="http://www.w3.org/1999/xhtml">Using </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1" xmlns="http://www.w3.org/1999/xhtml">templated components</span></span></li>
<li><span class="koboSpan" id="kobo.11.1" xmlns="http://www.w3.org/1999/xhtml">Built-in Razor components and </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1" xmlns="http://www.w3.org/1999/xhtml">input validation</span></span></li>
</ul>
<h1 id="_idParaDest-196"><a id="_idTextAnchor212"/><span class="koboSpan" id="kobo.13.1" xmlns="http://www.w3.org/1999/xhtml">Technical requirements</span></h1>
<p><span class="koboSpan" id="kobo.14.1" xmlns="http://www.w3.org/1999/xhtml">To test and debug the source code in this chapter, you need to have Visual Studio 2022 installed on your PC or Mac. </span><span class="koboSpan" id="kobo.14.2" xmlns="http://www.w3.org/1999/xhtml">Please refer to the </span><em class="italic"><span class="koboSpan" id="kobo.15.1" xmlns="http://www.w3.org/1999/xhtml">Development environment setup</span></em><span class="koboSpan" id="kobo.16.1" xmlns="http://www.w3.org/1999/xhtml"> section in </span><a href="B16588_01.xhtml#_idTextAnchor015"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.17.1" xmlns="http://www.w3.org/1999/xhtml">Chapter 1</span></em></span></a><span class="koboSpan" id="kobo.18.1" xmlns="http://www.w3.org/1999/xhtml">, </span><em class="italic"><span class="koboSpan" id="kobo.19.1" xmlns="http://www.w3.org/1999/xhtml">Getting Started with .NET MAUI</span></em><span class="koboSpan" id="kobo.20.1" xmlns="http://www.w3.org/1999/xhtml">, for </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1" xmlns="http://www.w3.org/1999/xhtml">the details.</span></span></p>
<p><span class="koboSpan" id="kobo.22.1" xmlns="http://www.w3.org/1999/xhtml">The source code of this chapter is available in the following </span><span class="No-Break"><span class="koboSpan" id="kobo.23.1" xmlns="http://www.w3.org/1999/xhtml">GitHub repository:</span></span></p>
<p><a href="https://github.com/PacktPublishing/.NET-MAUI-Cross-Platform-Application-Development/tree/main/Chapter10"><span class="No-Break"><span class="koboSpan" id="kobo.24.1" xmlns="http://www.w3.org/1999/xhtml">https://github.com/PacktPublishing/.NET-MAUI-Cross-Platform-Application-Development/tree/main/Chapter10</span></span></a></p>
<p><span class="koboSpan" id="kobo.25.1" xmlns="http://www.w3.org/1999/xhtml">The source code can be downloaded using the following </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1" xmlns="http://www.w3.org/1999/xhtml">Git command:</span></span></p>
<pre class="console">
<strong class="source-inline"><span class="koboSpan" id="kobo.27.1" xmlns="http://www.w3.org/1999/xhtml">git clone -b chapter10 https://github.com/PacktPublishing/.NET-MAUI-Cross-Platform-Application-Development PassXYZ.Vault2</span></strong></pre>
<h1 id="_idParaDest-197"><a id="_idTextAnchor213"/><span class="koboSpan" id="kobo.28.1" xmlns="http://www.w3.org/1999/xhtml">Creating more Razor components</span></h1>
<p><span class="koboSpan" id="kobo.29.1" xmlns="http://www.w3.org/1999/xhtml">We developed </span><a id="_idIndexMarker741"/><span class="koboSpan" id="kobo.30.1" xmlns="http://www.w3.org/1999/xhtml">Modal dialog components in </span><a href="B16588_09.xhtml#_idTextAnchor186"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.31.1" xmlns="http://www.w3.org/1999/xhtml">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.32.1" xmlns="http://www.w3.org/1999/xhtml">, </span><em class="italic"><span class="koboSpan" id="kobo.33.1" xmlns="http://www.w3.org/1999/xhtml">Razor Components and Data Binding</span></em><span class="koboSpan" id="kobo.34.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.34.2" xmlns="http://www.w3.org/1999/xhtml">In this chapter, we will refine our code to remove the duplicated code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.35.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.36.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.37.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.38.1" xmlns="http://www.w3.org/1999/xhtml"> pages and convert the duplicated code into Razor components. </span><span class="koboSpan" id="kobo.38.2" xmlns="http://www.w3.org/1999/xhtml">We will create the </span><span class="No-Break"><span class="koboSpan" id="kobo.39.1" xmlns="http://www.w3.org/1999/xhtml">following components:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.40.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.41.1" xmlns="http://www.w3.org/1999/xhtml"> – This is a component to display a </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1" xmlns="http://www.w3.org/1999/xhtml">navigation bar</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.43.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.44.1" xmlns="http://www.w3.org/1999/xhtml"> – This is a component to support the </span><span class="No-Break"><span class="koboSpan" id="kobo.45.1" xmlns="http://www.w3.org/1999/xhtml">context menu</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.46.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.47.1" xmlns="http://www.w3.org/1999/xhtml"> – This is a component to display a list </span><span class="No-Break"><span class="koboSpan" id="kobo.48.1" xmlns="http://www.w3.org/1999/xhtml">of items</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.49.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.50.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.51.1" xmlns="http://www.w3.org/1999/xhtml"> component is the most complicated one so we will leave it till the end of this section. </span><span class="koboSpan" id="kobo.51.2" xmlns="http://www.w3.org/1999/xhtml">Let’s work on </span><strong class="source-inline"><span class="koboSpan" id="kobo.52.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.53.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.54.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.55.1" xmlns="http://www.w3.org/1999/xhtml"> first.</span></span></p>
<h2 id="_idParaDest-198"><a id="_idTextAnchor214"/><span class="koboSpan" id="kobo.56.1" xmlns="http://www.w3.org/1999/xhtml">Creating the Navbar component</span></h2>
<p><span class="koboSpan" id="kobo.57.1" xmlns="http://www.w3.org/1999/xhtml">Let’s look at the</span><a id="_idIndexMarker742"/><span class="koboSpan" id="kobo.58.1" xmlns="http://www.w3.org/1999/xhtml"> navigation bar UI in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.59.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.60.1" xmlns="http://www.w3.org/1999/xhtml">.1</span></em><span class="koboSpan" id="kobo.61.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.61.2" xmlns="http://www.w3.org/1999/xhtml">We can see that the navigation bar contains a </span><strong class="bold"><span class="koboSpan" id="kobo.62.1" xmlns="http://www.w3.org/1999/xhtml">Back</span></strong><span class="koboSpan" id="kobo.63.1" xmlns="http://www.w3.org/1999/xhtml"> button, a title, and an </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.64.1" xmlns="http://www.w3.org/1999/xhtml">Add</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.65.1" xmlns="http://www.w3.org/1999/xhtml"> button:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer107">
<span class="koboSpan" id="kobo.66.1" xmlns="http://www.w3.org/1999/xhtml"><img alt="Figure 10.1: Navigation bar" src="image/Figure_10.1_B16588.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.67.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10.1: Navigation bar</span></p>
<p><span class="koboSpan" id="kobo.68.1" xmlns="http://www.w3.org/1999/xhtml">The current code of the </span><a id="_idIndexMarker743"/><span class="koboSpan" id="kobo.69.1" xmlns="http://www.w3.org/1999/xhtml">navigation bar is shown next, and this code snippet is duplicated on both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.70.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.71.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.72.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.73.1" xmlns="http://www.w3.org/1999/xhtml"> pages:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.74.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;div class="container"&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-12"&gt;
      &lt;h1&gt;
        @if (selectedItem?.GetParentLink() != null) {     ❶
          &lt;a class="btn btn-outline-dark"
            href="@selectedItem?.GetParentLink()"&gt;
            &lt;span class="oi oi-chevron-left"
              aria-hidden="true"&gt;&lt;/span&gt;&lt;/a&gt;              ❷
        }
        @(" " + Title)                                    ❸
        &lt;button type="button"
          class="btn btn-outline-dark float-end"
          data-bs-toggle="modal"
          data-bs-target="#@_dialogEditId"
          @onclick="@(() =&gt; _isNewItem=true)"&gt;            ❹
          &lt;span class="oi oi-plus" aria-hidden="true"&gt;
          &lt;/span&gt;
        &lt;/button&gt;
      &lt;/h1&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.75.1" xmlns="http://www.w3.org/1999/xhtml">In the preceding code, ❶ the </span><strong class="bold"><span class="koboSpan" id="kobo.76.1" xmlns="http://www.w3.org/1999/xhtml">Back</span></strong><span class="koboSpan" id="kobo.77.1" xmlns="http://www.w3.org/1999/xhtml"> button is shown when there is a parent link. </span><span class="koboSpan" id="kobo.77.2" xmlns="http://www.w3.org/1999/xhtml">❷ The </span><strong class="bold"><span class="koboSpan" id="kobo.78.1" xmlns="http://www.w3.org/1999/xhtml">Back</span></strong><span class="koboSpan" id="kobo.79.1" xmlns="http://www.w3.org/1999/xhtml"> button is implemented as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.80.1" xmlns="http://www.w3.org/1999/xhtml">&lt;a&gt;</span></strong><span class="koboSpan" id="kobo.81.1" xmlns="http://www.w3.org/1999/xhtml"> tag. </span><span class="koboSpan" id="kobo.81.2" xmlns="http://www.w3.org/1999/xhtml">❸ </span><strong class="source-inline"><span class="koboSpan" id="kobo.82.1" xmlns="http://www.w3.org/1999/xhtml">Title</span></strong><span class="koboSpan" id="kobo.83.1" xmlns="http://www.w3.org/1999/xhtml"> is a string and is shown as part of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.84.1" xmlns="http://www.w3.org/1999/xhtml">&lt;h1&gt;</span></strong><span class="koboSpan" id="kobo.85.1" xmlns="http://www.w3.org/1999/xhtml"> tag. </span><span class="koboSpan" id="kobo.85.2" xmlns="http://www.w3.org/1999/xhtml">❹ The </span><strong class="bold"><span class="koboSpan" id="kobo.86.1" xmlns="http://www.w3.org/1999/xhtml">Add</span></strong><span class="koboSpan" id="kobo.87.1" xmlns="http://www.w3.org/1999/xhtml"> button is implemented as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.88.1" xmlns="http://www.w3.org/1999/xhtml">&lt;button&gt;</span></strong><span class="koboSpan" id="kobo.89.1" xmlns="http://www.w3.org/1999/xhtml"> tag. </span><span class="koboSpan" id="kobo.89.2" xmlns="http://www.w3.org/1999/xhtml">Bootstrap style is used to format both the </span><strong class="bold"><span class="koboSpan" id="kobo.90.1" xmlns="http://www.w3.org/1999/xhtml">Back</span></strong><span class="koboSpan" id="kobo.91.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.92.1" xmlns="http://www.w3.org/1999/xhtml">Add</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.93.1" xmlns="http://www.w3.org/1999/xhtml"> buttons.</span></span></p>
<p><span class="koboSpan" id="kobo.94.1" xmlns="http://www.w3.org/1999/xhtml">To convert the preceding code to a Razor component, we can create a new Razor component in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.95.1" xmlns="http://www.w3.org/1999/xhtml">PassXYZ.BlazorUI</span></strong><span class="koboSpan" id="kobo.96.1" xmlns="http://www.w3.org/1999/xhtml"> project and name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.97.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.98.1" xmlns="http://www.w3.org/1999/xhtml">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.99.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.100.1" xmlns="http://www.w3.org/1999/xhtml"> can display the UI </span><a id="_idIndexMarker744"/><span class="koboSpan" id="kobo.101.1" xmlns="http://www.w3.org/1999/xhtml">elements in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.102.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.103.1" xmlns="http://www.w3.org/1999/xhtml">.1</span></em><span class="koboSpan" id="kobo.104.1" xmlns="http://www.w3.org/1999/xhtml">, which include a </span><strong class="bold"><span class="koboSpan" id="kobo.105.1" xmlns="http://www.w3.org/1999/xhtml">Back</span></strong><span class="koboSpan" id="kobo.106.1" xmlns="http://www.w3.org/1999/xhtml"> button, a title, and an </span><strong class="bold"><span class="koboSpan" id="kobo.107.1" xmlns="http://www.w3.org/1999/xhtml">Add</span></strong><span class="koboSpan" id="kobo.108.1" xmlns="http://www.w3.org/1999/xhtml"> button. </span><span class="koboSpan" id="kobo.108.2" xmlns="http://www.w3.org/1999/xhtml">To separate the UI and logic, we create both a </span><strong class="source-inline"><span class="koboSpan" id="kobo.109.1" xmlns="http://www.w3.org/1999/xhtml">Navbar.razor.cs</span></strong><span class="koboSpan" id="kobo.110.1" xmlns="http://www.w3.org/1999/xhtml"> C# code-behind file and Razor markup, </span><strong class="source-inline"><span class="koboSpan" id="kobo.111.1" xmlns="http://www.w3.org/1999/xhtml">Navbar.razor</span></strong><span class="koboSpan" id="kobo.112.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.112.2" xmlns="http://www.w3.org/1999/xhtml">We define component parameters and event handlers in the C# code-behind file, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.113.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.1</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.114.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.115.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.1: Navbar.razor.cs (https://epa.ms/Navbar10-1)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.116.1" xmlns="http://www.w3.org/1999/xhtml">
public partial class Navbar
{
  [Parameter]
  public string? </span><span class="koboSpan" id="kobo.116.2" xmlns="http://www.w3.org/1999/xhtml">ParentLink { get; set; }                 ❶
  [Parameter]
  public string? </span><span class="koboSpan" id="kobo.116.3" xmlns="http://www.w3.org/1999/xhtml">DialogId { get; set; }                   ❷
  [Parameter]
  public string? </span><span class="koboSpan" id="kobo.116.4" xmlns="http://www.w3.org/1999/xhtml">Title { get; set; }                      ❸
  [Parameter]
  public EventCallback&lt;MouseEventArgs&gt; OnAddClick { get;
  set; }                                                  ❹
  private void OnClickClose(MouseEventArgs e) {
      OnAddClick.InvokeAsync();
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.117.1" xmlns="http://www.w3.org/1999/xhtml">There are four component parameters and an event handler defined in </span><strong class="source-inline"><span class="koboSpan" id="kobo.118.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.119.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.119.2" xmlns="http://www.w3.org/1999/xhtml">We can set the parent link of the </span><strong class="bold"><span class="koboSpan" id="kobo.120.1" xmlns="http://www.w3.org/1999/xhtml">Back</span></strong><span class="koboSpan" id="kobo.121.1" xmlns="http://www.w3.org/1999/xhtml"> button with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.122.1" xmlns="http://www.w3.org/1999/xhtml">ParentLink</span></strong><span class="koboSpan" id="kobo.123.1" xmlns="http://www.w3.org/1999/xhtml"> parameter ❶. </span><span class="koboSpan" id="kobo.123.2" xmlns="http://www.w3.org/1999/xhtml">The value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.124.1" xmlns="http://www.w3.org/1999/xhtml">Title</span></strong><span class="koboSpan" id="kobo.125.1" xmlns="http://www.w3.org/1999/xhtml"> is set to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.126.1" xmlns="http://www.w3.org/1999/xhtml">Title</span></strong><span class="koboSpan" id="kobo.127.1" xmlns="http://www.w3.org/1999/xhtml"> parameter ❸. </span><span class="koboSpan" id="kobo.127.2" xmlns="http://www.w3.org/1999/xhtml">For the </span><strong class="bold"><span class="koboSpan" id="kobo.128.1" xmlns="http://www.w3.org/1999/xhtml">Add</span></strong><span class="koboSpan" id="kobo.129.1" xmlns="http://www.w3.org/1999/xhtml"> button, we need to provide an </span><strong class="source-inline"><span class="koboSpan" id="kobo.130.1" xmlns="http://www.w3.org/1999/xhtml">Id</span></strong><span class="koboSpan" id="kobo.131.1" xmlns="http://www.w3.org/1999/xhtml"> and an</span><a id="_idIndexMarker745"/><span class="koboSpan" id="kobo.132.1" xmlns="http://www.w3.org/1999/xhtml"> event handler for the dialog box so the </span><strong class="source-inline"><span class="koboSpan" id="kobo.133.1" xmlns="http://www.w3.org/1999/xhtml">DialogId</span></strong><span class="koboSpan" id="kobo.134.1" xmlns="http://www.w3.org/1999/xhtml"> ❷ and </span><strong class="source-inline"><span class="koboSpan" id="kobo.135.1" xmlns="http://www.w3.org/1999/xhtml">OnAddClick</span></strong><span class="koboSpan" id="kobo.136.1" xmlns="http://www.w3.org/1999/xhtml"> ❹ parameters </span><span class="No-Break"><span class="koboSpan" id="kobo.137.1" xmlns="http://www.w3.org/1999/xhtml">are used.</span></span></p>
<p><span class="koboSpan" id="kobo.138.1" xmlns="http://www.w3.org/1999/xhtml">Now, let us look at the Razor file of </span><strong class="source-inline"><span class="koboSpan" id="kobo.139.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.140.1" xmlns="http://www.w3.org/1999/xhtml"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.141.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.142.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.143.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.2: Navbar.razor (https://epa.ms/Navbar10-2)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.144.1" xmlns="http://www.w3.org/1999/xhtml">
@namespace PassXYZ.BlazorUI
&lt;div class="container"&gt;
  &lt;div class="row"&gt;
    &lt;div class="col-12"&gt;
      &lt;h1&gt;
        @if (ParentLink != null) {                        ①
          &lt;a class="btn btn-outline-dark"
            href="@ParentLink"&gt;                           ①
            &lt;span class="oi oi-chevron-left"
              aria-hidden="true"&gt;&lt;/span&gt;
          &lt;/a&gt;
        }
        @(" " + Title)                                    ③
        &lt;button type="button"
          class="btn btn-outline-dark float-end"
          data-bs-toggle="modal"
          data-bs-target="#@DialogId"                     ②
          @onclick="OnClickClose"&gt;                        ④
          &lt;span class="oi oi-plus" aria-hidden="true"&gt;
          &lt;/span&gt;
        &lt;/button&gt;
      &lt;/h1&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.145.1" xmlns="http://www.w3.org/1999/xhtml">We can see that the</span><a id="_idIndexMarker746"/><span class="koboSpan" id="kobo.146.1" xmlns="http://www.w3.org/1999/xhtml"> code is very similar to the one in </span><strong class="source-inline"><span class="koboSpan" id="kobo.147.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.148.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.149.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.150.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.150.2" xmlns="http://www.w3.org/1999/xhtml">The difference is that we replaced the hardcode value with component parameters (</span><strong class="source-inline"><span class="koboSpan" id="kobo.151.1" xmlns="http://www.w3.org/1999/xhtml">ParentLink</span></strong><span class="koboSpan" id="kobo.152.1" xmlns="http://www.w3.org/1999/xhtml"> ①, </span><strong class="source-inline"><span class="koboSpan" id="kobo.153.1" xmlns="http://www.w3.org/1999/xhtml">DialogId</span></strong><span class="koboSpan" id="kobo.154.1" xmlns="http://www.w3.org/1999/xhtml"> ②, </span><strong class="source-inline"><span class="koboSpan" id="kobo.155.1" xmlns="http://www.w3.org/1999/xhtml">Title</span></strong><span class="koboSpan" id="kobo.156.1" xmlns="http://www.w3.org/1999/xhtml"> ③, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.157.1" xmlns="http://www.w3.org/1999/xhtml">OnClickClose</span></strong><span class="koboSpan" id="kobo.158.1" xmlns="http://www.w3.org/1999/xhtml"> ④). </span><span class="koboSpan" id="kobo.158.2" xmlns="http://www.w3.org/1999/xhtml">With this new </span><strong class="source-inline"><span class="koboSpan" id="kobo.159.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.160.1" xmlns="http://www.w3.org/1999/xhtml"> component, we can replace the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.161.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.162.1" xmlns="http://www.w3.org/1999/xhtml"> using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.163.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.164.1" xmlns="http://www.w3.org/1999/xhtml"> component </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.166.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;Navbar ParentLink="@selectedItem?.GetParentLink()"
    Title="@Title" DialogId="@_dialogEditId"
    OnAddClick="@(() =&gt; {_isNewItem=true;})" /&gt;</span></pre>
<p><span class="koboSpan" id="kobo.167.1" xmlns="http://www.w3.org/1999/xhtml">And we can replace the code in </span><strong class="source-inline"><span class="koboSpan" id="kobo.168.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.169.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.170.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;Navbar ParentLink="@selectedItem?.GetParentLink()"
Title="@selectedItem?.Name" DialogId="@_dialogEditId"
OnAddClick="@(() =&gt; {_isNewField=true;})" /&gt;</span></pre>
<p><span class="koboSpan" id="kobo.171.1" xmlns="http://www.w3.org/1999/xhtml">As we can see, we refined the code by removing duplicated code, and the new code looks much</span><a id="_idIndexMarker747"/><span class="koboSpan" id="kobo.172.1" xmlns="http://www.w3.org/1999/xhtml"> more elegant </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1" xmlns="http://www.w3.org/1999/xhtml">and concise.</span></span></p>
<p><span class="koboSpan" id="kobo.174.1" xmlns="http://www.w3.org/1999/xhtml">We have done the work for </span><strong class="source-inline"><span class="koboSpan" id="kobo.175.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.176.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.176.2" xmlns="http://www.w3.org/1999/xhtml">Now let’s move to the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.177.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.178.1" xmlns="http://www.w3.org/1999/xhtml"> component.</span></span></p>
<h2 id="_idParaDest-199"><a id="_idTextAnchor215"/><span class="koboSpan" id="kobo.179.1" xmlns="http://www.w3.org/1999/xhtml">Creating a Dropdown component for the context menu</span></h2>
<p><span class="koboSpan" id="kobo.180.1" xmlns="http://www.w3.org/1999/xhtml">To create a</span><a id="_idIndexMarker748"/><span class="koboSpan" id="kobo.181.1" xmlns="http://www.w3.org/1999/xhtml"> component similar to the context </span><a id="_idIndexMarker749"/><span class="koboSpan" id="kobo.182.1" xmlns="http://www.w3.org/1999/xhtml">menu, we can reuse the Bootstrap </span><strong class="source-inline"><span class="koboSpan" id="kobo.183.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.184.1" xmlns="http://www.w3.org/1999/xhtml"> component. </span><span class="koboSpan" id="kobo.184.2" xmlns="http://www.w3.org/1999/xhtml">As we can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.185.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.186.1" xmlns="http://www.w3.org/1999/xhtml">.2</span></em><span class="koboSpan" id="kobo.187.1" xmlns="http://www.w3.org/1999/xhtml">, a context menu includes a context menu button and a list of menu items. </span><span class="koboSpan" id="kobo.187.2" xmlns="http://www.w3.org/1999/xhtml">When users click on the context menu button, a list of menu items </span><span class="No-Break"><span class="koboSpan" id="kobo.188.1" xmlns="http://www.w3.org/1999/xhtml">is displayed:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer108">
<span class="koboSpan" id="kobo.189.1" xmlns="http://www.w3.org/1999/xhtml"><img alt="Figure 10.2: Context menu" src="image/Figure_10.2_B16588.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.190.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10.2: Context menu</span></p>
<p><span class="koboSpan" id="kobo.191.1" xmlns="http://www.w3.org/1999/xhtml">The current code of the context menu is duplicated on both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.192.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.193.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.194.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.195.1" xmlns="http://www.w3.org/1999/xhtml"> pages, which are </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1" xmlns="http://www.w3.org/1999/xhtml">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.197.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;button class="opacity-50 btn btn-light dropdown-toggle"
  type="button" id="itemsContextMenu"
  data-bs-toggle="dropdown"
  aria-expanded="false"
  @onclick="@(() =&gt; listGroupItem=item)"&gt;
    &lt;span class="oi oi-menu" aria-hidden="true"&gt;&lt;/span&gt;
&lt;/button&gt;
&lt;ul class="dropdown-menu"
  aria-labelledby="itemsContextMenu"&gt;
  &lt;li&gt;&lt;button class="dropdown-item" data-bs-toggle="modal"
        data-bs-target="#@_dialogEditId"
        @onclick="@(() =&gt; _isNewItem=false)"&gt;
        Edit
  &lt;/button&gt;&lt;/li&gt;
  &lt;li&gt;&lt;button class="dropdown-item" data-bs-toggle="modal"
        data-bs-target="#@_dialogDeleteId"&gt;
      Delete
  &lt;/button&gt;&lt;/li&gt;
&lt;/ul&gt;</span></pre>
<p><span class="koboSpan" id="kobo.198.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.199.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.200.1" xmlns="http://www.w3.org/1999/xhtml"> component </span><a id="_idIndexMarker750"/><span class="koboSpan" id="kobo.201.1" xmlns="http://www.w3.org/1999/xhtml">of</span><a id="_idIndexMarker751"/><span class="koboSpan" id="kobo.202.1" xmlns="http://www.w3.org/1999/xhtml"> Bootstrap includes a button and an unordered list. </span><span class="koboSpan" id="kobo.202.2" xmlns="http://www.w3.org/1999/xhtml">We need to define an event handler for the button to take action. </span><span class="koboSpan" id="kobo.202.3" xmlns="http://www.w3.org/1999/xhtml">In the preceding code, we set the </span><strong class="source-inline"><span class="koboSpan" id="kobo.203.1" xmlns="http://www.w3.org/1999/xhtml">item</span></strong><span class="koboSpan" id="kobo.204.1" xmlns="http://www.w3.org/1999/xhtml"> variable to </span><strong class="source-inline"><span class="koboSpan" id="kobo.205.1" xmlns="http://www.w3.org/1999/xhtml">listGroupItem</span></strong><span class="koboSpan" id="kobo.206.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.206.2" xmlns="http://www.w3.org/1999/xhtml">For the menu items, each menu item is implemented as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.207.1" xmlns="http://www.w3.org/1999/xhtml">&lt;button&gt;</span></strong><span class="koboSpan" id="kobo.208.1" xmlns="http://www.w3.org/1999/xhtml"> tag and it accepts a dialog ID and an event handler as parameters. </span><span class="koboSpan" id="kobo.208.2" xmlns="http://www.w3.org/1999/xhtml">When a menu item is clicked, the corresponding modal dialog will </span><span class="No-Break"><span class="koboSpan" id="kobo.209.1" xmlns="http://www.w3.org/1999/xhtml">be shown.</span></span></p>
<p><span class="koboSpan" id="kobo.210.1" xmlns="http://www.w3.org/1999/xhtml">We can create two new Razor components in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.211.1" xmlns="http://www.w3.org/1999/xhtml">PassXYZ.BlazorUI</span></strong><span class="koboSpan" id="kobo.212.1" xmlns="http://www.w3.org/1999/xhtml"> project and name them as </span><strong class="source-inline"><span class="koboSpan" id="kobo.213.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.214.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.215.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.216.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.216.2" xmlns="http://www.w3.org/1999/xhtml">We can also implement them in the C# code-behind file (</span><em class="italic"><span class="koboSpan" id="kobo.217.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.4</span></em><span class="koboSpan" id="kobo.218.1" xmlns="http://www.w3.org/1999/xhtml">) and Razor file (</span><em class="italic"><span class="koboSpan" id="kobo.219.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.3</span></em><span class="koboSpan" id="kobo.220.1" xmlns="http://www.w3.org/1999/xhtml">) to separate the UI and logic, which we’ll be </span><span class="No-Break"><span class="koboSpan" id="kobo.221.1" xmlns="http://www.w3.org/1999/xhtml">doing now.</span></span></p>
<p><span class="koboSpan" id="kobo.222.1" xmlns="http://www.w3.org/1999/xhtml">Let’s review the </span><strong class="source-inline"><span class="koboSpan" id="kobo.223.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.224.1" xmlns="http://www.w3.org/1999/xhtml"> component UI first in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.225.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.226.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.227.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.3: Dropdown.razor (https://epa.ms/Dropdown10-3)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.228.1" xmlns="http://www.w3.org/1999/xhtml">
@namespace PassXYZ.BlazorUI
&lt;button class="opacity-50 btn btn-light dropdown-toggle"
  type="button" id="itemDetailContextMenu"
  data-bs-toggle="dropdown"
  aria-expanded="false" @onclick="OnClick"&gt;
  &lt;span class="oi oi-menu" aria-hidden="true"&gt;&lt;/span&gt;
&lt;/button&gt;                                                 ❶
&lt;ul class="dropdown-menu"
  aria-labelledby="itemDetailContextMenu"&gt;
  @ChildContent
&lt;/ul&gt;                                                     ❷</span></pre>
<p><span class="koboSpan" id="kobo.229.1" xmlns="http://www.w3.org/1999/xhtml">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.231.1" xmlns="http://www.w3.org/1999/xhtml"> component, we define a button ❶ and an unordered list ❷. </span><span class="koboSpan" id="kobo.231.2" xmlns="http://www.w3.org/1999/xhtml">The click event of the button </span><a id="_idIndexMarker752"/><span class="koboSpan" id="kobo.232.1" xmlns="http://www.w3.org/1999/xhtml">is </span><a id="_idIndexMarker753"/><span class="koboSpan" id="kobo.233.1" xmlns="http://www.w3.org/1999/xhtml">defined as an </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1" xmlns="http://www.w3.org/1999/xhtml">OnClick</span></strong><span class="koboSpan" id="kobo.235.1" xmlns="http://www.w3.org/1999/xhtml"> event handler. </span><span class="koboSpan" id="kobo.235.2" xmlns="http://www.w3.org/1999/xhtml">The items in the unordered list are displayed as child content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.236.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.237.1" xmlns="http://www.w3.org/1999/xhtml"> component. </span><span class="koboSpan" id="kobo.237.2" xmlns="http://www.w3.org/1999/xhtml">The component parameters are defined in the C# </span><strong class="source-inline"><span class="koboSpan" id="kobo.238.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown.razor.cs</span></strong><span class="koboSpan" id="kobo.239.1" xmlns="http://www.w3.org/1999/xhtml"> code-behind file in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.240.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.4</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.241.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.242.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.4: Dropdown.razor.cs (https://epa.ms/Dropdown10-4)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.243.1" xmlns="http://www.w3.org/1999/xhtml">
namespace PassXYZ.BlazorUI;
public partial class Dropdown
{
  [Parameter]
  public EventCallback&lt;MouseEventArgs&gt; OnClick {get;set;}①
  [Parameter]
  public RenderFragment ChildContent { get; set; }       ②
}</span></pre>
<p><span class="koboSpan" id="kobo.244.1" xmlns="http://www.w3.org/1999/xhtml">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown.razor.cs</span></strong><span class="koboSpan" id="kobo.246.1" xmlns="http://www.w3.org/1999/xhtml">, two component parameters – </span><strong class="source-inline"><span class="koboSpan" id="kobo.247.1" xmlns="http://www.w3.org/1999/xhtml">OnClick</span></strong><span class="koboSpan" id="kobo.248.1" xmlns="http://www.w3.org/1999/xhtml"> ① and </span><strong class="source-inline"><span class="koboSpan" id="kobo.249.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.250.1" xmlns="http://www.w3.org/1999/xhtml"> ② – </span><span class="No-Break"><span class="koboSpan" id="kobo.251.1" xmlns="http://www.w3.org/1999/xhtml">are defined.</span></span></p>
<p><span class="koboSpan" id="kobo.252.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.253.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.254.1" xmlns="http://www.w3.org/1999/xhtml"> component can be displayed as the child content of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.255.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.256.1" xmlns="http://www.w3.org/1999/xhtml"> component. </span><span class="koboSpan" id="kobo.256.2" xmlns="http://www.w3.org/1999/xhtml">We can see the UI code of </span><strong class="source-inline"><span class="koboSpan" id="kobo.257.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.258.1" xmlns="http://www.w3.org/1999/xhtml"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.259.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.5</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.260.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.261.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.5: MenuItem.razor (https://epa.ms/MenuItem10-5)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.262.1" xmlns="http://www.w3.org/1999/xhtml">
@namespace PassXYZ.BlazorUI
&lt;li&gt;
  &lt;button class="dropdown-item" data-bs-toggle="modal"
    data-bs-target="#@Id" @onclick="OnClick"&gt;
    @ChildContent
  &lt;/button&gt;
&lt;/li&gt;</span></pre>
<p><span class="koboSpan" id="kobo.263.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.264.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.265.1" xmlns="http://www.w3.org/1999/xhtml"> component</span><a id="_idIndexMarker754"/><span class="koboSpan" id="kobo.266.1" xmlns="http://www.w3.org/1999/xhtml"> defines three component </span><a id="_idIndexMarker755"/><span class="koboSpan" id="kobo.267.1" xmlns="http://www.w3.org/1999/xhtml">parameters – </span><strong class="source-inline"><span class="koboSpan" id="kobo.268.1" xmlns="http://www.w3.org/1999/xhtml">Id</span></strong><span class="koboSpan" id="kobo.269.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.270.1" xmlns="http://www.w3.org/1999/xhtml">OnClick</span></strong><span class="koboSpan" id="kobo.271.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.272.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.273.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.273.2" xmlns="http://www.w3.org/1999/xhtml">These parameters are defined in </span><strong class="source-inline"><span class="koboSpan" id="kobo.274.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem.razor.cs</span></strong><span class="koboSpan" id="kobo.275.1" xmlns="http://www.w3.org/1999/xhtml"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.276.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.277.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.278.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.6: MenuItem.razor.cs (https://epa.ms/MenuItem10-6)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.279.1" xmlns="http://www.w3.org/1999/xhtml">
namespace PassXYZ.BlazorUI;
public partial class MenuItem
{
  [Parameter]
  public string? </span><span class="koboSpan" id="kobo.279.2" xmlns="http://www.w3.org/1999/xhtml">Id { get; set; }                          ❶
  [Parameter]
  public EventCallback&lt;MouseEventArgs&gt; OnClick {get; set;} ❷
  [Parameter]
  public RenderFragment ChildContent { get; set; }         ❸
}</span></pre>
<p><span class="koboSpan" id="kobo.280.1" xmlns="http://www.w3.org/1999/xhtml">❶ The </span><strong class="source-inline"><span class="koboSpan" id="kobo.281.1" xmlns="http://www.w3.org/1999/xhtml">Id</span></strong><span class="koboSpan" id="kobo.282.1" xmlns="http://www.w3.org/1999/xhtml"> parameter is used to specify the dialog ID when the menu item is clicked. </span><span class="koboSpan" id="kobo.282.2" xmlns="http://www.w3.org/1999/xhtml">❷ </span><strong class="source-inline"><span class="koboSpan" id="kobo.283.1" xmlns="http://www.w3.org/1999/xhtml">OnClick</span></strong><span class="koboSpan" id="kobo.284.1" xmlns="http://www.w3.org/1999/xhtml"> is used to register an event handler for a button click event. </span><span class="koboSpan" id="kobo.284.2" xmlns="http://www.w3.org/1999/xhtml">❸ </span><strong class="source-inline"><span class="koboSpan" id="kobo.285.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.286.1" xmlns="http://www.w3.org/1999/xhtml"> is used to display child content such as the menu </span><span class="No-Break"><span class="koboSpan" id="kobo.287.1" xmlns="http://www.w3.org/1999/xhtml">item name.</span></span></p>
<p><span class="koboSpan" id="kobo.288.1" xmlns="http://www.w3.org/1999/xhtml">We have implemented the components for the context menu. </span><span class="koboSpan" id="kobo.288.2" xmlns="http://www.w3.org/1999/xhtml">We can replace the redundant code in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.289.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.290.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.291.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.292.1" xmlns="http://www.w3.org/1999/xhtml"> pages with context menu components. </span><span class="koboSpan" id="kobo.292.2" xmlns="http://www.w3.org/1999/xhtml">On the </span><strong class="source-inline"><span class="koboSpan" id="kobo.293.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.294.1" xmlns="http://www.w3.org/1999/xhtml"> page, the context menu is implemented </span><span class="No-Break"><span class="koboSpan" id="kobo.295.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.296.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;Dropdown OnClick="@(() =&gt; currentItem.Data=listGroupItem=item)"&gt;
  &lt;MenuItem Id="@_dialogEditId"
    OnClick="@(() =&gt; _isNewItem=false)"&gt;Edit&lt;/MenuItem&gt;
  &lt;MenuItem Id="@_dialogDeleteId"&gt;Delete&lt;/MenuItem&gt;
&lt;/Dropdown&gt;</span></pre>
<p><span class="koboSpan" id="kobo.297.1" xmlns="http://www.w3.org/1999/xhtml">On the </span><strong class="source-inline"><span class="koboSpan" id="kobo.298.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.299.1" xmlns="http://www.w3.org/1999/xhtml"> page, the </span><a id="_idIndexMarker756"/><span class="koboSpan" id="kobo.300.1" xmlns="http://www.w3.org/1999/xhtml">context </span><a id="_idIndexMarker757"/><span class="koboSpan" id="kobo.301.1" xmlns="http://www.w3.org/1999/xhtml">menu is implemented </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.303.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;Dropdown OnClick="@(() = &gt;
  {currentField.Data=listGroupField=field;})"&gt;
  &lt;MenuItem Id="@_dialogEditId"
    OnClick="@(() =&gt; _isNewField=false)"&gt;Edit&lt;/MenuItem&gt;
  &lt;MenuItem Id="@_dialogDeleteId"&gt;Delete&lt;/MenuItem&gt;
  @if (field.IsProtected) {
&lt;MenuItem OnClick="OnToggleShowPassword"&gt;
  @(field.IsHide ? </span><span class="koboSpan" id="kobo.303.2" xmlns="http://www.w3.org/1999/xhtml">"Show":"Hide")
&lt;/MenuItem&gt;
  }
&lt;/Dropdown&gt;</span></pre>
<p><span class="koboSpan" id="kobo.304.1" xmlns="http://www.w3.org/1999/xhtml">After we refined the code of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.305.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.306.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.307.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.308.1" xmlns="http://www.w3.org/1999/xhtml"> pages, we created a modal dialog, navigation bar, and context menu components. </span><span class="koboSpan" id="kobo.308.2" xmlns="http://www.w3.org/1999/xhtml">The code looks much more elegant and concise now. </span><span class="koboSpan" id="kobo.308.3" xmlns="http://www.w3.org/1999/xhtml">However, we still have room to refine the code further. </span><span class="koboSpan" id="kobo.308.4" xmlns="http://www.w3.org/1999/xhtml">The main UI logic in both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.309.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.310.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.311.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.312.1" xmlns="http://www.w3.org/1999/xhtml"> pages is a list view. </span><span class="koboSpan" id="kobo.312.2" xmlns="http://www.w3.org/1999/xhtml">We can refine this part of </span><a id="_idIndexMarker758"/><span class="koboSpan" id="kobo.313.1" xmlns="http://www.w3.org/1999/xhtml">the </span><a id="_idIndexMarker759"/><span class="koboSpan" id="kobo.314.1" xmlns="http://www.w3.org/1999/xhtml">code as a </span><strong class="source-inline"><span class="koboSpan" id="kobo.315.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.316.1" xmlns="http://www.w3.org/1999/xhtml"> component. </span><span class="koboSpan" id="kobo.316.2" xmlns="http://www.w3.org/1999/xhtml">To create a </span><strong class="source-inline"><span class="koboSpan" id="kobo.317.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.318.1" xmlns="http://www.w3.org/1999/xhtml"> component, we need to use an advanced feature called </span><span class="No-Break"><span class="koboSpan" id="kobo.319.1" xmlns="http://www.w3.org/1999/xhtml">templated components.</span></span></p>
<h1 id="_idParaDest-200"><a id="_idTextAnchor216"/><span class="koboSpan" id="kobo.320.1" xmlns="http://www.w3.org/1999/xhtml">Using templated components</span></h1>
<p><span class="koboSpan" id="kobo.321.1" xmlns="http://www.w3.org/1999/xhtml">To build a Razor</span><a id="_idIndexMarker760"/><span class="koboSpan" id="kobo.322.1" xmlns="http://www.w3.org/1999/xhtml"> component, component parameters are the channels for parent and child communication. </span><span class="koboSpan" id="kobo.322.2" xmlns="http://www.w3.org/1999/xhtml">In </span><a href="B16588_09.xhtml#_idTextAnchor186"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.323.1" xmlns="http://www.w3.org/1999/xhtml">Chapter 9</span></em></span></a><span class="koboSpan" id="kobo.324.1" xmlns="http://www.w3.org/1999/xhtml">, </span><em class="italic"><span class="koboSpan" id="kobo.325.1" xmlns="http://www.w3.org/1999/xhtml">Razor Components and Data Binding</span></em><span class="koboSpan" id="kobo.326.1" xmlns="http://www.w3.org/1999/xhtml">, we introduced nested components. </span><span class="koboSpan" id="kobo.326.2" xmlns="http://www.w3.org/1999/xhtml">We mentioned a special </span><strong class="source-inline"><span class="koboSpan" id="kobo.327.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.328.1" xmlns="http://www.w3.org/1999/xhtml"> component parameter of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.329.1" xmlns="http://www.w3.org/1999/xhtml">RenderFragment</span></strong><span class="koboSpan" id="kobo.330.1" xmlns="http://www.w3.org/1999/xhtml"> type. </span><span class="koboSpan" id="kobo.330.2" xmlns="http://www.w3.org/1999/xhtml">The parent component can set the content of the child component with this parameter. </span><span class="koboSpan" id="kobo.330.3" xmlns="http://www.w3.org/1999/xhtml">For example, the content of </span><strong class="source-inline"><span class="koboSpan" id="kobo.331.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.332.1" xmlns="http://www.w3.org/1999/xhtml"> in the following code can be set to an </span><span class="No-Break"><span class="koboSpan" id="kobo.333.1" xmlns="http://www.w3.org/1999/xhtml">HTML string:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.334.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;MenuItem Id="@_dialogDeleteId"&gt;
  &lt;strong&gt;Delete&lt;/strong&gt;
&lt;/MenuItem&gt;</span></pre>
<p><span class="koboSpan" id="kobo.335.1" xmlns="http://www.w3.org/1999/xhtml">We can do this because </span><strong class="source-inline"><span class="koboSpan" id="kobo.336.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.337.1" xmlns="http://www.w3.org/1999/xhtml"> defines the following component parameter as we can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.338.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.6</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.339.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.340.1" xmlns="http://www.w3.org/1999/xhtml">
[Parameter]
public RenderFragment ChildContent { get; set; }</span></pre>
<p><span class="koboSpan" id="kobo.341.1" xmlns="http://www.w3.org/1999/xhtml">If we want to explicitly specify the </span><strong class="source-inline"><span class="koboSpan" id="kobo.342.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.343.1" xmlns="http://www.w3.org/1999/xhtml"> parameter, we can do this </span><span class="No-Break"><span class="koboSpan" id="kobo.344.1" xmlns="http://www.w3.org/1999/xhtml">as well:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.345.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;MenuItem Id="@_dialogDeleteId"&gt;
  &lt;ChildContent&gt;
    &lt;strong&gt;Delete&lt;/strong&gt;
  &lt;/ChildContent&gt;
&lt;/MenuItem&gt;</span></pre>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.346.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.347.1" xmlns="http://www.w3.org/1999/xhtml"> is a special component parameter that we can implicitly use in the markup language. </span><span class="koboSpan" id="kobo.347.2" xmlns="http://www.w3.org/1999/xhtml">To use </span><strong class="source-inline"><span class="koboSpan" id="kobo.348.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.349.1" xmlns="http://www.w3.org/1999/xhtml">, we define a component that can accept a UI template of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.350.1" xmlns="http://www.w3.org/1999/xhtml">RenderFragment</span></strong><span class="koboSpan" id="kobo.351.1" xmlns="http://www.w3.org/1999/xhtml"> type as a component parameter. </span><span class="koboSpan" id="kobo.351.2" xmlns="http://www.w3.org/1999/xhtml">We can define more than one UI template as a parameter when we create a new component. </span><span class="koboSpan" id="kobo.351.3" xmlns="http://www.w3.org/1999/xhtml">This kind of component is called a </span><span class="No-Break"><span class="koboSpan" id="kobo.352.1" xmlns="http://www.w3.org/1999/xhtml">templated component.</span></span></p>
<p><span class="koboSpan" id="kobo.353.1" xmlns="http://www.w3.org/1999/xhtml">A render fragment of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.354.1" xmlns="http://www.w3.org/1999/xhtml">RenderFragment</span></strong><span class="koboSpan" id="kobo.355.1" xmlns="http://www.w3.org/1999/xhtml"> type represents a segment of the UI to render. </span><span class="koboSpan" id="kobo.355.2" xmlns="http://www.w3.org/1999/xhtml">There</span><a id="_idIndexMarker761"/><span class="koboSpan" id="kobo.356.1" xmlns="http://www.w3.org/1999/xhtml"> is also a generic version, </span><strong class="source-inline"><span class="koboSpan" id="kobo.357.1" xmlns="http://www.w3.org/1999/xhtml">RenderFragment&lt;TValue&gt;</span></strong><span class="koboSpan" id="kobo.358.1" xmlns="http://www.w3.org/1999/xhtml">, which takes a type parameter. </span><span class="koboSpan" id="kobo.358.2" xmlns="http://www.w3.org/1999/xhtml">We can specify a type when </span><strong class="source-inline"><span class="koboSpan" id="kobo.359.1" xmlns="http://www.w3.org/1999/xhtml">RenderFragment</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.360.1" xmlns="http://www.w3.org/1999/xhtml">is invoked.</span></span></p>
<h2 id="_idParaDest-201"><a id="_idTextAnchor217"/><span class="koboSpan" id="kobo.361.1" xmlns="http://www.w3.org/1999/xhtml">Creating a ListView component</span></h2>
<p><span class="koboSpan" id="kobo.362.1" xmlns="http://www.w3.org/1999/xhtml">To create </span><strong class="source-inline"><span class="koboSpan" id="kobo.363.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.364.1" xmlns="http://www.w3.org/1999/xhtml">, we </span><a id="_idIndexMarker762"/><span class="koboSpan" id="kobo.365.1" xmlns="http://www.w3.org/1999/xhtml">need to use multiple UI templates as component parameters. </span><span class="koboSpan" id="kobo.365.2" xmlns="http://www.w3.org/1999/xhtml">We can create a new Razor component in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.366.1" xmlns="http://www.w3.org/1999/xhtml">PassXYZ.BlazorUI</span></strong><span class="koboSpan" id="kobo.367.1" xmlns="http://www.w3.org/1999/xhtml"> project and name it </span><strong class="source-inline"><span class="koboSpan" id="kobo.368.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.369.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.369.2" xmlns="http://www.w3.org/1999/xhtml">As we did for </span><strong class="source-inline"><span class="koboSpan" id="kobo.370.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.371.1" xmlns="http://www.w3.org/1999/xhtml"> and the context menu, we separate the UI and code in a Razor file (</span><em class="italic"><span class="koboSpan" id="kobo.372.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.7</span></em><span class="koboSpan" id="kobo.373.1" xmlns="http://www.w3.org/1999/xhtml">) and a C# code-behind file (</span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.374.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.375.1" xmlns="http://www.w3.org/1999/xhtml">):</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.376.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.7: ListView.razor (https://epa.ms/ListView10-7)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.377.1" xmlns="http://www.w3.org/1999/xhtml">
@namespace PassXYZ.BlazorUI
@typeparam TItem
&lt;div class="list-group"&gt;
  @if (Header != null) {
      @Header                                             ❶
  }
  @if (Row != null &amp;&amp; Items != null) {
    @foreach (var item in Items) {
      &lt;div class="dropdown list-group-item
        list-group-item-action
        d-flex gap-1 py-2" style="border: none"
        aria-current="true"&gt;
          @Row.Invoke(item)                               ❷
      &lt;/div&gt;
    }
  }
  @if (Footer != null) {
      &lt;div class="container"&gt;
        &lt;article&gt;@Footer&lt;/article&gt;
      &lt;/div&gt;                                              ❸
  }
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.378.1" xmlns="http://www.w3.org/1999/xhtml">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.379.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.380.1" xmlns="http://www.w3.org/1999/xhtml"> Razor file, we define three UI templates – </span><strong class="source-inline"><span class="koboSpan" id="kobo.381.1" xmlns="http://www.w3.org/1999/xhtml">Header</span></strong><span class="koboSpan" id="kobo.382.1" xmlns="http://www.w3.org/1999/xhtml"> ❶, </span><strong class="source-inline"><span class="koboSpan" id="kobo.383.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.384.1" xmlns="http://www.w3.org/1999/xhtml"> ❷, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.385.1" xmlns="http://www.w3.org/1999/xhtml">Footer</span></strong><span class="koboSpan" id="kobo.386.1" xmlns="http://www.w3.org/1999/xhtml"> ❸. </span><span class="koboSpan" id="kobo.386.2" xmlns="http://www.w3.org/1999/xhtml">We render </span><strong class="source-inline"><span class="koboSpan" id="kobo.387.1" xmlns="http://www.w3.org/1999/xhtml">Header</span></strong><span class="koboSpan" id="kobo.388.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.389.1" xmlns="http://www.w3.org/1999/xhtml">Footer</span></strong><span class="koboSpan" id="kobo.390.1" xmlns="http://www.w3.org/1999/xhtml"> the same as </span><strong class="source-inline"><span class="koboSpan" id="kobo.391.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong><span class="koboSpan" id="kobo.392.1" xmlns="http://www.w3.org/1999/xhtml">, but the </span><strong class="source-inline"><span class="koboSpan" id="kobo.393.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.394.1" xmlns="http://www.w3.org/1999/xhtml"> component </span><a id="_idIndexMarker763"/><span class="koboSpan" id="kobo.395.1" xmlns="http://www.w3.org/1999/xhtml">parameter looks different. </span><span class="koboSpan" id="kobo.395.2" xmlns="http://www.w3.org/1999/xhtml">We render it </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.397.1" xmlns="http://www.w3.org/1999/xhtml">
@Row(item)</span></pre>
<p><span class="koboSpan" id="kobo.398.1" xmlns="http://www.w3.org/1999/xhtml">Or we can render it </span><span class="No-Break"><span class="koboSpan" id="kobo.399.1" xmlns="http://www.w3.org/1999/xhtml">like this:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.400.1" xmlns="http://www.w3.org/1999/xhtml">
@Row.Invoke(item)</span></pre>
<p><span class="koboSpan" id="kobo.401.1" xmlns="http://www.w3.org/1999/xhtml">We render it with an </span><strong class="source-inline"><span class="koboSpan" id="kobo.402.1" xmlns="http://www.w3.org/1999/xhtml">item</span></strong><span class="koboSpan" id="kobo.403.1" xmlns="http://www.w3.org/1999/xhtml"> argument. </span><span class="koboSpan" id="kobo.403.2" xmlns="http://www.w3.org/1999/xhtml">The type of </span><strong class="source-inline"><span class="koboSpan" id="kobo.404.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.405.1" xmlns="http://www.w3.org/1999/xhtml"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.406.1" xmlns="http://www.w3.org/1999/xhtml">RenderFragment&lt;TValue&gt;</span></strong><span class="koboSpan" id="kobo.407.1" xmlns="http://www.w3.org/1999/xhtml">, as we can see in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.408.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.8</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.409.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.410.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.8: ListView.razor.cs (https://epa.ms/ListView10-8)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.411.1" xmlns="http://www.w3.org/1999/xhtml">
namespace PassXYZ.BlazorUI;
public partial class ListView&lt;TItem&gt;
{
  [Parameter]
  public RenderFragment? </span><span class="koboSpan" id="kobo.411.2" xmlns="http://www.w3.org/1999/xhtml">Header { get; set; }            ①
  [Parameter]
  public RenderFragment&lt;TItem&gt;? </span><span class="koboSpan" id="kobo.411.3" xmlns="http://www.w3.org/1999/xhtml">Row { get; set; }        ②
  [Parameter]
  public IEnumerable&lt;TItem&gt;? </span><span class="koboSpan" id="kobo.411.4" xmlns="http://www.w3.org/1999/xhtml">Items { get; set; }         ③
  [Parameter]
  public RenderFragment? </span><span class="koboSpan" id="kobo.411.5" xmlns="http://www.w3.org/1999/xhtml">Footer { get; set; }            ④
}</span></pre>
<p><span class="koboSpan" id="kobo.412.1" xmlns="http://www.w3.org/1999/xhtml">We define </span><strong class="source-inline"><span class="koboSpan" id="kobo.413.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.414.1" xmlns="http://www.w3.org/1999/xhtml"> as a generic </span><strong class="source-inline"><span class="koboSpan" id="kobo.415.1" xmlns="http://www.w3.org/1999/xhtml">ListView&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.416.1" xmlns="http://www.w3.org/1999/xhtml"> type with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.417.1" xmlns="http://www.w3.org/1999/xhtml">TItem</span></strong><span class="koboSpan" id="kobo.418.1" xmlns="http://www.w3.org/1999/xhtml"> type parameter. </span><span class="koboSpan" id="kobo.418.2" xmlns="http://www.w3.org/1999/xhtml">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.419.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.420.1" xmlns="http://www.w3.org/1999/xhtml"> component, we can define a list view header using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.421.1" xmlns="http://www.w3.org/1999/xhtml">Header</span></strong><span class="koboSpan" id="kobo.422.1" xmlns="http://www.w3.org/1999/xhtml"> ① parameter and the footer using </span><strong class="source-inline"><span class="koboSpan" id="kobo.423.1" xmlns="http://www.w3.org/1999/xhtml">Footer</span></strong><span class="koboSpan" id="kobo.424.1" xmlns="http://www.w3.org/1999/xhtml"> ④. </span><strong class="source-inline"><span class="koboSpan" id="kobo.425.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.426.1" xmlns="http://www.w3.org/1999/xhtml"> can be bound to any data collection</span><a id="_idIndexMarker764"/><span class="koboSpan" id="kobo.427.1" xmlns="http://www.w3.org/1999/xhtml"> of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.428.1" xmlns="http://www.w3.org/1999/xhtml">IEnumerable&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.429.1" xmlns="http://www.w3.org/1999/xhtml"> type using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.430.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.431.1" xmlns="http://www.w3.org/1999/xhtml"> parameter ③. </span><span class="koboSpan" id="kobo.431.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.432.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.433.1" xmlns="http://www.w3.org/1999/xhtml"> parameter ② can be used to define the UI template for an individual item in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.434.1" xmlns="http://www.w3.org/1999/xhtml">foreach</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.435.1" xmlns="http://www.w3.org/1999/xhtml"> loop.</span></span></p>
<h2 id="_idParaDest-202"><a id="_idTextAnchor218"/><span class="koboSpan" id="kobo.436.1" xmlns="http://www.w3.org/1999/xhtml">Using the ListView component</span></h2>
<p><span class="koboSpan" id="kobo.437.1" xmlns="http://www.w3.org/1999/xhtml">Now, we can</span><a id="_idIndexMarker765"/><span class="koboSpan" id="kobo.438.1" xmlns="http://www.w3.org/1999/xhtml"> look at the usage of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.439.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.440.1" xmlns="http://www.w3.org/1999/xhtml"> component in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.441.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.442.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.443.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.444.1" xmlns="http://www.w3.org/1999/xhtml"> pages. </span><span class="koboSpan" id="kobo.444.2" xmlns="http://www.w3.org/1999/xhtml">We use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.445.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.446.1" xmlns="http://www.w3.org/1999/xhtml"> page as an </span><span class="No-Break"><span class="koboSpan" id="kobo.447.1" xmlns="http://www.w3.org/1999/xhtml">example here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.448.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;ListView Items="fields"&gt;                                ❶
  &lt;Row Context="field"&gt;                                  ❷
    @if (field.ShowContextAction == null) {
      &lt;span class="oi oi-pencil" aria-hidden="true"&gt;&lt;/span&gt;
      &lt;div class="d-flex gap-2 w-100
        justify-content-between"&gt;
        &lt;div&gt;
          &lt;h6 class="mb-0"&gt;@field.Key&lt;/h6&gt;
          &lt;p class="mb-0"&gt;@field.Value&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;Dropdown
       OnClick="@(() =&gt;
       {currentField.Data=listGroupField=field;})"&gt;
         &lt;MenuItem Id="@_dialogEditId"
           OnClick="@(() =&gt; _isNewField=false)"&gt;
           Edit
         &lt;/MenuItem&gt;
         &lt;MenuItem Id="@_dialogDeleteId"&gt;Delete&lt;/MenuItem&gt;
        @if (field.IsProtected) {
          &lt;MenuItem OnClick="OnToggleShowPassword"&gt;
            @(field.IsHide ? </span><span class="koboSpan" id="kobo.448.2" xmlns="http://www.w3.org/1999/xhtml">"Show":"Hide")
          &lt;/MenuItem&gt;
        }
      &lt;/Dropdown&gt;
    }
  &lt;/Row&gt;
  &lt;Footer&gt;
    @((MarkupString)notes)
  &lt;/Footer&gt;
&lt;/ListView&gt;</span></pre>
<p><span class="koboSpan" id="kobo.449.1" xmlns="http://www.w3.org/1999/xhtml">Since we</span><a id="_idIndexMarker766"/><span class="koboSpan" id="kobo.450.1" xmlns="http://www.w3.org/1999/xhtml"> define </span><strong class="source-inline"><span class="koboSpan" id="kobo.451.1" xmlns="http://www.w3.org/1999/xhtml">Header</span></strong><span class="koboSpan" id="kobo.452.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.453.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.454.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.455.1" xmlns="http://www.w3.org/1999/xhtml">Footer</span></strong><span class="koboSpan" id="kobo.456.1" xmlns="http://www.w3.org/1999/xhtml"> as optional parameters, we don’t have to specify all of them. </span><span class="koboSpan" id="kobo.456.2" xmlns="http://www.w3.org/1999/xhtml">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.457.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.458.1" xmlns="http://www.w3.org/1999/xhtml"> page, we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.459.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.460.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.461.1" xmlns="http://www.w3.org/1999/xhtml">Footer</span></strong><span class="koboSpan" id="kobo.462.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.462.2" xmlns="http://www.w3.org/1999/xhtml">❶ We need to pass the list of fields to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.463.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.464.1" xmlns="http://www.w3.org/1999/xhtml"> parameter first. </span><span class="koboSpan" id="kobo.464.2" xmlns="http://www.w3.org/1999/xhtml">❷ Each field in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.465.1" xmlns="http://www.w3.org/1999/xhtml">foreach</span></strong><span class="koboSpan" id="kobo.466.1" xmlns="http://www.w3.org/1999/xhtml"> loop is passed to </span><strong class="source-inline"><span class="koboSpan" id="kobo.467.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.468.1" xmlns="http://www.w3.org/1999/xhtml"> as an argument to </span><strong class="source-inline"><span class="koboSpan" id="kobo.469.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.470.1" xmlns="http://www.w3.org/1999/xhtml">, which is </span><span class="No-Break"><span class="koboSpan" id="kobo.471.1" xmlns="http://www.w3.org/1999/xhtml">defined here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.472.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;Row Context="field"&gt;</span></pre>
<p><span class="koboSpan" id="kobo.473.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.474.1" xmlns="http://www.w3.org/1999/xhtml">"field"</span></strong><span class="koboSpan" id="kobo.475.1" xmlns="http://www.w3.org/1999/xhtml"> value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.476.1" xmlns="http://www.w3.org/1999/xhtml">Context</span></strong><span class="koboSpan" id="kobo.477.1" xmlns="http://www.w3.org/1999/xhtml"> property is used to specify the argument to </span><strong class="source-inline"><span class="koboSpan" id="kobo.478.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.479.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.479.2" xmlns="http://www.w3.org/1999/xhtml">Inside the UI template of </span><strong class="source-inline"><span class="koboSpan" id="kobo.480.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.481.1" xmlns="http://www.w3.org/1999/xhtml">, we display the key value of </span><strong class="source-inline"><span class="koboSpan" id="kobo.482.1" xmlns="http://www.w3.org/1999/xhtml">field</span></strong><span class="koboSpan" id="kobo.483.1" xmlns="http://www.w3.org/1999/xhtml"> and create a context menu using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.484.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.485.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.486.1" xmlns="http://www.w3.org/1999/xhtml">MenuItem</span></strong><span class="koboSpan" id="kobo.487.1" xmlns="http://www.w3.org/1999/xhtml"> components that we implemented in the </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1" xmlns="http://www.w3.org/1999/xhtml">last section.</span></span></p>
<p><span class="koboSpan" id="kobo.489.1" xmlns="http://www.w3.org/1999/xhtml">Using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.490.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.491.1" xmlns="http://www.w3.org/1999/xhtml"> component, we can see that the implementation of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.492.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.493.1" xmlns="http://www.w3.org/1999/xhtml"> page looks much </span><span class="No-Break"><span class="koboSpan" id="kobo.494.1" xmlns="http://www.w3.org/1999/xhtml">better now.</span></span></p>
<p><span class="koboSpan" id="kobo.495.1" xmlns="http://www.w3.org/1999/xhtml">We have made the improvement by creating our own </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1" xmlns="http://www.w3.org/1999/xhtml">Razor components.</span></span></p>
<p><span class="koboSpan" id="kobo.497.1" xmlns="http://www.w3.org/1999/xhtml">In Blazor, there are a few options for us to develop a UI. </span><span class="koboSpan" id="kobo.497.2" xmlns="http://www.w3.org/1999/xhtml">We can use HTML/CSS for the UI design. </span><span class="koboSpan" id="kobo.497.3" xmlns="http://www.w3.org/1999/xhtml">On top of HTML/CSS, we can build our own Razor components to improve the design and implementation. </span><span class="koboSpan" id="kobo.497.4" xmlns="http://www.w3.org/1999/xhtml">There are also many third-party Razor component libraries available for us, and </span><a id="_idIndexMarker767"/><span class="koboSpan" id="kobo.498.1" xmlns="http://www.w3.org/1999/xhtml">we can also use ASP.NET Core built-in </span><span class="No-Break"><span class="koboSpan" id="kobo.499.1" xmlns="http://www.w3.org/1999/xhtml">Razor components.</span></span></p>
<p><span class="koboSpan" id="kobo.500.1" xmlns="http://www.w3.org/1999/xhtml">In the next section, we will support data validation using ASP.NET built-in </span><span class="No-Break"><span class="koboSpan" id="kobo.501.1" xmlns="http://www.w3.org/1999/xhtml">Razor components.</span></span></p>
<h1 id="_idParaDest-203"><a id="_idTextAnchor219"/><span class="koboSpan" id="kobo.502.1" xmlns="http://www.w3.org/1999/xhtml">Built-in components and validation</span></h1>
<p><span class="koboSpan" id="kobo.503.1" xmlns="http://www.w3.org/1999/xhtml">In our app, we</span><a id="_idIndexMarker768"/><span class="koboSpan" id="kobo.504.1" xmlns="http://www.w3.org/1999/xhtml"> implement </span><strong class="source-inline"><span class="koboSpan" id="kobo.505.1" xmlns="http://www.w3.org/1999/xhtml">EditorDialog</span></strong><span class="koboSpan" id="kobo.506.1" xmlns="http://www.w3.org/1999/xhtml"> as a key value editor. </span><span class="koboSpan" id="kobo.506.2" xmlns="http://www.w3.org/1999/xhtml">When we create or edit an item or a field, we use it to edit a pair of key-value data. </span><strong class="source-inline"><span class="koboSpan" id="kobo.507.1" xmlns="http://www.w3.org/1999/xhtml">EditorDialog</span></strong><span class="koboSpan" id="kobo.508.1" xmlns="http://www.w3.org/1999/xhtml"> is built using the </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1" xmlns="http://www.w3.org/1999/xhtml">Bootstrap framework.</span></span></p>
<p><span class="koboSpan" id="kobo.510.1" xmlns="http://www.w3.org/1999/xhtml">One key feature missing in </span><strong class="source-inline"><span class="koboSpan" id="kobo.511.1" xmlns="http://www.w3.org/1999/xhtml">EditorDialog</span></strong><span class="koboSpan" id="kobo.512.1" xmlns="http://www.w3.org/1999/xhtml"> is that it doesn’t support data validation. </span><span class="koboSpan" id="kobo.512.2" xmlns="http://www.w3.org/1999/xhtml">Data validation includes two layers – the UI layer and logic. </span><span class="koboSpan" id="kobo.512.3" xmlns="http://www.w3.org/1999/xhtml">We can implement simple data validation logic in C#, but the UI of data validation is much more complicated. </span><span class="koboSpan" id="kobo.512.4" xmlns="http://www.w3.org/1999/xhtml">We haven’t done it in the UI layer yet. </span><span class="koboSpan" id="kobo.512.5" xmlns="http://www.w3.org/1999/xhtml">In both the </span><strong class="source-inline"><span class="koboSpan" id="kobo.513.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.514.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.515.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.516.1" xmlns="http://www.w3.org/1999/xhtml"> pages, we implemented simple data validation logic. </span><span class="koboSpan" id="kobo.516.2" xmlns="http://www.w3.org/1999/xhtml">We can review the data validation logic in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.517.1" xmlns="http://www.w3.org/1999/xhtml">UpdateItemAsync()</span></strong><span class="koboSpan" id="kobo.518.1" xmlns="http://www.w3.org/1999/xhtml"> method of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.519.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.520.1" xmlns="http://www.w3.org/1999/xhtml"> page:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.521.1" xmlns="http://www.w3.org/1999/xhtml">
private async Task&lt;bool&gt; UpdateItemAsync(string key, string value)
{
  if (listGroupItem == null) return false;
  if (string.IsNullOrEmpty(key) ||
    string.IsNullOrEmpty(value))
    return false;
  listGroupItem.Name = key;
  listGroupItem.Notes = value;
  if (_isNewItem) {…}
  else {...}
  StateHasChanged();
  return true;
}</span></pre>
<p><span class="koboSpan" id="kobo.522.1" xmlns="http://www.w3.org/1999/xhtml">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.523.1" xmlns="http://www.w3.org/1999/xhtml">EditorDialog</span></strong><span class="koboSpan" id="kobo.524.1" xmlns="http://www.w3.org/1999/xhtml">, after we complete the editing, </span><strong class="source-inline"><span class="koboSpan" id="kobo.525.1" xmlns="http://www.w3.org/1999/xhtml">UpdateItemAsync()</span></strong><span class="koboSpan" id="kobo.526.1" xmlns="http://www.w3.org/1999/xhtml"> is invoked to save data. </span><span class="koboSpan" id="kobo.526.2" xmlns="http://www.w3.org/1999/xhtml">We check the value of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.527.1" xmlns="http://www.w3.org/1999/xhtml">key</span></strong><span class="koboSpan" id="kobo.528.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.529.1" xmlns="http://www.w3.org/1999/xhtml">value</span></strong><span class="koboSpan" id="kobo.530.1" xmlns="http://www.w3.org/1999/xhtml"> arguments first before we continue. </span><span class="koboSpan" id="kobo.530.2" xmlns="http://www.w3.org/1999/xhtml">If any of them is </span><strong class="source-inline"><span class="koboSpan" id="kobo.531.1" xmlns="http://www.w3.org/1999/xhtml">null</span></strong><span class="koboSpan" id="kobo.532.1" xmlns="http://www.w3.org/1999/xhtml">, we just return </span><strong class="source-inline"><span class="koboSpan" id="kobo.533.1" xmlns="http://www.w3.org/1999/xhtml">false</span></strong><span class="koboSpan" id="kobo.534.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.534.2" xmlns="http://www.w3.org/1999/xhtml">There is no problem in the program logic here, but we should notify users about the error, which is due to data saving. </span><span class="koboSpan" id="kobo.534.3" xmlns="http://www.w3.org/1999/xhtml">With </span><a id="_idIndexMarker769"/><span class="koboSpan" id="kobo.535.1" xmlns="http://www.w3.org/1999/xhtml">ASP.NET built-in components, data validation is supported at the UI layer. </span><span class="koboSpan" id="kobo.535.2" xmlns="http://www.w3.org/1999/xhtml">The user can get instant feedback about </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1" xmlns="http://www.w3.org/1999/xhtml">the error.</span></span></p>
<h2 id="_idParaDest-204"><a id="_idTextAnchor220"/><span class="koboSpan" id="kobo.537.1" xmlns="http://www.w3.org/1999/xhtml">Using built-in components</span></h2>
<p><span class="koboSpan" id="kobo.538.1" xmlns="http://www.w3.org/1999/xhtml">We actually used </span><a id="_idIndexMarker770"/><span class="koboSpan" id="kobo.539.1" xmlns="http://www.w3.org/1999/xhtml">built-in components in previous chapters. </span><span class="koboSpan" id="kobo.539.2" xmlns="http://www.w3.org/1999/xhtml">When we introduced routing and the layout of Razor components, we used the </span><strong class="source-inline"><span class="koboSpan" id="kobo.540.1" xmlns="http://www.w3.org/1999/xhtml">Router</span></strong><span class="koboSpan" id="kobo.541.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.542.1" xmlns="http://www.w3.org/1999/xhtml">RouteView</span></strong><span class="koboSpan" id="kobo.543.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.544.1" xmlns="http://www.w3.org/1999/xhtml">LayoutView</span></strong><span class="koboSpan" id="kobo.545.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.546.1" xmlns="http://www.w3.org/1999/xhtml">MainLayout</span></strong><span class="koboSpan" id="kobo.547.1" xmlns="http://www.w3.org/1999/xhtml"> components in </span><strong class="source-inline"><span class="koboSpan" id="kobo.548.1" xmlns="http://www.w3.org/1999/xhtml">Main.razor</span></strong><span class="koboSpan" id="kobo.549.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.549.2" xmlns="http://www.w3.org/1999/xhtml">They are all </span><span class="No-Break"><span class="koboSpan" id="kobo.550.1" xmlns="http://www.w3.org/1999/xhtml">built-in components.</span></span></p>
<p><span class="koboSpan" id="kobo.551.1" xmlns="http://www.w3.org/1999/xhtml">In this section, we will explore built-in input components, which we can use to enhance the experience of editing components with data validation support. </span><span class="koboSpan" id="kobo.551.2" xmlns="http://www.w3.org/1999/xhtml">The following table is a list of the built-in </span><span class="No-Break"><span class="koboSpan" id="kobo.552.1" xmlns="http://www.w3.org/1999/xhtml">input components:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table001-7">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.553.1" xmlns="http://www.w3.org/1999/xhtml">Input component</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.554.1" xmlns="http://www.w3.org/1999/xhtml">HTML tag</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.555.1" xmlns="http://www.w3.org/1999/xhtml">InputCheckbox</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.556.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.557.1" xmlns="http://www.w3.org/1999/xhtml">input type="checkbox"&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.558.1" xmlns="http://www.w3.org/1999/xhtml">InputDate&lt;TValue&gt;</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.559.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.560.1" xmlns="http://www.w3.org/1999/xhtml">input type="date"&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.561.1" xmlns="http://www.w3.org/1999/xhtml">InputFile</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.562.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.563.1" xmlns="http://www.w3.org/1999/xhtml">input type="file"&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.564.1" xmlns="http://www.w3.org/1999/xhtml">InputNumber&lt;TValue&gt;</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.565.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.566.1" xmlns="http://www.w3.org/1999/xhtml">input type="number"&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.567.1" xmlns="http://www.w3.org/1999/xhtml">InputRadio&lt;TValue&gt;</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.568.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.569.1" xmlns="http://www.w3.org/1999/xhtml">input type="radio"&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.570.1" xmlns="http://www.w3.org/1999/xhtml">InputRadioGroup&lt;TValue&gt;</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.571.1" xmlns="http://www.w3.org/1999/xhtml">Group of </span><span class="No-Break"><span class="koboSpan" id="kobo.572.1" xmlns="http://www.w3.org/1999/xhtml">child </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.573.1" xmlns="http://www.w3.org/1999/xhtml">InputRadio&lt;TValue&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.574.1" xmlns="http://www.w3.org/1999/xhtml">InputSelect&lt;TValue&gt;</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.575.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.576.1" xmlns="http://www.w3.org/1999/xhtml">select&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.577.1" xmlns="http://www.w3.org/1999/xhtml">InputText</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.578.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.579.1" xmlns="http://www.w3.org/1999/xhtml">input&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.580.1" xmlns="http://www.w3.org/1999/xhtml">InputTextArea</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.581.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.582.1" xmlns="http://www.w3.org/1999/xhtml">textarea&gt;</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.583.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><strong class="source-inline"><span class="koboSpan" id="kobo.584.1" xmlns="http://www.w3.org/1999/xhtml">&lt;</span></strong><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.585.1" xmlns="http://www.w3.org/1999/xhtml">form&gt;</span></strong></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.586.1" xmlns="http://www.w3.org/1999/xhtml">Table 10.1: Built-in components</span></p>
<p><span class="koboSpan" id="kobo.587.1" xmlns="http://www.w3.org/1999/xhtml">To find detailed information about built-in input components, you can check the following </span><span class="No-Break"><span class="koboSpan" id="kobo.588.1" xmlns="http://www.w3.org/1999/xhtml">Microsoft document:</span></span></p>
<p><a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/forms-and-input-components?view=aspnetcore-6.0"><span class="No-Break"><span class="koboSpan" id="kobo.589.1" xmlns="http://www.w3.org/1999/xhtml">https://learn.microsoft.com/en-us/aspnet/core/blazor/forms-and-input-components?view=aspnetcore-6.0</span></span></a></p>
<p><span class="koboSpan" id="kobo.590.1" xmlns="http://www.w3.org/1999/xhtml">In </span><em class="italic"><span class="koboSpan" id="kobo.591.1" xmlns="http://www.w3.org/1999/xhtml">Table 10.1</span></em><span class="koboSpan" id="kobo.592.1" xmlns="http://www.w3.org/1999/xhtml">, we can see a list of input components and an </span><strong class="source-inline"><span class="koboSpan" id="kobo.593.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.594.1" xmlns="http://www.w3.org/1999/xhtml"> component. </span><span class="koboSpan" id="kobo.594.2" xmlns="http://www.w3.org/1999/xhtml">The built-in input components are enhanced versions of the corresponding HTML elements listed </span><a id="_idIndexMarker771"/><span class="koboSpan" id="kobo.595.1" xmlns="http://www.w3.org/1999/xhtml">in the right-hand column. </span><span class="koboSpan" id="kobo.595.2" xmlns="http://www.w3.org/1999/xhtml">When we use built-in input components with </span><strong class="source-inline"><span class="koboSpan" id="kobo.596.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.597.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.598.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.599.1" xmlns="http://www.w3.org/1999/xhtml"> can coordinate both validation and submission events. </span><span class="koboSpan" id="kobo.599.2" xmlns="http://www.w3.org/1999/xhtml">The built-in input components can validate user input when a form </span><span class="No-Break"><span class="koboSpan" id="kobo.600.1" xmlns="http://www.w3.org/1999/xhtml">is submitted.</span></span></p>
<h2 id="_idParaDest-205"><a id="_idTextAnchor221"/><span class="koboSpan" id="kobo.601.1" xmlns="http://www.w3.org/1999/xhtml">Using the EditForm component</span></h2>
<p><span class="koboSpan" id="kobo.602.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.603.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.604.1" xmlns="http://www.w3.org/1999/xhtml"> component </span><a id="_idIndexMarker772"/><span class="koboSpan" id="kobo.605.1" xmlns="http://www.w3.org/1999/xhtml">is an</span><a id="_idIndexMarker773"/><span class="koboSpan" id="kobo.606.1" xmlns="http://www.w3.org/1999/xhtml"> enhanced version of the HTML </span><strong class="source-inline"><span class="koboSpan" id="kobo.607.1" xmlns="http://www.w3.org/1999/xhtml">&lt;form&gt;</span></strong><span class="koboSpan" id="kobo.608.1" xmlns="http://www.w3.org/1999/xhtml"> element. </span><span class="koboSpan" id="kobo.608.2" xmlns="http://www.w3.org/1999/xhtml">To use </span><strong class="source-inline"><span class="koboSpan" id="kobo.609.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.610.1" xmlns="http://www.w3.org/1999/xhtml">, we can refer to the following code, which shows an empty </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.611.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.612.1" xmlns="http://www.w3.org/1999/xhtml"> component:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.613.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;EditForm </span><strong class="bold"><span class="koboSpan" id="kobo.614.1" xmlns="http://www.w3.org/1999/xhtml">Model="ModelData"</span></strong><span class="koboSpan" id="kobo.615.1" xmlns="http://www.w3.org/1999/xhtml"> OnSubmit="HandleSubmit"
  OnInValidSubmit="HandleInValidSubmit"
  OnValidSubmit="HandleValidSubmit"&gt;
&lt;/EditForm&gt;</span></pre>
<p><span class="koboSpan" id="kobo.616.1" xmlns="http://www.w3.org/1999/xhtml">Or, it can be used in </span><span class="No-Break"><span class="koboSpan" id="kobo.617.1" xmlns="http://www.w3.org/1999/xhtml">another way:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.618.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;EditForm </span><strong class="bold"><span class="koboSpan" id="kobo.619.1" xmlns="http://www.w3.org/1999/xhtml">EditContext="_editContext"</span></strong><span class="koboSpan" id="kobo.620.1" xmlns="http://www.w3.org/1999/xhtml"> OnSubmit="HandleSubmit"
  OnInValidSubmit="HandleInValidSubmit"
  OnValidSubmit="HandleValidSubmit"&gt;
&lt;/EditForm&gt;</span></pre>
<p><span class="koboSpan" id="kobo.621.1" xmlns="http://www.w3.org/1999/xhtml">We can pass data to it using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.622.1" xmlns="http://www.w3.org/1999/xhtml">Model</span></strong><span class="koboSpan" id="kobo.623.1" xmlns="http://www.w3.org/1999/xhtml"> parameter </span><span class="No-Break"><span class="koboSpan" id="kobo.624.1" xmlns="http://www.w3.org/1999/xhtml">or </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.625.1" xmlns="http://www.w3.org/1999/xhtml">EditContext</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.626.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
<p><span class="koboSpan" id="kobo.627.1" xmlns="http://www.w3.org/1999/xhtml">We can specify an instance </span><a id="_idIndexMarker774"/><span class="koboSpan" id="kobo.628.1" xmlns="http://www.w3.org/1999/xhtml">of a class as </span><strong class="source-inline"><span class="koboSpan" id="kobo.629.1" xmlns="http://www.w3.org/1999/xhtml">Model</span></strong><span class="koboSpan" id="kobo.630.1" xmlns="http://www.w3.org/1999/xhtml"> to be edited in </span><strong class="source-inline"><span class="koboSpan" id="kobo.631.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.632.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.632.2" xmlns="http://www.w3.org/1999/xhtml">An instance of </span><strong class="source-inline"><span class="koboSpan" id="kobo.633.1" xmlns="http://www.w3.org/1999/xhtml">EditContext</span></strong><span class="koboSpan" id="kobo.634.1" xmlns="http://www.w3.org/1999/xhtml"> will be created based on the assigned model instance by </span><strong class="source-inline"><span class="koboSpan" id="kobo.635.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.636.1" xmlns="http://www.w3.org/1999/xhtml">. </span><strong class="source-inline"><span class="koboSpan" id="kobo.637.1" xmlns="http://www.w3.org/1999/xhtml">EditContext</span></strong><span class="koboSpan" id="kobo.638.1" xmlns="http://www.w3.org/1999/xhtml"> is used as a cascading value for other components in the form. </span><span class="koboSpan" id="kobo.638.2" xmlns="http://www.w3.org/1999/xhtml">We can also specify an </span><strong class="source-inline"><span class="koboSpan" id="kobo.639.1" xmlns="http://www.w3.org/1999/xhtml">EditContext</span></strong><span class="koboSpan" id="kobo.640.1" xmlns="http://www.w3.org/1999/xhtml"> instance directly if we want to take control </span><span class="No-Break"><span class="koboSpan" id="kobo.641.1" xmlns="http://www.w3.org/1999/xhtml">of it.</span></span></p>
<p><span class="koboSpan" id="kobo.642.1" xmlns="http://www.w3.org/1999/xhtml">To handle the result of form editing, we can register the following </span><span class="No-Break"><span class="koboSpan" id="kobo.643.1" xmlns="http://www.w3.org/1999/xhtml">callback functions:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.644.1" xmlns="http://www.w3.org/1999/xhtml">OnInvalidSubmit</span></strong><span class="koboSpan" id="kobo.645.1" xmlns="http://www.w3.org/1999/xhtml"> – This callback will be invoked when the form is submitted and </span><strong class="source-inline"><span class="koboSpan" id="kobo.646.1" xmlns="http://www.w3.org/1999/xhtml">EditContext</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.647.1" xmlns="http://www.w3.org/1999/xhtml">is invalid</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.648.1" xmlns="http://www.w3.org/1999/xhtml">OnSubmit</span></strong><span class="koboSpan" id="kobo.649.1" xmlns="http://www.w3.org/1999/xhtml"> – This callback will be invoked when the form </span><span class="No-Break"><span class="koboSpan" id="kobo.650.1" xmlns="http://www.w3.org/1999/xhtml">is submitted</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.651.1" xmlns="http://www.w3.org/1999/xhtml">OnValidSubmit</span></strong><span class="koboSpan" id="kobo.652.1" xmlns="http://www.w3.org/1999/xhtml"> – This callback will be invoked when the form is submitted and </span><strong class="source-inline"><span class="koboSpan" id="kobo.653.1" xmlns="http://www.w3.org/1999/xhtml">EditContext</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.654.1" xmlns="http://www.w3.org/1999/xhtml">is valid</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.655.1" xmlns="http://www.w3.org/1999/xhtml">We will use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.656.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.657.1" xmlns="http://www.w3.org/1999/xhtml"> component and built-in input components to create a new </span><strong class="source-inline"><span class="koboSpan" id="kobo.658.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog</span></strong><span class="koboSpan" id="kobo.659.1" xmlns="http://www.w3.org/1999/xhtml"> component to enhance our key value editor with data </span><span class="No-Break"><span class="koboSpan" id="kobo.660.1" xmlns="http://www.w3.org/1999/xhtml">validation support.</span></span></p>
<h2 id="_idParaDest-206"><a id="_idTextAnchor222"/><span class="koboSpan" id="kobo.661.1" xmlns="http://www.w3.org/1999/xhtml">Creating an EditFormDialog component</span></h2>
<p><span class="koboSpan" id="kobo.662.1" xmlns="http://www.w3.org/1999/xhtml">To support</span><a id="_idIndexMarker775"/><span class="koboSpan" id="kobo.663.1" xmlns="http://www.w3.org/1999/xhtml"> data </span><a id="_idIndexMarker776"/><span class="koboSpan" id="kobo.664.1" xmlns="http://www.w3.org/1999/xhtml">validation, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.665.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.666.1" xmlns="http://www.w3.org/1999/xhtml"> component needs to be bound to a model that uses data annotations. </span><span class="koboSpan" id="kobo.666.2" xmlns="http://www.w3.org/1999/xhtml">The built-in input components should be used for the form editing so that enhanced features such as data validation can </span><span class="No-Break"><span class="koboSpan" id="kobo.667.1" xmlns="http://www.w3.org/1999/xhtml">be used.</span></span></p>
<p><span class="koboSpan" id="kobo.668.1" xmlns="http://www.w3.org/1999/xhtml">First, we need to create a model class, </span><strong class="source-inline"><span class="koboSpan" id="kobo.669.1" xmlns="http://www.w3.org/1999/xhtml">KeyValueData</span></strong><span class="koboSpan" id="kobo.670.1" xmlns="http://www.w3.org/1999/xhtml">, that can be used for key-value editing in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.671.1" xmlns="http://www.w3.org/1999/xhtml">PassXYZ.BlazorUI</span></strong><span class="koboSpan" id="kobo.672.1" xmlns="http://www.w3.org/1999/xhtml"> project, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.673.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.9</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.674.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.675.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.9: KeyValueData.cs (https://epa.ms/KeyValueData10-9)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.676.1" xmlns="http://www.w3.org/1999/xhtml">
using System.ComponentModel.DataAnnotations;              ❸
using KPCLib;
using PassXYZLib;
namespace PassXYZ.BlazorUI;
public class KeyValueData&lt;T&gt; : IKeyValue {
  [Required(ErrorMessage = "{0} cannot be empty.")]
  [Display(Name = "This field")]
  public string Key {                                     ❶
    get {
      if (Data is Item item) { return item.Name; }
      if (Data is Field field) { return field.Key; }
      return string.Empty;
    }
    set {
      if (Data is Item item) { item.Name = value;
        IsChanged = true; }
      if (Data is Field field) { field.Key = value;
        IsChanged = true; }
    }
  }
  [Required(ErrorMessage = "{0} cannot be empty.")]
  [Display(Name = "This field")]
  public string Value {                                   ❷
    get {
      if (Data is Item item) { return item.Notes; }
      if (Data is Field field) { return field.EditValue; }
      return string.Empty;
    }
    set {
      if (Data is Item item) { item.Notes = value;
        IsChanged = true; }
      if (Data is Field field) { field.EditValue = value;
        IsChanged = true; }
    }
  }
  public bool IsChanged { get; set; } = false;
  public bool IsValid {
    get {
      return !(string.IsNullOrEmpty(Key) ||
        string.IsNullOrEmpty(Value));
    }
  }
  public T? </span><span class="koboSpan" id="kobo.676.2" xmlns="http://www.w3.org/1999/xhtml">Data { get; set; }                            ❹
  public KeyValueData() {
    if (Data is Item item) { item = new NewItem(); }
    if (Data is Field field) { field = new NewField(); }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.677.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.678.1" xmlns="http://www.w3.org/1999/xhtml">KeyValueData&lt;T&gt;</span></strong><span class="koboSpan" id="kobo.679.1" xmlns="http://www.w3.org/1999/xhtml"> class is used to create the model instance for </span><strong class="source-inline"><span class="koboSpan" id="kobo.680.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.681.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.681.2" xmlns="http://www.w3.org/1999/xhtml">It is a generic type and implements an </span><strong class="source-inline"><span class="koboSpan" id="kobo.682.1" xmlns="http://www.w3.org/1999/xhtml">IKeyValue</span></strong><span class="koboSpan" id="kobo.683.1" xmlns="http://www.w3.org/1999/xhtml"> interface, which defines properties that need to be implemented. </span><span class="koboSpan" id="kobo.683.2" xmlns="http://www.w3.org/1999/xhtml">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.684.1" xmlns="http://www.w3.org/1999/xhtml">KeyValueData&lt;T&gt;</span></strong><span class="koboSpan" id="kobo.685.1" xmlns="http://www.w3.org/1999/xhtml"> class, we define the </span><strong class="source-inline"><span class="koboSpan" id="kobo.686.1" xmlns="http://www.w3.org/1999/xhtml">Key</span></strong><span class="koboSpan" id="kobo.687.1" xmlns="http://www.w3.org/1999/xhtml"> ❶ and </span><strong class="source-inline"><span class="koboSpan" id="kobo.688.1" xmlns="http://www.w3.org/1999/xhtml">Value</span></strong><span class="koboSpan" id="kobo.689.1" xmlns="http://www.w3.org/1999/xhtml"> ❷ properties, </span><strong class="source-inline"><span class="koboSpan" id="kobo.690.1" xmlns="http://www.w3.org/1999/xhtml">IsChanged</span></strong><span class="koboSpan" id="kobo.691.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.692.1" xmlns="http://www.w3.org/1999/xhtml">IsValid</span></strong><span class="koboSpan" id="kobo.693.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.694.1" xmlns="http://www.w3.org/1999/xhtml">Data</span></strong><span class="koboSpan" id="kobo.695.1" xmlns="http://www.w3.org/1999/xhtml"> ❹. </span><span class="koboSpan" id="kobo.695.2" xmlns="http://www.w3.org/1999/xhtml">We can see that we mark the </span><strong class="source-inline"><span class="koboSpan" id="kobo.696.1" xmlns="http://www.w3.org/1999/xhtml">Key</span></strong><span class="koboSpan" id="kobo.697.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.698.1" xmlns="http://www.w3.org/1999/xhtml">Value</span></strong><span class="koboSpan" id="kobo.699.1" xmlns="http://www.w3.org/1999/xhtml"> properties with data annotation </span><strong class="source-inline"><span class="koboSpan" id="kobo.700.1" xmlns="http://www.w3.org/1999/xhtml">[Required]</span></strong><span class="koboSpan" id="kobo.701.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.702.1" xmlns="http://www.w3.org/1999/xhtml">[Display]</span></strong><span class="koboSpan" id="kobo.703.1" xmlns="http://www.w3.org/1999/xhtml"> attributes. </span><span class="koboSpan" id="kobo.703.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.704.1" xmlns="http://www.w3.org/1999/xhtml">[Required]</span></strong><span class="koboSpan" id="kobo.705.1" xmlns="http://www.w3.org/1999/xhtml"> attribute indicates the user must enter a value. </span><span class="koboSpan" id="kobo.705.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.706.1" xmlns="http://www.w3.org/1999/xhtml">[Display]</span></strong><span class="koboSpan" id="kobo.707.1" xmlns="http://www.w3.org/1999/xhtml"> attribute defines the name to display for the property in the error message of </span><a id="_idIndexMarker777"/><span class="koboSpan" id="kobo.708.1" xmlns="http://www.w3.org/1999/xhtml">data </span><a id="_idIndexMarker778"/><span class="koboSpan" id="kobo.709.1" xmlns="http://www.w3.org/1999/xhtml">validation, as shown in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.710.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.711.1" xmlns="http://www.w3.org/1999/xhtml">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.712.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
<p><span class="koboSpan" id="kobo.713.1" xmlns="http://www.w3.org/1999/xhtml">Both </span><strong class="source-inline"><span class="koboSpan" id="kobo.714.1" xmlns="http://www.w3.org/1999/xhtml">[Required]</span></strong><span class="koboSpan" id="kobo.715.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><strong class="source-inline"><span class="koboSpan" id="kobo.716.1" xmlns="http://www.w3.org/1999/xhtml">[Display]</span></strong><span class="koboSpan" id="kobo.717.1" xmlns="http://www.w3.org/1999/xhtml"> are defined in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.718.1" xmlns="http://www.w3.org/1999/xhtml">System.ComponentModel.DataAnnotations</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.719.1" xmlns="http://www.w3.org/1999/xhtml">namespace </span></span><span class="No-Break"><span class="koboSpan" id="kobo.720.1" xmlns="http://www.w3.org/1999/xhtml">❸</span></span><span class="No-Break"><span class="koboSpan" id="kobo.721.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
<p><span class="koboSpan" id="kobo.722.1" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.723.1" xmlns="http://www.w3.org/1999/xhtml">KeyValueData&lt;T&gt;</span></strong><span class="koboSpan" id="kobo.724.1" xmlns="http://www.w3.org/1999/xhtml"> class is a generic class and takes a </span><strong class="source-inline"><span class="koboSpan" id="kobo.725.1" xmlns="http://www.w3.org/1999/xhtml">T</span></strong><span class="koboSpan" id="kobo.726.1" xmlns="http://www.w3.org/1999/xhtml"> type parameter to specify the actual data type for editing. </span><span class="koboSpan" id="kobo.726.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.727.1" xmlns="http://www.w3.org/1999/xhtml">Data</span></strong><span class="koboSpan" id="kobo.728.1" xmlns="http://www.w3.org/1999/xhtml"> property ❹ is defined as the </span><strong class="source-inline"><span class="koboSpan" id="kobo.729.1" xmlns="http://www.w3.org/1999/xhtml">T</span></strong><span class="koboSpan" id="kobo.730.1" xmlns="http://www.w3.org/1999/xhtml"> type. </span><span class="koboSpan" id="kobo.730.2" xmlns="http://www.w3.org/1999/xhtml">We can pass either the </span><strong class="source-inline"><span class="koboSpan" id="kobo.731.1" xmlns="http://www.w3.org/1999/xhtml">Item</span></strong><span class="koboSpan" id="kobo.732.1" xmlns="http://www.w3.org/1999/xhtml"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.733.1" xmlns="http://www.w3.org/1999/xhtml">Field</span></strong><span class="koboSpan" id="kobo.734.1" xmlns="http://www.w3.org/1999/xhtml"> class as a type parameter to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.735.1" xmlns="http://www.w3.org/1999/xhtml">Data</span></strong><span class="koboSpan" id="kobo.736.1" xmlns="http://www.w3.org/1999/xhtml"> property. </span><span class="koboSpan" id="kobo.736.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.737.1" xmlns="http://www.w3.org/1999/xhtml">Key</span></strong><span class="koboSpan" id="kobo.738.1" xmlns="http://www.w3.org/1999/xhtml"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.739.1" xmlns="http://www.w3.org/1999/xhtml">Value</span></strong><span class="koboSpan" id="kobo.740.1" xmlns="http://www.w3.org/1999/xhtml"> property is bound to the property of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.741.1" xmlns="http://www.w3.org/1999/xhtml">Item</span></strong><span class="koboSpan" id="kobo.742.1" xmlns="http://www.w3.org/1999/xhtml"> or </span><strong class="source-inline"><span class="koboSpan" id="kobo.743.1" xmlns="http://www.w3.org/1999/xhtml">Field</span></strong><span class="koboSpan" id="kobo.744.1" xmlns="http://www.w3.org/1999/xhtml"> instance stored in the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.745.1" xmlns="http://www.w3.org/1999/xhtml">Data</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.746.1" xmlns="http://www.w3.org/1999/xhtml"> property.</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer109">
<span class="koboSpan" id="kobo.747.1" xmlns="http://www.w3.org/1999/xhtml"><img alt="Figure 10.3: EditFormDialog (adding a new item)" src="image/Figure_10.3_B16588.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.748.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10.3: EditFormDialog (adding a new item)</span></p>
<p><span class="koboSpan" id="kobo.749.1" xmlns="http://www.w3.org/1999/xhtml">We can</span><a id="_idIndexMarker779"/><span class="koboSpan" id="kobo.750.1" xmlns="http://www.w3.org/1999/xhtml"> see </span><a id="_idIndexMarker780"/><span class="koboSpan" id="kobo.751.1" xmlns="http://www.w3.org/1999/xhtml">in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.752.1" xmlns="http://www.w3.org/1999/xhtml">Figure 10</span></em></span><em class="italic"><span class="koboSpan" id="kobo.753.1" xmlns="http://www.w3.org/1999/xhtml">.3</span></em><span class="koboSpan" id="kobo.754.1" xmlns="http://www.w3.org/1999/xhtml"> that the error messages will be displayed when users submit the form with an empty value in either the key or value field. </span><span class="koboSpan" id="kobo.754.2" xmlns="http://www.w3.org/1999/xhtml">To enable data validation, we also need to add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.755.1" xmlns="http://www.w3.org/1999/xhtml">&lt;DataAnnotationsValidator/&gt;</span></strong><span class="koboSpan" id="kobo.756.1" xmlns="http://www.w3.org/1999/xhtml"> component to </span><strong class="source-inline"><span class="koboSpan" id="kobo.757.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.758.1" xmlns="http://www.w3.org/1999/xhtml">, as </span><span class="No-Break"><span class="koboSpan" id="kobo.759.1" xmlns="http://www.w3.org/1999/xhtml">shown here:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.760.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;EditForm class="row gx-2 gy-3" Model="@ModelData"
  OnValidSubmit="@HandleValidSubmit"&gt;
  &lt;DataAnnotationsValidator /&gt;
  ...
</span><span class="koboSpan" id="kobo.760.2" xmlns="http://www.w3.org/1999/xhtml">&lt;/EditForm&gt;</span></pre>
<p><span class="koboSpan" id="kobo.761.1" xmlns="http://www.w3.org/1999/xhtml">Using </span><strong class="source-inline"><span class="koboSpan" id="kobo.762.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.763.1" xmlns="http://www.w3.org/1999/xhtml">, it is quite easy to support data validation. </span><span class="koboSpan" id="kobo.763.2" xmlns="http://www.w3.org/1999/xhtml">To enable data validation using </span><strong class="source-inline"><span class="koboSpan" id="kobo.764.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.765.1" xmlns="http://www.w3.org/1999/xhtml">, follow </span><span class="No-Break"><span class="koboSpan" id="kobo.766.1" xmlns="http://www.w3.org/1999/xhtml">these steps:</span></span></p>
<ol>
<li><span class="koboSpan" id="kobo.767.1" xmlns="http://www.w3.org/1999/xhtml">Bind </span><strong class="source-inline"><span class="koboSpan" id="kobo.768.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.769.1" xmlns="http://www.w3.org/1999/xhtml"> to a model that uses data </span><span class="No-Break"><span class="koboSpan" id="kobo.770.1" xmlns="http://www.w3.org/1999/xhtml">annotations attributes.</span></span></li>
<li><span class="koboSpan" id="kobo.771.1" xmlns="http://www.w3.org/1999/xhtml">Add the </span><strong class="source-inline"><span class="koboSpan" id="kobo.772.1" xmlns="http://www.w3.org/1999/xhtml">&lt;DataAnnotationsValidator/&gt;</span></strong><span class="koboSpan" id="kobo.773.1" xmlns="http://www.w3.org/1999/xhtml"> component </span><span class="No-Break"><span class="koboSpan" id="kobo.774.1" xmlns="http://www.w3.org/1999/xhtml">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.775.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.776.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></li>
<li><span class="koboSpan" id="kobo.777.1" xmlns="http://www.w3.org/1999/xhtml">Use built-in input components for </span><span class="No-Break"><span class="koboSpan" id="kobo.778.1" xmlns="http://www.w3.org/1999/xhtml">the editing</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.779.1" xmlns="http://www.w3.org/1999/xhtml">There is a long list of built-in attribute-defined validations. </span><span class="koboSpan" id="kobo.779.2" xmlns="http://www.w3.org/1999/xhtml">You can find out more information about them in the Microsoft documentation in the </span><em class="italic"><span class="koboSpan" id="kobo.780.1" xmlns="http://www.w3.org/1999/xhtml">Further reading</span></em><span class="koboSpan" id="kobo.781.1" xmlns="http://www.w3.org/1999/xhtml"> section. </span><span class="koboSpan" id="kobo.781.2" xmlns="http://www.w3.org/1999/xhtml">Some </span><a id="_idIndexMarker781"/><span class="koboSpan" id="kobo.782.1" xmlns="http://www.w3.org/1999/xhtml">of them </span><a id="_idIndexMarker782"/><span class="koboSpan" id="kobo.783.1" xmlns="http://www.w3.org/1999/xhtml">are </span><span class="No-Break"><span class="koboSpan" id="kobo.784.1" xmlns="http://www.w3.org/1999/xhtml">listed here:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.785.1" xmlns="http://www.w3.org/1999/xhtml">[ValidateNever]</span></strong><span class="koboSpan" id="kobo.786.1" xmlns="http://www.w3.org/1999/xhtml">: Indicates that a property or parameter should be excluded </span><span class="No-Break"><span class="koboSpan" id="kobo.787.1" xmlns="http://www.w3.org/1999/xhtml">from validation</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.788.1" xmlns="http://www.w3.org/1999/xhtml">[Compare]</span></strong><span class="koboSpan" id="kobo.789.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that two properties in a </span><span class="No-Break"><span class="koboSpan" id="kobo.790.1" xmlns="http://www.w3.org/1999/xhtml">model match</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.791.1" xmlns="http://www.w3.org/1999/xhtml">[EmailAddress]</span></strong><span class="koboSpan" id="kobo.792.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that the property has an </span><span class="No-Break"><span class="koboSpan" id="kobo.793.1" xmlns="http://www.w3.org/1999/xhtml">email format</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.794.1" xmlns="http://www.w3.org/1999/xhtml">[Phone]</span></strong><span class="koboSpan" id="kobo.795.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that the property has a telephone </span><span class="No-Break"><span class="koboSpan" id="kobo.796.1" xmlns="http://www.w3.org/1999/xhtml">number format</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.797.1" xmlns="http://www.w3.org/1999/xhtml">[Range]</span></strong><span class="koboSpan" id="kobo.798.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that the property value falls within a </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1" xmlns="http://www.w3.org/1999/xhtml">specified range</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.800.1" xmlns="http://www.w3.org/1999/xhtml">[RegularExpression]</span></strong><span class="koboSpan" id="kobo.801.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that the property value matches a specified </span><span class="No-Break"><span class="koboSpan" id="kobo.802.1" xmlns="http://www.w3.org/1999/xhtml">regular expression</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.803.1" xmlns="http://www.w3.org/1999/xhtml">[Required]</span></strong><span class="koboSpan" id="kobo.804.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that the field </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1" xmlns="http://www.w3.org/1999/xhtml">isn’t null</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.806.1" xmlns="http://www.w3.org/1999/xhtml">[StringLength]</span></strong><span class="koboSpan" id="kobo.807.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that a string property value doesn’t exceed a specified </span><span class="No-Break"><span class="koboSpan" id="kobo.808.1" xmlns="http://www.w3.org/1999/xhtml">length limit</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.809.1" xmlns="http://www.w3.org/1999/xhtml">[Url]</span></strong><span class="koboSpan" id="kobo.810.1" xmlns="http://www.w3.org/1999/xhtml">: Validates that the property has a </span><span class="No-Break"><span class="koboSpan" id="kobo.811.1" xmlns="http://www.w3.org/1999/xhtml">URL format</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.812.1" xmlns="http://www.w3.org/1999/xhtml">With the introduction of built-in components, we can create a new Razor component, </span><strong class="source-inline"><span class="koboSpan" id="kobo.813.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog</span></strong><span class="koboSpan" id="kobo.814.1" xmlns="http://www.w3.org/1999/xhtml">, in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.815.1" xmlns="http://www.w3.org/1999/xhtml">PassXYZ.BlazorUI</span></strong><span class="koboSpan" id="kobo.816.1" xmlns="http://www.w3.org/1999/xhtml"> project. </span><span class="koboSpan" id="kobo.816.2" xmlns="http://www.w3.org/1999/xhtml">The implementation of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.817.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.818.1" xmlns="http://www.w3.org/1999/xhtml"> component can be found in </span><em class="italic"><span class="koboSpan" id="kobo.819.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.10</span></em><span class="koboSpan" id="kobo.820.1" xmlns="http://www.w3.org/1999/xhtml"> and </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.821.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.11</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.822.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.823.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.10: EditFormDialog.razor (https://epa.ms/EditFormDialog10-10)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.824.1" xmlns="http://www.w3.org/1999/xhtml">
@namespace PassXYZ.BlazorUI
@typeparam TItem
&lt;div class="modal fade" id=@Id tabindex="-1"
  aria-labelledby="ModelLabel" aria-hidden="true"&gt;
  &lt;div class="modal-dialog"&gt;
    &lt;div class="modal-content"&gt;
      &lt;div class="modal-header"&gt;
        &lt;h5 class="modal-title" id="ModelLabel"&gt;
          @ModelData.Key&lt;/h5&gt;
        &lt;button type="button" class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"&gt;&lt;/button&gt;
      &lt;/div&gt;
      &lt;div class="modal-body"&gt;
        &lt;EditForm class="row gx-2 gy-3" Model="@ModelData" ❶
          OnValidSubmit="@HandleValidSubmit"&gt;
          &lt;DataAnnotationsValidator /&gt;                     ❷
          @if (IsKeyEditingEnable) {
            &lt;div class="form-group"&gt;
              &lt;InputText id="Name" class="form-control"    ❸
                @oninput="KeyHandler"
                placeholder=@KeyPlaceHolder
                @bind-Value="ModelData.Key" /&gt;
              &lt;ValidationMessage For="()=&gt;ModelData.Key"/&gt; ❺
            &lt;/div&gt;
          }
          @ChildContent
          &lt;div class="form-group"&gt;
            &lt;InputTextArea id="Value" class="form-control" ❹
              @oninput="KeyHandler"
              placeholder=@ValuePlaceHolder
              @bind-Value="ModelData.Value" /&gt;
            &lt;ValidationMessage For="()=&gt;ModelData.Value"/&gt; ❺
          &lt;/div&gt;
          &lt;div class="col-12"&gt;
            &lt;button type="button" class="btn btn-secondary"
              data-bs-dismiss="modal"
              @onclick="OnClickClose"&gt;
              @CloseButtonText
            &lt;/button&gt;
            &lt;button type="submit" class="btn btn-primary"
              data-bs-dismiss="@dataDismiss"
              @onclick="OnClickSave"&gt;
              @SaveButtonText
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/EditForm&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</span></pre>
<p><span class="koboSpan" id="kobo.825.1" xmlns="http://www.w3.org/1999/xhtml">As we can see in </span><a id="_idIndexMarker783"/><span class="koboSpan" id="kobo.826.1" xmlns="http://www.w3.org/1999/xhtml">the Razor </span><a id="_idIndexMarker784"/><span class="koboSpan" id="kobo.827.1" xmlns="http://www.w3.org/1999/xhtml">markup in </span><em class="italic"><span class="koboSpan" id="kobo.828.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.10</span></em><span class="koboSpan" id="kobo.829.1" xmlns="http://www.w3.org/1999/xhtml">, we build the </span><strong class="source-inline"><span class="koboSpan" id="kobo.830.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.831.1" xmlns="http://www.w3.org/1999/xhtml"> component using Bootstrap’s </span><strong class="source-inline"><span class="koboSpan" id="kobo.832.1" xmlns="http://www.w3.org/1999/xhtml">Modal</span></strong><span class="koboSpan" id="kobo.833.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.833.2" xmlns="http://www.w3.org/1999/xhtml">It includes the </span><strong class="source-inline"><span class="koboSpan" id="kobo.834.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.835.1" xmlns="http://www.w3.org/1999/xhtml"> ❶ component in the modal body. </span><span class="koboSpan" id="kobo.835.2" xmlns="http://www.w3.org/1999/xhtml">The model bound to </span><strong class="source-inline"><span class="koboSpan" id="kobo.836.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.837.1" xmlns="http://www.w3.org/1999/xhtml"> is </span><strong class="source-inline"><span class="koboSpan" id="kobo.838.1" xmlns="http://www.w3.org/1999/xhtml">ModelData</span></strong><span class="koboSpan" id="kobo.839.1" xmlns="http://www.w3.org/1999/xhtml"> of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.840.1" xmlns="http://www.w3.org/1999/xhtml">KeyValueData&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.841.1" xmlns="http://www.w3.org/1999/xhtml"> type defined in </span><em class="italic"><span class="koboSpan" id="kobo.842.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.11</span></em><span class="koboSpan" id="kobo.843.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.843.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.844.1" xmlns="http://www.w3.org/1999/xhtml">DataAnnotationsValidator</span></strong><span class="koboSpan" id="kobo.845.1" xmlns="http://www.w3.org/1999/xhtml"> component ❷ is defined for the </span><span class="No-Break"><span class="koboSpan" id="kobo.846.1" xmlns="http://www.w3.org/1999/xhtml">data validation.</span></span></p>
<p><span class="koboSpan" id="kobo.847.1" xmlns="http://www.w3.org/1999/xhtml">We use </span><strong class="source-inline"><span class="koboSpan" id="kobo.848.1" xmlns="http://www.w3.org/1999/xhtml">InputText</span></strong><span class="koboSpan" id="kobo.849.1" xmlns="http://www.w3.org/1999/xhtml"> ❸ for key editing and </span><strong class="source-inline"><span class="koboSpan" id="kobo.850.1" xmlns="http://www.w3.org/1999/xhtml">InputTextArea</span></strong><span class="koboSpan" id="kobo.851.1" xmlns="http://www.w3.org/1999/xhtml"> ❹ for value editing. </span><span class="koboSpan" id="kobo.851.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.852.1" xmlns="http://www.w3.org/1999/xhtml">ValidationMessage</span></strong><span class="koboSpan" id="kobo.853.1" xmlns="http://www.w3.org/1999/xhtml"> validation component ❺ is used to define the error message for validation. </span><span class="koboSpan" id="kobo.853.2" xmlns="http://www.w3.org/1999/xhtml">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.854.1" xmlns="http://www.w3.org/1999/xhtml">ValidationMessage</span></strong><span class="koboSpan" id="kobo.855.1" xmlns="http://www.w3.org/1999/xhtml">, we need to specify the field using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.856.1" xmlns="http://www.w3.org/1999/xhtml">For</span></strong><span class="koboSpan" id="kobo.857.1" xmlns="http://www.w3.org/1999/xhtml"> property </span><span class="No-Break"><span class="koboSpan" id="kobo.858.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.859.1" xmlns="http://www.w3.org/1999/xhtml">
&lt;ValidationMessage For="() =&gt; ModelData.Key" /&gt;</span></pre>
<p><span class="koboSpan" id="kobo.860.1" xmlns="http://www.w3.org/1999/xhtml">The format of the error message is defined using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.861.1" xmlns="http://www.w3.org/1999/xhtml">ErrorMessage</span></strong><span class="koboSpan" id="kobo.862.1" xmlns="http://www.w3.org/1999/xhtml"> property of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.863.1" xmlns="http://www.w3.org/1999/xhtml">[Required]</span></strong><span class="koboSpan" id="kobo.864.1" xmlns="http://www.w3.org/1999/xhtml"> attribute </span><span class="No-Break"><span class="koboSpan" id="kobo.865.1" xmlns="http://www.w3.org/1999/xhtml">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.866.1" xmlns="http://www.w3.org/1999/xhtml">
    [Required(ErrorMessage = "{0} cannot be empty.")]
    [Display(Name = "This field")]
    public string Value { ... </span><span class="koboSpan" id="kobo.866.2" xmlns="http://www.w3.org/1999/xhtml">}</span></pre>
<p><span class="koboSpan" id="kobo.867.1" xmlns="http://www.w3.org/1999/xhtml">As we can</span><a id="_idIndexMarker785"/><span class="koboSpan" id="kobo.868.1" xmlns="http://www.w3.org/1999/xhtml"> see in </span><em class="italic"><span class="koboSpan" id="kobo.869.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.11</span></em><span class="koboSpan" id="kobo.870.1" xmlns="http://www.w3.org/1999/xhtml">, component parameters and callback functions for the event handling are defined </span><span class="No-Break"><span class="koboSpan" id="kobo.871.1" xmlns="http://www.w3.org/1999/xhtml">in </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.872.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog.razor.cs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.873.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.874.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.11: EditFormDialog.razor.cs (https://epa.ms/EditFormDialog10-11)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.875.1" xmlns="http://www.w3.org/1999/xhtml">
namespace PassXYZ.BlazorUI;
public partial class EditFormDialog&lt;TItem&gt; {
  [Parameter]
  public string Id { get; set; } = default!;
  [Parameter]
  public RenderFragment ChildContent { get; set; }
  [Parameter]
  public Action? </span><span class="koboSpan" id="kobo.875.2" xmlns="http://www.w3.org/1999/xhtml">OnClose { get; set; }
  [Parameter]
  public Func&lt;string, string, Task&lt;bool&gt;&gt;? </span><span class="koboSpan" id="kobo.875.3" xmlns="http://www.w3.org/1999/xhtml">OnSaveAsync {
    get; set; }
  [Parameter]
  [NotNull]
  public string CloseButtonText { get; set; } = "Cancel";
  [Parameter]
  [NotNull]
  public string SaveButtonText { get; set; } = "Save";
  [Parameter]
  public KeyValueData&lt;TItem&gt; ModelData { get; set; }
  [Parameter]
  public string? </span><span class="koboSpan" id="kobo.875.4" xmlns="http://www.w3.org/1999/xhtml">KeyPlaceHolder { get; set; }
  [Parameter]
  public string? </span><span class="koboSpan" id="kobo.875.5" xmlns="http://www.w3.org/1999/xhtml">ValuePlaceHolder { get; set; }
  bool _isKeyEditingEnable = false;
  [Parameter]
  public bool IsKeyEditingEnable ...
</span><span class="koboSpan" id="kobo.875.6" xmlns="http://www.w3.org/1999/xhtml">  [Parameter]
  public EventCallback&lt;bool&gt;?
</span><span class="koboSpan" id="kobo.875.7" xmlns="http://www.w3.org/1999/xhtml">    IsKeyEditingEnableChanged{get; set;}
  private string dataDismiss = string.Empty;
  public EditFormDialog() {
    ModelData = new();
  }
  private void OnClickClose() {
    OnClose?.Invoke();
  }
  private void OnClickSave() {
      SetSaveButtonText();
  }
  private async Task HandleValidSubmit() {
    if (OnSaveAsync != null &amp;&amp; ModelData.IsChanged) {
        await OnSaveAsync(ModelData.Key, ModelData.Value);
        ModelData.IsChanged = false;
    }
  }
  private void KeyHandler() {
      SetSaveButtonText(true);
  }
  private void SetSaveButtonText(bool changed = false) {
    if (ModelData == null) return;
    if (!ModelData.IsValid || changed) {
        dataDismiss = string.Empty;
        SaveButtonText = "Save";
    }
    else {
        dataDismiss = "modal";
        SaveButtonText = "Close";
    }
  }
}</span></pre>
<p><span class="koboSpan" id="kobo.876.1" xmlns="http://www.w3.org/1999/xhtml">We can refer</span><a id="_idIndexMarker786"/><span class="koboSpan" id="kobo.877.1" xmlns="http://www.w3.org/1999/xhtml"> to the</span><a id="_idIndexMarker787"/><span class="koboSpan" id="kobo.878.1" xmlns="http://www.w3.org/1999/xhtml"> component parameters of </span><strong class="source-inline"><span class="koboSpan" id="kobo.879.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.880.1" xmlns="http://www.w3.org/1999/xhtml"> in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.881.1" xmlns="http://www.w3.org/1999/xhtml">Table 10.2</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.882.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<table class="No-Table-Style _idGenTablePara-1" id="table002-4">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.883.1" xmlns="http://www.w3.org/1999/xhtml">Parameter</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.884.1" xmlns="http://www.w3.org/1999/xhtml">Description</span></strong></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.885.1" xmlns="http://www.w3.org/1999/xhtml">Id</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.886.1" xmlns="http://www.w3.org/1999/xhtml">The ID of the dialog. </span><span class="koboSpan" id="kobo.886.2" xmlns="http://www.w3.org/1999/xhtml">This is used </span><span class="No-Break"><span class="koboSpan" id="kobo.887.1" xmlns="http://www.w3.org/1999/xhtml">by Bootstrap.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.888.1" xmlns="http://www.w3.org/1999/xhtml">ChildContent</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.889.1" xmlns="http://www.w3.org/1999/xhtml">Child content </span><span class="No-Break"><span class="koboSpan" id="kobo.890.1" xmlns="http://www.w3.org/1999/xhtml">render fragments.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.891.1" xmlns="http://www.w3.org/1999/xhtml">OnClose</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.892.1" xmlns="http://www.w3.org/1999/xhtml">Callback for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.893.1" xmlns="http://www.w3.org/1999/xhtml">Close</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.894.1" xmlns="http://www.w3.org/1999/xhtml"> button.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.895.1" xmlns="http://www.w3.org/1999/xhtml">OnSaveAsync</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.896.1" xmlns="http://www.w3.org/1999/xhtml">Callback for the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.897.1" xmlns="http://www.w3.org/1999/xhtml">Save</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.898.1" xmlns="http://www.w3.org/1999/xhtml"> button.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.899.1" xmlns="http://www.w3.org/1999/xhtml">CloseButtonText</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.900.1" xmlns="http://www.w3.org/1999/xhtml">Text of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.901.1" xmlns="http://www.w3.org/1999/xhtml">Close</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.902.1" xmlns="http://www.w3.org/1999/xhtml"> button.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.903.1" xmlns="http://www.w3.org/1999/xhtml">SaveButtonText</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.904.1" xmlns="http://www.w3.org/1999/xhtml">Text of the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.905.1" xmlns="http://www.w3.org/1999/xhtml">Save</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.906.1" xmlns="http://www.w3.org/1999/xhtml"> button.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.907.1" xmlns="http://www.w3.org/1999/xhtml">ModelData</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.908.1" xmlns="http://www.w3.org/1999/xhtml">Model data bound </span><span class="No-Break"><span class="koboSpan" id="kobo.909.1" xmlns="http://www.w3.org/1999/xhtml">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.910.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.911.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.912.1" xmlns="http://www.w3.org/1999/xhtml">KeyPlaceHolder</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.913.1" xmlns="http://www.w3.org/1999/xhtml">A </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.914.1" xmlns="http://www.w3.org/1999/xhtml">Key</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.915.1" xmlns="http://www.w3.org/1999/xhtml"> placeholder.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.916.1" xmlns="http://www.w3.org/1999/xhtml">ValuePlaceHolder</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.917.1" xmlns="http://www.w3.org/1999/xhtml">A </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.918.1" xmlns="http://www.w3.org/1999/xhtml">Value</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.919.1" xmlns="http://www.w3.org/1999/xhtml"> placeholder.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.920.1" xmlns="http://www.w3.org/1999/xhtml">IsKeyEditingEnable</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.921.1" xmlns="http://www.w3.org/1999/xhtml">Enable or disable </span><span class="No-Break"><span class="koboSpan" id="kobo.922.1" xmlns="http://www.w3.org/1999/xhtml">key editing.</span></span></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.923.1" xmlns="http://www.w3.org/1999/xhtml">IsKeyEditingEnableChanged</span></strong></span></p>
</td>
<td class="No-Table-Style">
<p><span class="koboSpan" id="kobo.924.1" xmlns="http://www.w3.org/1999/xhtml">Callback for two bindings </span><span class="No-Break"><span class="koboSpan" id="kobo.925.1" xmlns="http://www.w3.org/1999/xhtml">of </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.926.1" xmlns="http://www.w3.org/1999/xhtml">IsKeyEditingEnable</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.927.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.928.1" xmlns="http://www.w3.org/1999/xhtml">Table 10.2: EditFormDialog&lt;TItem&gt; component parameters</span></p>
<p><span class="koboSpan" id="kobo.929.1" xmlns="http://www.w3.org/1999/xhtml">After we have created the </span><strong class="source-inline"><span class="koboSpan" id="kobo.930.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog&lt;TItem&gt;</span></strong><span class="koboSpan" id="kobo.931.1" xmlns="http://www.w3.org/1999/xhtml"> component, we have done all the optimization of our code. </span><span class="koboSpan" id="kobo.931.2" xmlns="http://www.w3.org/1999/xhtml">Let us review the final code of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.932.1" xmlns="http://www.w3.org/1999/xhtml">Items</span></strong><span class="koboSpan" id="kobo.933.1" xmlns="http://www.w3.org/1999/xhtml"> (</span><em class="italic"><span class="koboSpan" id="kobo.934.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.12</span></em><span class="koboSpan" id="kobo.935.1" xmlns="http://www.w3.org/1999/xhtml">) and </span><strong class="source-inline"><span class="koboSpan" id="kobo.936.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail</span></strong><span class="koboSpan" id="kobo.937.1" xmlns="http://www.w3.org/1999/xhtml"> (</span><em class="italic"><span class="koboSpan" id="kobo.938.1" xmlns="http://www.w3.org/1999/xhtml">Listing </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.939.1" xmlns="http://www.w3.org/1999/xhtml">10.13</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.940.1" xmlns="http://www.w3.org/1999/xhtml">) pages:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.941.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.12: Items.razor (https://epa.ms/Items10-12)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.942.1" xmlns="http://www.w3.org/1999/xhtml">
@page "/group"
@page "/group/{SelectedItemId}"
@using System.Diagnostics
@using PassXYZLib
&lt;Navbar ParentLink="@selectedItem?.GetParentLink()"
  Title="@Title"                                          ❶
  DialogId="@_dialogEditId"
  OnAddClick="@(() =&gt;
    {_isNewItem=true;
     currentItem.Data=listGroupItem=_newItem;
     _newItem.Name="";_newItem.Notes="";})" /&gt;
&lt;ListView Items="items"&gt;                                  ❷
  &lt;Row Context="item"&gt;
&lt;img src="@item.GetIcon()" alt="twbs"
  width="32" height="32"
      class="rounded-circle flex-shrink-0 float-start"&gt;
&lt;a href="@item.GetActionLink()"
  class="list-group-item ..."&gt;
      &lt;div class="d-flex"&gt;&lt;div&gt;
          &lt;h6 class="mb-0"&gt;@item.Name&lt;/h6&gt;
          &lt;p class="mb-0 opacity-75"&gt;@item.Description&lt;/p&gt;
      &lt;/div&gt;&lt;/div&gt;
    &lt;/a&gt;
&lt;Dropdown OnClick="@(() =&gt;                                ❸
  currentItem.Data=listGroupItem=item)"&gt;
      &lt;MenuItem Id="@_dialogEditId" OnClick="@(() =&gt;
        _isNewItem=false)"&gt;Edit&lt;/MenuItem&gt;
      &lt;MenuItem Id="@_dialogDeleteId"&gt;Delete&lt;/MenuItem&gt;
    &lt;/Dropdown&gt;
  &lt;/Row&gt;
&lt;/ListView&gt;
&lt;EditFormDialog Id="@_dialogEditId"                       ❹
  ModelData="@currentItem" IsKeyEditingEnable="true"
  OnSaveAsync="UpdateItemAsync" KeyPlaceHolder="Item name"
  ValuePlaceHolder="Pleae provide a description"&gt;
  @if (_isNewItem) {
&lt;InputSelect @bind-Value="_newItem.SubType"
  class="form-select"&gt;
      &lt;option selected value=@ItemSubType.Group&gt;
        @ItemSubType.Group&lt;/option&gt;
      &lt;option value=@ItemSubType.Entry&gt;
        @ItemSubType.Entry&lt;/option&gt;
      &lt;option value=@ItemSubType.PxEntry&gt;
        @ItemSubType.PxEntry&lt;/option&gt;
      &lt;option value=@ItemSubType.Notes&gt;
        @ItemSubType.Notes&lt;/option&gt;
    &lt;/InputSelect&gt;
  }
&lt;/EditFormDialog&gt;
&lt;CascadingValue Value="@_dialogDeleteId" Name="Id"&gt;
&lt;ConfirmDialog Title=@listGroupItem.Name                  ❺
  OnConfirmClick="DeleteItemAsync" /&gt;
&lt;/CascadingValue&gt;</span></pre>
<p><span class="koboSpan" id="kobo.943.1" xmlns="http://www.w3.org/1999/xhtml">In the final code of </span><strong class="source-inline"><span class="koboSpan" id="kobo.944.1" xmlns="http://www.w3.org/1999/xhtml">Items.razor</span></strong><span class="koboSpan" id="kobo.945.1" xmlns="http://www.w3.org/1999/xhtml">, we use </span><strong class="source-inline"><span class="koboSpan" id="kobo.946.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.947.1" xmlns="http://www.w3.org/1999/xhtml"> ❶ to create the navigation bar. </span><span class="koboSpan" id="kobo.947.2" xmlns="http://www.w3.org/1999/xhtml">In the body of the page, we use a </span><strong class="source-inline"><span class="koboSpan" id="kobo.948.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.949.1" xmlns="http://www.w3.org/1999/xhtml"> ❷ component to display the list of items. </span><span class="koboSpan" id="kobo.949.2" xmlns="http://www.w3.org/1999/xhtml">For each item, the UI template is defined in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.950.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.951.1" xmlns="http://www.w3.org/1999/xhtml"> property. </span><span class="koboSpan" id="kobo.951.2" xmlns="http://www.w3.org/1999/xhtml">In the UI template, we display the item name, description, and context menu. </span><span class="koboSpan" id="kobo.951.3" xmlns="http://www.w3.org/1999/xhtml">In the context menu, we use the </span><strong class="source-inline"><span class="koboSpan" id="kobo.952.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.953.1" xmlns="http://www.w3.org/1999/xhtml"> ❸ component to support editing or deleting the item. </span><span class="koboSpan" id="kobo.953.2" xmlns="http://www.w3.org/1999/xhtml">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.954.1" xmlns="http://www.w3.org/1999/xhtml">Add</span></strong><span class="koboSpan" id="kobo.955.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.956.1" xmlns="http://www.w3.org/1999/xhtml">Edit</span></strong><span class="koboSpan" id="kobo.957.1" xmlns="http://www.w3.org/1999/xhtml">, or </span><strong class="source-inline"><span class="koboSpan" id="kobo.958.1" xmlns="http://www.w3.org/1999/xhtml">Delete</span></strong><span class="koboSpan" id="kobo.959.1" xmlns="http://www.w3.org/1999/xhtml"> actions, </span><strong class="source-inline"><span class="koboSpan" id="kobo.960.1" xmlns="http://www.w3.org/1999/xhtml">EditorFormDialog</span></strong><span class="koboSpan" id="kobo.961.1" xmlns="http://www.w3.org/1999/xhtml"> ❹ or </span><strong class="source-inline"><span class="koboSpan" id="kobo.962.1" xmlns="http://www.w3.org/1999/xhtml">ConfirmDialog</span></strong><span class="koboSpan" id="kobo.963.1" xmlns="http://www.w3.org/1999/xhtml"> ❺ is used to perform the </span><a id="_idIndexMarker788"/><span class="No-Break"><span class="koboSpan" id="kobo.964.1" xmlns="http://www.w3.org/1999/xhtml">respective </span></span><span class="No-Break"><a id="_idIndexMarker789"/></span><span class="No-Break"><span class="koboSpan" id="kobo.965.1" xmlns="http://www.w3.org/1999/xhtml">actions.</span></span></p>
<p><span class="koboSpan" id="kobo.966.1" xmlns="http://www.w3.org/1999/xhtml">In </span><strong class="source-inline"><span class="koboSpan" id="kobo.967.1" xmlns="http://www.w3.org/1999/xhtml">ItemDetail.razor</span></strong><span class="koboSpan" id="kobo.968.1" xmlns="http://www.w3.org/1999/xhtml">, the code is similar </span><span class="No-Break"><span class="koboSpan" id="kobo.969.1" xmlns="http://www.w3.org/1999/xhtml">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.970.1" xmlns="http://www.w3.org/1999/xhtml">Items.razor</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.971.1" xmlns="http://www.w3.org/1999/xhtml">:</span></span></p>
<p class="SC---Heading" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.972.1" xmlns="http://www.w3.org/1999/xhtml">Listing 10.13: ItemDetail.razor (https://epa.ms/ ItemDetail10-13)</span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.973.1" xmlns="http://www.w3.org/1999/xhtml">
@page "/entry/{SelectedItemId}"
@namespace PassXYZ.Vault.Pages
&lt;!-- Back button and title --&gt;
&lt;Navbar ParentLink="@selectedItem?.GetParentLink()"       ①
  Title="@selectedItem?.Name" DialogId="@_dialogEditId"
  OnAddClick="@(() =&gt; {_isNewField=true;
  currentField.Data=listGroupField=_newField;_
  newField.Key="";_newField.Value="";})" /&gt;
&lt;!-- List view with context menu --&gt;
&lt;ListView Items="fields"&gt;                                 ②
  &lt;Row Context="field"&gt;                                   ③
    @if (field.ShowContextAction == null) {
      &lt;span class="oi oi-pencil" aria-hidden="true"&gt;&lt;/span&gt;
      &lt;div class="d-flex gap-2 w-100
        justify-content-between"&gt;
        &lt;div&gt;
            &lt;h6 class="mb-0"&gt;@field.Key&lt;/h6&gt;
            &lt;p class="mb-0"&gt;@field.Value&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;Dropdown OnClick="@(() =&gt;
        {currentField.Data=listGroupField=field;})"&gt;
        &lt;MenuItem Id="@_dialogEditId" OnClick="@(() =&gt;
          _isNewField=false)"&gt;Edit&lt;/MenuItem&gt;
        &lt;MenuItem Id="@_dialogDeleteId"&gt;Delete&lt;/MenuItem&gt;
        @if (field.IsProtected) {
          &lt;MenuItem OnClick="OnToggleShowPassword"&gt;
            @(field.IsHide ? </span><span class="koboSpan" id="kobo.973.2" xmlns="http://www.w3.org/1999/xhtml">"Show":"Hide")&lt;/MenuItem&gt;
        }
      &lt;/Dropdown&gt;
    }
  &lt;/Row&gt;
  &lt;Footer&gt;@((MarkupString)notes)&lt;/Footer&gt;                 ④
&lt;/ListView&gt;
&lt;!-- Editing Modal --&gt;
&lt;EditFormDialog Id="@_dialogEditId"                       ⑤
  ModelData="@currentField"
  IsKeyEditingEnable=@_isNewField
  OnSaveAsync="UpdateFieldAsync"
  KeyPlaceHolder="Field name"
  ValuePlaceHolder="Field content"&gt;
  @if (_isNewField) {
    &lt;div class="form-check"&gt;
      &lt;input class="form-check-input" type="checkbox"
        @bind="listGroupField.IsProtected"
        id="flexCheckDefault"&gt;
      &lt;label class="form-check-label"
        for="flexCheckDefault"&gt;
        Password
      &lt;/label&gt;
    &lt;/div&gt;
  }
&lt;/EditFormDialog&gt;
&lt;!-- Deleting Modal --&gt;
&lt;CascadingValue Value="@_dialogDeleteId" Name="Id"&gt;
  &lt;ConfirmDialog Title=@listGroupField.Key                ⑥
    OnConfirmClick="DeleteFieldAsync" /&gt;
&lt;/CascadingValue&gt;</span></pre>
<p><span class="koboSpan" id="kobo.974.1" xmlns="http://www.w3.org/1999/xhtml">There is a navigation bar using </span><strong class="source-inline"><span class="koboSpan" id="kobo.975.1" xmlns="http://www.w3.org/1999/xhtml">Navbar</span></strong><span class="koboSpan" id="kobo.976.1" xmlns="http://www.w3.org/1999/xhtml"> ①. </span><span class="koboSpan" id="kobo.976.2" xmlns="http://www.w3.org/1999/xhtml">We use </span><strong class="source-inline"><span class="koboSpan" id="kobo.977.1" xmlns="http://www.w3.org/1999/xhtml">ListView</span></strong><span class="koboSpan" id="kobo.978.1" xmlns="http://www.w3.org/1999/xhtml"> ② to display the fields of an entry, which</span><a id="_idIndexMarker790"/><span class="koboSpan" id="kobo.979.1" xmlns="http://www.w3.org/1999/xhtml"> include</span><a id="_idIndexMarker791"/><span class="koboSpan" id="kobo.980.1" xmlns="http://www.w3.org/1999/xhtml"> a </span><strong class="source-inline"><span class="koboSpan" id="kobo.981.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.982.1" xmlns="http://www.w3.org/1999/xhtml"> template ③ and a </span><strong class="source-inline"><span class="koboSpan" id="kobo.983.1" xmlns="http://www.w3.org/1999/xhtml">Footer</span></strong><span class="koboSpan" id="kobo.984.1" xmlns="http://www.w3.org/1999/xhtml"> template ④. </span><span class="koboSpan" id="kobo.984.2" xmlns="http://www.w3.org/1999/xhtml">In the </span><strong class="source-inline"><span class="koboSpan" id="kobo.985.1" xmlns="http://www.w3.org/1999/xhtml">Row</span></strong><span class="koboSpan" id="kobo.986.1" xmlns="http://www.w3.org/1999/xhtml"> template, the content of the field is displayed, and each row has a context menu. </span><span class="koboSpan" id="kobo.986.2" xmlns="http://www.w3.org/1999/xhtml">The context menu includes the menu of three actions (</span><strong class="source-inline"><span class="koboSpan" id="kobo.987.1" xmlns="http://www.w3.org/1999/xhtml">Edit</span></strong><span class="koboSpan" id="kobo.988.1" xmlns="http://www.w3.org/1999/xhtml">, </span><strong class="source-inline"><span class="koboSpan" id="kobo.989.1" xmlns="http://www.w3.org/1999/xhtml">Delete</span></strong><span class="koboSpan" id="kobo.990.1" xmlns="http://www.w3.org/1999/xhtml">, and </span><strong class="source-inline"><span class="koboSpan" id="kobo.991.1" xmlns="http://www.w3.org/1999/xhtml">Show</span></strong><span class="koboSpan" id="kobo.992.1" xmlns="http://www.w3.org/1999/xhtml">). </span><span class="koboSpan" id="kobo.992.2" xmlns="http://www.w3.org/1999/xhtml">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.993.1" xmlns="http://www.w3.org/1999/xhtml">Edit</span></strong><span class="koboSpan" id="kobo.994.1" xmlns="http://www.w3.org/1999/xhtml"> action is associated with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.995.1" xmlns="http://www.w3.org/1999/xhtml">EditFormDialog</span></strong><span class="koboSpan" id="kobo.996.1" xmlns="http://www.w3.org/1999/xhtml"> dialog ⑤ and the </span><strong class="source-inline"><span class="koboSpan" id="kobo.997.1" xmlns="http://www.w3.org/1999/xhtml">Delete</span></strong><span class="koboSpan" id="kobo.998.1" xmlns="http://www.w3.org/1999/xhtml"> action is associated with the </span><strong class="source-inline"><span class="koboSpan" id="kobo.999.1" xmlns="http://www.w3.org/1999/xhtml">ConfirmDialog</span></strong> <span class="No-Break"><span class="koboSpan" id="kobo.1000.1" xmlns="http://www.w3.org/1999/xhtml">dialog </span></span><span class="No-Break"><span class="koboSpan" id="kobo.1001.1" xmlns="http://www.w3.org/1999/xhtml">⑥</span></span><span class="No-Break"><span class="koboSpan" id="kobo.1002.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
<p><span class="koboSpan" id="kobo.1003.1" xmlns="http://www.w3.org/1999/xhtml">We now </span><a id="_idIndexMarker792"/><span class="koboSpan" id="kobo.1004.1" xmlns="http://www.w3.org/1999/xhtml">have</span><a id="_idIndexMarker793"/><span class="koboSpan" id="kobo.1005.1" xmlns="http://www.w3.org/1999/xhtml"> a working password manager app built using Blazor UI. </span><span class="koboSpan" id="kobo.1005.2" xmlns="http://www.w3.org/1999/xhtml">With this, we conclude this chapter and </span><em class="italic"><span class="koboSpan" id="kobo.1006.1" xmlns="http://www.w3.org/1999/xhtml">Part 2</span></em><span class="koboSpan" id="kobo.1007.1" xmlns="http://www.w3.org/1999/xhtml"> of </span><span class="No-Break"><span class="koboSpan" id="kobo.1008.1" xmlns="http://www.w3.org/1999/xhtml">this book.</span></span></p>
<h1 id="_idParaDest-207"><a id="_idTextAnchor223"/><span class="koboSpan" id="kobo.1009.1" xmlns="http://www.w3.org/1999/xhtml">Summary</span></h1>
<p><span class="koboSpan" id="kobo.1010.1" xmlns="http://www.w3.org/1999/xhtml">In this chapter, we continue our work of optimizing our UI implementation by creating more Razor components. </span><span class="koboSpan" id="kobo.1010.2" xmlns="http://www.w3.org/1999/xhtml">We introduced advanced topics such as templated components and using generic types in the Razor component. </span><span class="koboSpan" id="kobo.1010.3" xmlns="http://www.w3.org/1999/xhtml">We also introduced Blazor built-in components and used these components to support data validation in our app. </span><span class="koboSpan" id="kobo.1010.4" xmlns="http://www.w3.org/1999/xhtml">We developed an enhanced version of the key value editor using </span><strong class="source-inline"><span class="koboSpan" id="kobo.1011.1" xmlns="http://www.w3.org/1999/xhtml">EditForm</span></strong><span class="koboSpan" id="kobo.1012.1" xmlns="http://www.w3.org/1999/xhtml">. </span><span class="koboSpan" id="kobo.1012.2" xmlns="http://www.w3.org/1999/xhtml">With an understanding of the advanced topics about Razor components, we can now create more powerful </span><span class="No-Break"><span class="koboSpan" id="kobo.1013.1" xmlns="http://www.w3.org/1999/xhtml">Razor components.</span></span></p>
<p><span class="koboSpan" id="kobo.1014.1" xmlns="http://www.w3.org/1999/xhtml">We have completed </span><em class="italic"><span class="koboSpan" id="kobo.1015.1" xmlns="http://www.w3.org/1999/xhtml">Part 2</span></em><span class="koboSpan" id="kobo.1016.1" xmlns="http://www.w3.org/1999/xhtml"> of this book. </span><span class="koboSpan" id="kobo.1016.2" xmlns="http://www.w3.org/1999/xhtml">We will move to </span><em class="italic"><span class="koboSpan" id="kobo.1017.1" xmlns="http://www.w3.org/1999/xhtml">Part 3</span></em><span class="koboSpan" id="kobo.1018.1" xmlns="http://www.w3.org/1999/xhtml"> of this book to introduce unit tests and deployment of .NET MAUI applications. </span><span class="koboSpan" id="kobo.1018.2" xmlns="http://www.w3.org/1999/xhtml">We will learn how to implement unit tests for the .NET MAUI app in the next chapter, and how to deploy our app to different app stores in </span><a href="B16588_12.xhtml#_idTextAnchor241"><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1019.1" xmlns="http://www.w3.org/1999/xhtml">Chapter 12</span></em></span></a><em class="italic"><span class="koboSpan" id="kobo.1020.1" xmlns="http://www.w3.org/1999/xhtml">, Preparing for Deployment in </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.1021.1" xmlns="http://www.w3.org/1999/xhtml">App Stores</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.1022.1" xmlns="http://www.w3.org/1999/xhtml">.</span></span></p>
<p><span class="koboSpan" id="kobo.1023.1" xmlns="http://www.w3.org/1999/xhtml">Please </span><span class="No-Break"><span class="koboSpan" id="kobo.1024.1" xmlns="http://www.w3.org/1999/xhtml">stay tuned!</span></span></p>
<h1 id="_idParaDest-208"><a id="_idTextAnchor224"/><span class="koboSpan" id="kobo.1025.1" xmlns="http://www.w3.org/1999/xhtml">Further reading</span></h1>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1026.1" xmlns="http://www.w3.org/1999/xhtml">Dropdown</span></strong><span class="koboSpan" id="kobo.1027.1" xmlns="http://www.w3.org/1999/xhtml"> is a </span><span class="No-Break"><span class="koboSpan" id="kobo.1028.1" xmlns="http://www.w3.org/1999/xhtml">Bootstrap component</span></span></li>
<li><a href="https://getbootstrap.com/docs/5.1/components/dropdowns/"><span class="No-Break"><span class="koboSpan" id="kobo.1029.1" xmlns="http://www.w3.org/1999/xhtml">https://getbootstrap.com/docs/5.1/components/dropdowns/</span></span></a></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.1030.1" xmlns="http://www.w3.org/1999/xhtml">Modal</span></strong><span class="koboSpan" id="kobo.1031.1" xmlns="http://www.w3.org/1999/xhtml"> is the Bootstrap </span><span class="No-Break"><span class="koboSpan" id="kobo.1032.1" xmlns="http://www.w3.org/1999/xhtml">modal component</span></span></li>
<li><a href="https://getbootstrap.com/docs/5.1/components/modal/"><span class="No-Break"><span class="koboSpan" id="kobo.1033.1" xmlns="http://www.w3.org/1999/xhtml">https://getbootstrap.com/docs/5.1/components/modal/</span></span></a></li>
<li><span class="koboSpan" id="kobo.1034.1" xmlns="http://www.w3.org/1999/xhtml">ASP.NET Core Blazor forms and </span><span class="No-Break"><span class="koboSpan" id="kobo.1035.1" xmlns="http://www.w3.org/1999/xhtml">input components</span></span></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/forms-and-input-components?view=aspnetcore-6.0"><span class="No-Break"><span class="koboSpan" id="kobo.1036.1" xmlns="http://www.w3.org/1999/xhtml">https://learn.microsoft.com/en-us/aspnet/core/blazor/forms-and-input-components?view=aspnetcore-6.0</span></span></a></li>
</ul>
</div>
</body>
</html>
