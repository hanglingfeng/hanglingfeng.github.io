<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
  <title>Chapter_15</title>
  <link href="../Styles/syntax-highlighting.css" rel="stylesheet" type="text/css"/>
  <link href="../Styles/epub.css" rel="stylesheet" type="text/css"/>
</head>

<body id="Chapter_15" lang="en-US" xml:lang="en-US">
  <div id="_idContainer086" class="Basic-Text-Frame">
    <h1 class="chapterNumber">15</h1>
    <h1 id="_idParaDest-240" class="chapterTitle">Moving from, or Combining, an Existing Site</h1>
    <p class="normal">In this chapter, we will take a look at how we can combine different technologies and frameworks with Blazor.</p>
    <p class="normal">What if we already have a site?</p>
    <p class="normal">There are different options when it comes to moving from an existing site; the first question is, do we want to move from it, or do we want to combine it with the new technology?</p>
    <p class="normal">Microsoft has a history of making it possible for technology to co-exist, and this is what this chapter is all about.</p>
    <p class="normal">How can we use Angular and React in our Blazor site, or how can we introduce Blazor into an existing Angular and React site?</p>
    <p class="normal">In this chapter, we will cover the following:</p>
    <ul>
      <li class="bulletList">Introducing Web Components</li>
      <li class="bulletList">Exploring Custom Elements</li>
      <li class="bulletList">Exploring the Blazor Component</li>
      <li class="bulletList">Adding Blazor to an Angular site</li>
      <li class="bulletList">Adding Blazor to a React site</li>
      <li class="bulletList">Adding Blazor to MVC/Razor Pages</li>
      <li class="bulletList">Adding Web Components to a Blazor site</li>
      <li class="bulletList">Migrating from Web Forms</li>
    </ul>
    <p class="normal">Combining technologies can be very useful, either because we can’t convert a whole site in one go or because other technologies are a better fit for what we are trying to accomplish.</p>
    <p class="normal">Having said that, I prefer using one technology on my site, not mixing Blazor with Angular or React. But during a migration period or if our team is mixed, there are benefits to mixing.</p>
    <p class="normal">There is a cost to mixing technologies, which we will look at throughout the chapter.</p>
    <p class="normal">While writing this chapter, revisiting Angular and React, I must take the opportunity to say how much I love the Razor syntax. React is JavaScript with an HTML tags inside, and Angular has templates, which I find pretty nice and reminds me of what the Razor syntax looks like.</p>
    <p class="normal">However, there are a lot of things involved, almost 300 MB node modules, npm, TypeScript, and WebPack. Well, the list is long.</p>
    <p class="normal">I love working with Blazor because I don’t need to work with everything I just mentioned. In my opinion, Blazor has the best syntax out of the three options.</p>
    <h1 id="_idParaDest-241" class="heading-1">Technical requirements</h1>
    <p class="normal">This chapter is a reference chapter and is not connected in any way with the other chapters of the book.</p>
    <p class="normal">You can find the source code for this chapter’s end result at <a href="https://github.com/PacktPublishing/Web-Development-with-Blazor-Second-Edition/tree/main/Chapter15"><span class="url">https://github.com/PacktPublishing/Web-Development-with-Blazor-Second-Edition/tree/main/Chapter15</span></a>.</p>
    <h1 id="_idParaDest-242" class="heading-1">Introducing Web Components</h1>
    <p class="normal">To work with JavaScript, whether it’s bringing JavaScript to Blazor or bringing Blazor into JavaScript, we can use a technology called Web Components<a id="_idIndexMarker542"></a>.</p>
    <p class="normal">Web Components are a set of web platform APIs that allow us to create new, custom, reusable HTML tags. They are packaged in an encapsulated way, and we can use them very similarly to how we use components in Blazor.</p>
    <p class="normal">The really nice thing is that we can use them in any JavaScript library or framework that supports HTML.</p>
    <p class="normal">Web Components<a id="_idIndexMarker543"></a> are built on top of existing web standards like shadow DOM, ES modules, HTML templates, and custom elements.</p>
    <p class="normal">We will also recognize some of these technologies or variations of them in Blazor. Shadow DOM is the same as Blazor’s Render tree, and ES Modules are the type of JavaScript modules we did in <em class="chapterRef">Chapter 10</em>, <em class="italic">JavaScript Interop</em>.</p>
    <p class="normal">The technology we are going to take a look at in this chapter is <strong class="keyWord">Custom Elements</strong>.</p>
    <h1 id="_idParaDest-243" class="heading-1">Exploring Custom Elements</h1>
    <p class="normal">To bring Blazor into an existing Angular or React site, we use a feature called <code class="inlineCode">CustomElements</code>. It was<a id="_idIndexMarker544"></a> introduced as an experimental feature in .NET 6 and is now part of the framework in .NET 7.</p>
    <p class="normal">The idea is to create parts of your site in Blazor without having to migrate fully over to Blazor.</p>
    <p class="normal">For this feature to work, we need to have an ASP.NET backend or manually make sure the <code class="inlineCode">_framework</code> files are available. This is so that we can serve the Blazor framework files.</p>
    <p class="normal">There are two ways of running <strong class="keyWord">CustomElements</strong>;<strong class="keyWord"> </strong>we can run it as Blazor WebAssembly or as the Blazor Server. Since we are adding Blazor to a client framework like React or Angular, the most relevant method is to run it as Blazor WebAssembly. Therefore, the samples in these first sections will be for Blazor WebAssembly.</p>
    <p class="normal">In the GitHub repo, there is a folder called <code class="inlineCode">CustomElements</code> in which you will find the code for the projects, from which we will see sample code in this chapter.</p>
    <p class="normal">It is worth mentioning that since the components are being served and used on the client, there is nothing that hinders us (or people who mean us harm) from decompiling the code (if we are using WebAssembly). This is something client-side developers face all the time, but it is worth mentioning again.</p>
    <h1 id="_idParaDest-244" class="heading-1">Exploring the Blazor Component</h1>
    <p class="normal">The first thing we need to try out is a <a id="_idIndexMarker545"></a>Blazor Component. I have created a counter component inside a Blazor WebAssembly project named <code class="inlineCode">BlazorCustomElements</code>.</p>
    <p class="normal">The default template comes with a lot of things, and the repo project is stripped to the bare minimum, so it is easy to understand.</p>
    <p class="normal">The component is nothing new from what we have seen in the book previously; it’s a <code class="inlineCode">counter</code> component with a parameter that sets how much the counter should count up. It looks like this:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>Blazor counter<span class="hljs-tag">&lt;/</span><span class="hljs-name">h1</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag"> </span><span class="hljs-attr">role</span><span class="hljs-tag">=</span><span class="hljs-string">"status"</span><span class="hljs-tag">&gt;</span>Current count: @currentCount<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>Increment amount: @IncrementAmount<span class="hljs-tag">&lt;/</span><span class="hljs-name">p</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">button</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-primary"</span><span class="hljs-tag"> @</span><span class="hljs-attr">onclick</span><span class="hljs-tag">=</span><span class="hljs-string">"IncrementCount"</span><span class="hljs-tag">&gt;</span>Click me<span class="hljs-tag">&lt;/</span><span class="hljs-name">button</span><span class="hljs-tag">&gt;</span>
@code {
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> currentCount = <span class="hljs-number">0</span>;
    [<span class="hljs-meta">Parameter</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> IncrementAmount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">private</span><span class="hljs-function"> </span><span class="hljs-keyword">void</span><span class="hljs-function"> </span><span class="hljs-title">IncrementCount</span><span class="hljs-function">()</span>
    {
        currentCount += IncrementAmount;
    }
}
</code></pre>
    <p class="normal">The project also needs a reference to the <code class="inlineCode">NuGet</code> package:</p>
    <p class="normal"><strong class="keyWord">Microsoft.AspNetCore.Components.CustomElements</strong>.</p>
    <p class="normal">In the <code class="inlineCode">Program.cs</code>, we need to register the Component/Custom Element like this:</p>
    <pre class="programlisting code"><code class="hljs-code">builder.RootComponents.RegisterCustomElement&lt;Counter&gt;(<span class="hljs-string">"my-blazor-counter"</span>);
</code></pre>
    <p class="normal">That’s it for the <a id="_idIndexMarker546"></a>Blazor project.</p>
    <p class="normal">Now it’s time to use our custom element.</p>
    <h1 id="_idParaDest-245" class="heading-1">Adding Blazor to an Angular site</h1>
    <p class="normal">Let’s look at how we can add<a id="_idIndexMarker547"></a> Blazor to an existing Angular site. This demo is<a id="_idIndexMarker548"></a> based on the ASP.NET Core with Angular template in Visual Studio.</p>
    <p class="normal">The project is called <code class="inlineCode">AngularProject</code>.</p>
    <p class="normal">First, we need a reference to our Blazor library. I added the <code class="inlineCode">BlazorCustomElement</code> project as a reference.</p>
    <p class="normal">We need a reference to the <strong class="keyWord">Microsoft.AspNetCore.Components.WebAssembly.Server </strong>NuGet package; this is to be able to serve the framework files.</p>
    <p class="normal">To make our site serve the framework files, we need to add the following to the <code class="inlineCode">Program.cs</code>:</p>
    <pre class="programlisting code"><code class="hljs-code">app.UseBlazorFrameworkFiles();
</code></pre>
    <p class="normal">By default, Angular will be upset when we add our custom element because it does not recognize the tag. To fix this, we need to tell Angular that we are using custom elements. In the <code class="inlineCode">ClientApp/src/app/app.module.ts</code>, add the following things:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">import</span> { <span class="hljs-variable">CUSTOM_ELEMENTS_SCHEMA</span>, <span class="hljs-title">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
</code></pre>
    <p class="normal">Make sure to replace the row that already has an import for <code class="inlineCode">NgModule</code>.</p>
    <p class="normal">A bit further down in the same file, add:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr">schemas</span>: [
    <span class="hljs-variable">CUSTOM_ELEMENTS_SCHEMA</span> <span class="hljs-comment">// Tells Angular we will have custom tags in our templates</span>
  ]
</code></pre>
    <p class="normal">Now Angular is okay with having custom elements.</p>
    <p class="normal">Next, it’s time to add our component. In the <code class="inlineCode">ClientApp/src/app/Home/Home.component.html</code> we add our custom tag:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">my-blazor-counter</span><span class="hljs-tag"> [</span><span class="hljs-attr">attr.increment-amount</span><span class="hljs-tag">]=</span><span class="hljs-string">"10"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">my-blazor-counter</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In this <a id="_idIndexMarker549"></a>case, we set the <code class="inlineCode">increment-amount</code> parameter to <code class="inlineCode">10</code>, which <a id="_idIndexMarker550"></a>will increase the counter by <code class="inlineCode">10</code> every time we click it.</p>
    <p class="normal">To make this all work, we need to load a couple of JavaScript scripts. In the <code class="inlineCode">ClientApp/src/index.html</code>, we need to add:</p>
    <pre class="programlisting code"><code class="hljs-code">    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"_content/Microsoft.AspNetCore.Components.CustomElements/BlazorCustomElements.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"_framework/blazor.webassembly.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">We have one last thing we need to fix. When running the Angular project, it spins up a developer server. Actually, it spins up two: one for the ASP.NET backend and one for the Angular frontend. We need to make the Angular server send all the framework requests to the ASP.NET backend.</p>
    <p class="normal">In the default project template, this is already done for the <code class="inlineCode">/weatherforecast</code> path. Add the following code to the <code class="inlineCode">ClientApp/proxy.conf.js</code> file:</p>
    <pre class="programlisting code"><code class="hljs-code">  <span class="hljs-attr">context</span>: [
  <span class="hljs-string">"/weatherforecast"</span>,
  <span class="hljs-string">"/_framework"</span>,
  <span class="hljs-string">"</span><span class="hljs-string">/_content"</span>,
],
</code></pre>
    <p class="normal">We tell the developer server that if there is a request going to <code class="inlineCode">weatherforcast</code>, <code class="inlineCode">_framework</code>, or <code class="inlineCode">_content</code>, we want to redirect that request to the ASP.NET backend.</p>
    <p class="normal">We now have a <a id="_idIndexMarker551"></a>working Angular/Blazor WebAssembly<a id="_idIndexMarker552"></a> hybrid. I was honestly amazed at how easy and straightforward this was the first time I tried it. It makes it so easy to include some Blazor components on your Angular site, so you can convert it in to Blazor step by step, component by component.</p>
    <p class="normal">Next, we will do the same using a React site.</p>
    <h1 id="_idParaDest-246" class="heading-1">Adding Blazor to a React site</h1>
    <p class="normal">Adding<a id="_idIndexMarker553"></a> Blazor to a React site is very similar to Angular. This<a id="_idIndexMarker554"></a> demo is based on the ASP.NET Core with React template in Visual Studio. The project is called <code class="inlineCode">ReactProject</code>.</p>
    <p class="normal">First, we need a reference to our Blazor library, and I added the <code class="inlineCode">BlazorCustomElement</code> project as a reference.</p>
    <p class="normal">We need a reference to the <strong class="keyWord">Microsoft.AspNetCore.Components.WebAssembly.Server </strong>NuGet package; this is to be able to serve the framework files.</p>
    <p class="normal">To make our site serve the framework files, we need to add the following to the <code class="inlineCode">Program.cs</code>:</p>
    <pre class="programlisting code"><code class="hljs-code">app.UseBlazorFrameworkFiles();
</code></pre>
    <p class="normal">Next, it’s time to add our component. In the <code class="inlineCode">ClientApp/src/components/Home.js</code>, we add our custom tag:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">my-blazor-counter</span><span class="hljs-tag"> </span><span class="hljs-attr">increment-amount</span><span class="hljs-tag">=</span><span class="hljs-string">"10"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">my-blazor-counter</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In this case, we set the <code class="inlineCode">increment-amount</code> parameter to 10, which will increase the counter by 10 every time we click it.</p>
    <p class="normal">To make this all work, we need to load a couple of JavaScript. In the <code class="inlineCode">ClientApp/public/index.html</code>, we need to add:</p>
    <pre class="programlisting code"><code class="hljs-code">    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"_content/Microsoft.AspNetCore.Components.CustomElements/BlazorCustomElements.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"_framework/blazor.webassembly.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">These <a id="_idIndexMarker555"></a>scripts will make <a id="_idIndexMarker556"></a>sure our components load.</p>
    <p class="normal">We have one last thing we need to fix. When running the React project, it spins up a developer server. Actually, it spins up two: one for the ASP.NET backend and one for the React frontend.</p>
    <p class="normal">We need to make the React server send all the framework requests to the ASP.NET backend. In the default project template, this is already done for the <code class="inlineCode">/weatherforecast</code> path.</p>
    <p class="normal">Add the following code to the <code class="inlineCode">ClientApp/src/setupProxy.js</code> file:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-keyword">const</span> context = [
    <span class="hljs-string">"/weatherforecast"</span>,
    <span class="hljs-string">"/_framework"</span>,
    <span class="hljs-string">"/_content"</span>,
];
</code></pre>
    <p class="normal">We tell the developer server that if a request goes to <code class="inlineCode">weatherforcast</code>, <code class="inlineCode">_framework</code>, or <code class="inlineCode">_content</code>, we want to redirect that request to the ASP.NET backend.</p>
    <p class="normal">We now<a id="_idIndexMarker557"></a> have a working React/Blazor WebAssembly hybrid. I <a id="_idIndexMarker558"></a>was amazed at how easy and straightforward this was the first time I tried it. It makes it so easy to include some Blazor components on your React site, so you can convert it to Blazor step by step, component by component.</p>
    <p class="normal">Next, we will do the same using a Razor Pages site.</p>
    <h1 id="_idParaDest-247" class="heading-1">Adding Blazor to MVC/Razor Pages</h1>
    <p class="normal">When I started with<a id="_idIndexMarker559"></a> Blazor, this was exactly the scenario we wanted<a id="_idIndexMarker560"></a> to address. We had an MVC/Razor Pages mix, and it was time for an upgrade.</p>
    <p class="normal">We solved it by implementing Razor Pages that referred to Razor components. Looking back at it now, it was not a pretty solution, at least not for a while, until we got to the point where most of the code was rewritten in Blazor.</p>
    <p class="normal">The challenge is that if we navigate to a page that has a Blazor component (a Razor component), that page is connected to the server and establishes a WebSocket. If we navigate away from a Blazor page to an MVC page, for example, we reload the entire page, and the script gets reloaded as well. A new connection was established, leaving the old one on the server for 3 minutes.</p>
    <p class="normal">We don’t have many users, and for us, that technique works long enough for us to finish the migration and launch a new Blazor version of the site.</p>
    <p class="normal">But I have some good news!</p>
    <p class="normal">We can also use the same custom elements to run on a Razor Pages site.</p>
    <p class="normal">Let’s take a look!</p>
    <p class="normal">The project is called <code class="inlineCode">RazorPagesProject</code>.</p>
    <p class="normal">In the previous examples with Angular and React, those technologies are client-side; therefore, we used WebAssembly. Razor Pages are server-side, and even though we could use WebAssembly here as well, this is an excellent opportunity to take a look at making the <strong class="keyWord">custom component</strong> use Blazor Server.</p>
    <p class="normal">First, we need a reference to our Blazor library. I added the <code class="inlineCode">BlazorCustomElement</code> project as a reference.</p>
    <p class="normal">Then we <a id="_idIndexMarker561"></a>need to enable Blazor Server in our Razor Pages<a id="_idIndexMarker562"></a> by adding the following code to <code class="inlineCode">Program.cs</code>:</p>
    <pre class="programlisting code"><code class="hljs-code">builder.Services.AddServerSideBlazor(options =&gt;
{
    options.RootComponents.RegisterCustomElement&lt;Counter&gt;(<span class="hljs-string">"my-blazor-counter"</span>);
});
</code></pre>
    <p class="normal">And also:</p>
    <pre class="programlisting code"><code class="hljs-code">app.MapBlazorHub();
</code></pre>
    <p class="normal">In the <code class="inlineCode">Pages/Shared/_Layout.cshtml</code>, we need to add the JavaScript:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"_content/Microsoft.AspNetCore.Components.CustomElements/BlazorCustomElements.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"_framework/blazor.server.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">In this case, we add the script for Blazor Server.</p>
    <p class="normal">Last but not least, we need to add our component. In the <code class="inlineCode">Pages/Index.cshtml</code>, we add:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">my-blazor-counter</span><span class="hljs-tag"> </span><span class="hljs-attr">increment-amount</span><span class="hljs-tag">=</span><span class="hljs-string">"10"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">my-blazor-counter</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">And we are done; the custom component is now running inside our Razor Pages site (which, of course, is an ASP.NET site with Razor Pages turned on).</p>
    <p class="normal">The downside, as we touched on at the beginning of this section, is that when we switch pages, the connection to the server will be severed and take up memory on the server for the next 3 minutes. So, if we have a lot of page navigation, we might want to rethink this.</p>
    <p class="normal">The cool part is that with only a few changes, we can switch this implementation to run WebAssembly instead of Blazor Server for the Blazor components.</p>
    <p class="normal">The sample code is prepared with comments for both WebAssembly and Blazor Server.</p>
    <p class="normal">I am again<a id="_idIndexMarker563"></a> super impressed by this; it makes it so simple to <a id="_idIndexMarker564"></a>migrate existing sites to Blazor.</p>
    <p class="normal">Next, we will look at how we can use Angular or React controls on our Blazor website.</p>
    <h1 id="_idParaDest-248" class="heading-1">Adding Web components to a Blazor site</h1>
    <p class="normal">We have looked at adding<a id="_idIndexMarker565"></a> Blazor to an existing Angular, React, and<a id="_idIndexMarker566"></a> even MVC/Razor Pages site.</p>
    <p class="normal">But sometimes, that perfect library you love to use might not have a Blazor counterpart. We know that we can make a JavaScript interop and build it ourselves, but can we also use Angular and React libraries from Blazor?</p>
    <p class="normal">We have two options here; either we can convert our site in to an Angular/React site and use those examples, or we can convert the JavaScript library in to a Web Component and use that from Blazor.</p>
    <p class="normal">Until now, we haven’t used npm or anything like that because, in most cases, we don’t need it. But now we are mixing technologies, and for that, NPM is the easiest way. NPM is outside the scope of this book, so I will not go into any details about it.</p>
    <p class="normal">How to convert Angular/React or anything else into a Web Component is also outside the scope of this book.</p>
    <p class="normal">The project is called <code class="inlineCode">BlazorProject</code>.</p>
    <p class="normal">We can browse some of the Web Components on this site: <a href="https://www.webcomponents.org/"><span class="url">https://www.webcomponents.org/</span></a>.</p>
    <p class="normal">I found a Markdown editor from GitHub. Even though we are not implementing it on our blog, feel free to go back and do so if you want to.</p>
    <p class="normal">We can read about the editor here:</p>
    <p class="normal"><a href="mailto:https://www.webcomponents.org/element/@github/markdown-toolbar-element"><span class="url">https://www.webcomponents.org/element/@github/markdown-toolbar-element</span></a></p>
    <p class="normal">To get the required JavaScript files, we need to set up NPM. In the project folder, run the following commands:</p>
    <pre class="programlisting con"><code class="hljs-con">npm init
npm install –save @github/markdown-toolbar-element
</code></pre>
    <p class="normal">This will bring down the JavaScript we need.</p>
    <p class="normal">Next, copy the <code class="inlineCode">BlazorProject\node_modules\@github\markdown-toolbar-element\</code> folder to the <code class="inlineCode">wwwroot</code> folder and include it in the project.</p>
    <p class="normal">Now the JavaScript will be accessible from our project.</p>
    <p class="normal">In the <code class="inlineCode">index.html</code>, we need to add a reference to the JavaScript, and we put it below the Blazor JavaScript:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">script</span><span class="hljs-tag"> </span><span class="hljs-attr">type</span><span class="hljs-tag">=</span><span class="hljs-string">"module"</span><span class="hljs-tag"> </span><span class="hljs-attr">src</span><span class="hljs-tag">=</span><span class="hljs-string">"markdown-toolbar-element/dist/index.js"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">script</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">This <a id="_idIndexMarker567"></a>component is an ES6 module, so we set the <a id="_idIndexMarker568"></a>type to <code class="inlineCode">"module"</code>.</p>
    <p class="normal">Now, all that is remaining is to add our component. In the demo project, I added it to the <code class="inlineCode">index</code> component.</p>
    <p class="normal">First, the component:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">markdown-toolbar</span><span class="hljs-tag"> </span><span class="hljs-attr">for</span><span class="hljs-tag">=</span><span class="hljs-string">"textarea"</span><span class="hljs-tag"> </span><span class="hljs-attr">role</span><span class="hljs-tag">=</span><span class="hljs-string">"toolbar"</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-bold</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"0"</span><span class="hljs-tag">&gt;</span>bold<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-bold</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-header</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>header<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-header</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-italic</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>italic<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-italic</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-quote</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>quote<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-quote</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-code</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>code<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-code</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-link</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>link<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-link</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-image</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>image<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-image</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-unordered-list</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>unordered-list<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-unordered-list</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-ordered-list</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>ordered-list<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-ordered-list</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-task-list</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>task-list<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-task-list</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-mention</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>mention<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-mention</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-ref</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>ref<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-ref</span><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;</span><span class="hljs-name">md-strikethrough</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"btn btn-sm"</span><span class="hljs-tag"> </span><span class="hljs-attr">tabindex</span><span class="hljs-tag">=</span><span class="hljs-string">"-1"</span><span class="hljs-tag">&gt;</span>strikethrough<span class="hljs-tag">&lt;/</span><span class="hljs-name">md-strikethrough</span><span class="hljs-tag">&gt;</span>
<span class="hljs-tag">&lt;/</span><span class="hljs-name">markdown-toolbar</span><span class="hljs-tag">&gt;</span>
</code></pre>
    <p class="normal">Then the text area with binding to a C# variable <code class="inlineCode">markdown</code>.</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-tag">&lt;</span><span class="hljs-name">textarea</span><span class="hljs-tag"> @</span><span class="hljs-attr">bind</span><span class="hljs-tag">=</span><span class="hljs-string">"markdown"</span><span class="hljs-tag"> @</span><span class="hljs-attr">bind:event</span><span class="hljs-tag">=</span><span class="hljs-string">"oninput"</span><span class="hljs-tag"> </span><span class="hljs-attr">rows</span><span class="hljs-tag">=</span><span class="hljs-string">"6"</span><span class="hljs-tag"> </span><span class="hljs-attr">class</span><span class="hljs-tag">=</span><span class="hljs-string">"mt-3 d-block width-full"</span><span class="hljs-tag"> </span><span class="hljs-attr">id</span><span class="hljs-tag">=</span><span class="hljs-string">"textarea"</span><span class="hljs-tag"> </span><span class="hljs-attr">contenteditable</span><span class="hljs-tag">=</span><span class="hljs-string">"false"</span><span class="hljs-tag"> </span><span class="hljs-attr">spellcheck</span><span class="hljs-tag">=</span><span class="hljs-string">"false"</span><span class="hljs-tag">&gt;&lt;/</span><span class="hljs-name">textarea</span><span class="hljs-tag">&gt;</span>
@markdown
@code
{
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> markdown = <span class="hljs-string">"Hello, **world**!"</span>;
}
</code></pre>
    <p class="normal">The C# variable changes as soon as we edit the textbox, either by using the toolbar or typing some text.</p>
    <p class="normal">We have integrated a Web Component into our Blazor project, which binds to a C# variable.</p>
    <p class="normal">This is <a id="_idIndexMarker569"></a>super powerful and gives us new possibilities to <a id="_idIndexMarker570"></a>add existing functionality to our Blazor site.</p>
    <p class="normal">Now we know how to handle SPA frameworks like React and Angular. But what about server frameworks like Web Forms? This is what we will look at next.</p>
    <h1 id="_idParaDest-249" class="heading-1">Migrating from Web Forms</h1>
    <p class="normal">Last but not least, we have <strong class="keyWord">Web Forms</strong>.</p>
    <p class="normal">There is<a id="_idIndexMarker571"></a> honestly not any good upgrade path for Web Forms; there was a project that aimed for code reuse when migrating to Blazor, but it is not being actively worked on.</p>
    <p class="normal">The first thing we should know is that Blazor is in many ways very similar to Web Forms, so the learning curve to get to Blazor is almost nonexistent since we have state management in Web Forms as well as Blazor.</p>
    <p class="normal">There are some migration <a id="_idIndexMarker572"></a>strategies where you would use <strong class="keyWord">Yet Another Reverse Proxy </strong>(<strong class="keyWord">YARP</strong>). Still, my recommendation would be to migrate a part of the website to Blazor and have two sites running, until we reach the point where it is feature-complete. Moving to Blazor is fairly quick to do, and in the end, I believe it will save you time.</p>
    <p class="normal">When we moved our site from MVC to Blazor, we realized that, in some cases, it was faster to rewrite the component to Blazor than trying to solve it in MVC.</p>
    <p class="normal">Web Forms should be even faster to convert since the backend code is more similar to Blazor than MVC.</p>
    <p class="normal">So what should we do? Should we upgrade or keep using Web Forms? Upgrade – you will not be disappointed!</p>
    <h1 id="_idParaDest-250" class="heading-1">Summary</h1>
    <p class="normal">We discussed adding Blazor to other technologies like Angular, React, and Razor Pages using Web Components in this chapter. We looked at how to add Web Components to a Blazor project and leverage JavaScript libraries in our Blazor app.</p>
    <p class="normal">Upgrading a current site to Blazor can be a lot of work. At work, we made this journey 3 years ago. In our case, we wanted to update our MVC site to be more interactive. We went for Blazor, and I would argue it saved our project and made us more productive, resulting in a more interactive user experience.</p>
    <p class="normal">In the next chapter, we will delve deeper into Blazor WebAssembly.</p>
  </div>
</body>
</html>