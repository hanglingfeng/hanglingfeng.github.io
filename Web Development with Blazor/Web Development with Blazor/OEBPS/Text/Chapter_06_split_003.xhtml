<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="en-US" xml:lang="en-US">
  <head>
    <title>Chapter_06</title>
    <!-- kobo-style -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="../../stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="../../page_styles.css"/>
</head>
  <body id="Chapter_06" class="calibre">
<div class="calibre1" id="_idContainer046">
<h2 class="heading1" id="_idParaDest-147"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2897.1">Locking the navigation</span></h2>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2898.1">In .NET 7, we got a</span><a id="_idIndexMarker330" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2899.1"> new component called </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2900.1">NavigationLock</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2901.1">. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2901.2">Right</span><a id="_idIndexMarker331" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2902.1"> now, if we write a blog post and click somewhere in the menu, our changes will be lost. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2902.2">The same thing happens if we change the URL and press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2903.1">Enter</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2904.1">. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2904.2">With </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2905.1">NavigationLock</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2906.1">, we can prevent that from happening.</span></p>
<p class="normal1"><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2907.1">NavigationLock</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2908.1"> can prevent us from leaving the page and navigating to another page in our site. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2908.2">In that case, we can show a custom message using JavaScript. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2908.3">If we navigate to another site, it can trigger a warning, but we don’t have control over the message shown. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2908.4">This functionality is built into the browser.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2909.1">We will implement this in the same way we did with </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2910.1">FieldCssClassProvider</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2911.1">, as a reusable component. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2911.2">We want to check whether our </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2912.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2913.1"> has any changes made so we can trigger the navigation lock:</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2914.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2915.1">SharedComponents</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2916.1"> project, in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2917.1">ReusableComponents</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2918.1"> folder, add a new Razor component and name it </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2919.1">BlogNavigationLock.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2920.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2921.1">At the top of the component, add the following code:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2922.1">@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.JSInterop @inject IJSRuntime JSRuntime
@implements IDisposable
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2923.1">We inject an </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2924.1">IJSRuntime</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2925.1"> to make JavaScript calls. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2925.2">We will return to JavaScript interop in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2926.1">Chapter 10</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2927.1">, </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2928.1">JavaScript Interop</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2929.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2930.1">We also implement the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2931.1">IDisposable</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2932.1"> interface.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="3"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2933.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2934.1">code</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2935.1"> section, add the following code:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2936.1">[</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2937.1">CascadingParameter</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2938.1">]
</span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2939.1">public</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2940.1"> required EditContext CurrentEditContext { </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2941.1">get</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2942.1">; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2943.1">set</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2944.1">; }
</span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2945.1">public</span></span> <span class="hljs-built_in"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2946.1">string</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2947.1"> InternalNavigationMessage { </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2948.1">get</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2949.1">; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2950.1">set</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2951.1">; } = "You are about to loose changes, are you sure you want to navigate away?"; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2952.1">public</span></span> <span class="hljs-built_in"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2953.1">bool</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2954.1"> CheckNavigation { </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2955.1">get</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2956.1">; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2957.1">set</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2958.1">; } = </span><span class="hljs-literal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2959.1">true</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2960.1">;
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2961.1">We have a </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2962.1">CascadingParameter</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2963.1">, which gets the current </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2964.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2965.1">, just as we did with </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2966.1">FieldCssClassProvider</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2967.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2968.1">We also added a string that is the message shown when we try to navigate from the page.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="4"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2969.1">When a change</span><a id="_idIndexMarker332" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2970.1"> happens in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2971.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2972.1">, we need to update the component and make sure it locks the navigation. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2972.2">Add the following code:
        </span><pre class="programlisting"><code class="hljs-code"><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2973.1">protected</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2974.1">override</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2975.1"> Task </span></span><span class="hljs-title"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2976.1">OnInitializedAsync</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2977.1">()</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2978.1">
{
    CurrentEditContext.OnFieldChanged += OnFieldChangedAsync;
    </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2979.1">return</span></span> <span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2980.1">base</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2981.1">.OnInitializedAsync();
}
</span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2982.1">private</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2983.1">async</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2984.1">void</span></span><span> </span><span class="hljs-title"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2985.1">OnFieldChangedAsync</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2986.1">(</span></span><span class="hljs-built_in"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2987.1">object</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2988.1">? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2988.2">Sender,FieldChangedEventArgs args</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2989.1">)</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2990.1">
    {
        </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2991.1">await</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2992.1"> InvokeAsync(StateHasChanged);
    }
</span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2993.1">void</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2994.1"> Idisposable.Dispose()
{
        CurrentEditContext.OnFieldChanged -= OnFieldChangedAsync;
    }
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2995.1">We start to listen for field changes, and if a field changes, we call the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2996.1">StateHasChanged</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2997.1"> method to update the component.</span></p>
<p class="normal1"><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2998.1">InvokeAsync</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2999.1"> is needed since the call comes from another thread.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3000.1">We also override the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3001.1">Dispose</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3002.1"> method and remove the event listener.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="5"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3003.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3004.1">code</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3005.1"> section, add the following code:
        </span><pre class="programlisting"><code class="hljs-code"><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3006.1">private</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3007.1">async</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3008.1"> Task </span></span><span class="hljs-title"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3009.1">OnBeforeInternalNavigation</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3010.1"> (</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3011.1">LocationChangingContext context</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3012.1">)</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3013.1">
{
    </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3014.1">if</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3015.1"> (CurrentEditContext.IsModified() &amp;&amp; CheckNavigation)
    {
        </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3016.1">var</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3017.1"> isConfirmed = </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3018.1">await</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3019.1"> JSRuntime.InvokeAsync&lt;</span><span class="hljs-built_in"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3020.1">bool</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3021.1">&gt;("confirm",
            InternalNavigationMessage);
        </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3022.1">if</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3023.1"> (!isConfirmed)
        {
            context.PreventNavigation();
        }
    }
}
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3024.1">This method will make a JavaScript call if there are changes in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3025.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3026.1"> (or model), showing a confirm dialog and the message we added. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3026.2">If we do not confirm, the navigation will be prevented.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="6"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3027.1">Now, we can </span><a id="_idIndexMarker333" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3028.1">add the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3029.1">NavigationLock</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3030.1"> component. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3030.2">Just under the directives, add the following code:
        </span><pre class="programlisting"><code class="hljs-code"><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3031.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3032.1">NavigationLock</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3033.1">ConfirmExternalNavigation</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3034.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3035.1">"@(CurrentEditContext.IsModified()</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3036.1"> &amp;&amp; </span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3037.1">CheckNavigation</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3038.1">)" </span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3039.1">OnBeforeInternalNavigation</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3040.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3041.1">"OnBeforeInternalNavigation"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3042.1"> /&gt;</span></span>
</code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3043.1">This </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3044.1">NavigationLock</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3045.1"> component will prevent external navigation (navigating to another site) and internal navigation (navigating to another page in our blog). </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3045.2">It checks whether the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3046.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3047.1"> (model) has any changes and prevents external navigation. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3047.2">On internal navigation, it will execute the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3048.1">OnBeforeInternalNavigation</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3049.1"> method, which checks whether the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3050.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3051.1"> has been changed.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3052.1">Now, we only have one more thing to do.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="7"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3053.1">In </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3054.1">Pages/Admin/BlogPostEdit.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3055.1">, add the new Razor component we created just below the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3056.1">CustomCssClassProvider</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3057.1">:
        </span><pre class="programlisting"><code class="hljs-code"><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3058.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3059.1">BlogNavigationLock</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3060.1"> @</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3061.1">ref</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3062.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3063.1">"NavigationLock"/</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3064.1">&gt;</span></span>
</code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3065.1">This will get the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3066.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3067.1"> from the cascading value, and execute the code we just wrote.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3068.1">Add the following:</span></p>
<pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3069.1">@using SharedComponents.ReusableComponents
</span></code></pre>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="8"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3070.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3071.1">code</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3072.1"> section, add the following:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3073.1">BlogNavigationLock? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3073.2">NavigationLock { </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3074.1">get</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3075.1">; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3076.1">set</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3077.1">; }
</span></code></pre>
</li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3078.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3079.1">SavePostAsync</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3080.1"> method, just before navigating to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3081.1">admin/blogposts</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3082.1">, add the following:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3083.1">NavigationLock?.CurrentEditContext.MarkAsUnmodified();
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3084.1">When saving the object, the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3085.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3086.1"> doesn’t know that, so we are telling the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3087.1">EditContext</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3088.1"> that the model is now unmodified, so the navigation should not be stopped.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="10"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3089.1">Run the site, navigate to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3090.1">Admin/BlogPosts</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3091.1">, and click a blog post.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3092.1">Try to navigate to another site (it should work).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3093.1">Try to navigate to another page (it should work).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3094.1">Change the blog post.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3095.1">Try navigating to another site (it should show a message box).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3096.1">Try </span><a id="_idIndexMarker334" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3097.1">navigating to another page. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3097.2">You might notice that, in our case, it doesn’t show a message box when we navigate to another page. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3097.3">What is up with that? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3097.4">It seems to be a limitation in how this component works. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3097.5">If we were running </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3098.1">InteractiveServer</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3099.1"> or </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3100.1">InteractiveWebAssembly</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3101.1">, it would work. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3101.2">Navigation using static server rendering (which is what happens when we navigate) won’t trigger the navigation change. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3101.3">If we want to test this, we can change our project to run as Blazor Server.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3102.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3103.1">BlazorWebApp</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3104.1"> project, in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3105.1">Components</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3106.1"> folder, open the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3107.1">App.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3108.1"> file.
    </span><p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3109.1">Replace the following line:</span></p>
<pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3110.1">&lt;Routes  /&gt;
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3111.1">Replace the preceding line with the following line:</span></p>
<pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3112.1">&lt;Routes @rendermode="RenderMode.InteractiveServer" /&gt;
</span></code></pre></li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="17"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3113.1">Now we can try it again:</span><ol class="alphabeticlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3114.1">Run the site, navigate to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3115.1">Admin/BlogPosts</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3116.1">, and click a blog post.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3117.1">Try to navigate to another site (it should work).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3118.1">Try to navigate to another page (it should work).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3119.1">Change the blog post.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3120.1">Try navigating to another site (it should show a message box).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3121.1">Try navigating to another page (it should show a message box).</span></li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3122.1">Now, change it</span><a id="_idIndexMarker335" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3123.1"> back to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3124.1">&lt;Routes /&gt;</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3125.1">.</span></p>
</li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3126.1">The point of this is to show that, in some cases, the built-in components will act differently depending on the render mode. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3126.2">I honestly think that this is a bug rather than a feature, but there are discussions about this.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3127.1">Awesome! </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3127.2">We have implemented another reusable component. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3127.3">Next, let’s take a look at how we can use a form with a static server-side rendered component using enhanced form navigation.</span></p>
<h1 class="heading" id="_idParaDest-148"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3128.1">Enhanced Form Navigation</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3129.1">In .NET 8, we got server-side </span><a id="_idIndexMarker336" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3130.1">rendering. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3130.2">Adding interactivity to a component is simple, as we have seen. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3130.3">But sometimes we just want a form and a submit button. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3130.4">Do we really have to enable WebAssembly or a SignalR connection for this? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3130.5">I’m glad you asked! </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3130.6">The answer is, no, we don’t.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3131.1">Let’s add a component to showcase that our blog posts need comments:</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3132.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3133.1">SharedComponents</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3134.1"> project, in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3135.1">Pages</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3136.1"> folder, add a new Razor component called </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3137.1">Comments.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3138.1">. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3138.2">This component should do two things: list comments and create a new comment.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3139.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3140.1">comments</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3141.1"> file, replace the content with the following:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3142.1">@using SharedComponents.ReusableComponents
@using Microsoft.AspNetCore.Components.Forms
@inject IBlogApi _api
</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3143.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3144.1">h3</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3145.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3146.1">Comments</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3147.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3148.1">h3</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3149.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3150.1">
@foreach (var c in comments)
{
    </span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3151.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3152.1">div</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3153.1">class</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3154.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3155.1">"media mb-4"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3156.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3157.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3158.1">div</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3159.1">class</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3160.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3161.1">"media-body"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3162.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3163.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3164.1">h5</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3165.1">class</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3166.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3167.1">"mt-0"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3168.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3169.1">@c.Name</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3170.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3171.1">h5</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3172.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3173.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3174.1">p</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3175.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3176.1">@c.Text</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3177.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3178.1">p</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3179.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3180.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3181.1">small</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3182.1">class</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3183.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3184.1">"text-muted"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3185.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3186.1">@c.Date</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3187.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3188.1">small</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3189.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3190.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3191.1">div</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3192.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3193.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3194.1">div</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3195.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3196.1">
}
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3197.1">This is a list of comments and some bootstrap classes to make it look better.</span></p>
</li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="3"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3198.1">Continue by adding the form:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3199.1">@if (Model != null)
{
    </span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3200.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3201.1">EditForm</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3202.1">method</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3203.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3204.1">"post"</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3205.1">Model</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3206.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3207.1">"</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3208.1">@Model"</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3209.1">OnValidSubmit</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3210.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3211.1">"@ValidSubmitAsync"</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3212.1">FormName</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3213.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3214.1">"CommentForm"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3215.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3216.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3217.1">DataAnnotationsValidator</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3218.1"> /&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3219.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3220.1">CustomCssClassProvider</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3221.1">ProviderType</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3222.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3223.1">"</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3224.1">BootstrapFieldCssClassProvider"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3225.1"> /&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3226.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3227.1">BlogInputText</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3228.1"> @</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3229.1">bind-Value</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3230.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3231.1">"Model.Name"</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3232.1">Label</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3233.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3234.1">"Name"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3235.1"> /&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3236.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3237.1">BlogInputText</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3238.1"> @</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3239.1">bind-Value</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3240.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3241.1">"</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3242.1">Model.Text"</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3243.1">Label</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3244.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3245.1">"Comment"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3246.1"> /&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3247.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3248.1">button</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3249.1">type</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3250.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3251.1">"submit"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3252.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3253.1">Add Comment</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3254.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3255.1">button</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3256.1">&gt;</span></span>
<span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3257.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3258.1">EditForm</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3259.1">&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3260.1">
}
</span></code></pre>
</li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3261.1">We are still </span><a id="_idIndexMarker337" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3262.1">using an </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3263.1">EditForm</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3264.1"> just as before and an </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3265.1">OnValidSubmit</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3266.1"> property. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3266.2">There are some things that are new here, though. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3266.3">We are specifying the method we are using to post the form – in this case, a post method. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3266.4">We are also naming the form with the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3267.1">FormName</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3268.1"> parameter. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3268.2">These two properties must be there. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3268.3">We are using the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3269.1">DataAnnotationValidator</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3270.1"> and the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3271.1">CustomCssClassProvider</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3272.1"> we created earlier. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3272.2">We are even using the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3273.1">BlogInputText</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3274.1">. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3274.2">But since this component isn’t interactive, our button will not work as it is disabled by default, and if we remove the interactivity, it will stay disabled. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3274.3">So, in this case, we have to add a button the old-fashioned way. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3274.4">We can make sure that there is a non-interactive button for cases like this as well.
    </span><p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3275.1">Now it is time for the code part of the form:</span></p>
<pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3276.1">@code {
    [</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3277.1">Parameter,EditorRequired</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3278.1">]
    </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3279.1">public</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3280.1"> required </span><span class="hljs-built_in"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3281.1">string</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3282.1"> BlogPostId { </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3283.1">get</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3284.1">; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3285.1">set</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3286.1">; }
    [</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3287.1">SupplyParameterFromForm</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3288.1">]
    </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3289.1">public</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3290.1"> Comment? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3290.2">Model { </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3291.1">get</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3292.1">; </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3293.1">set</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3294.1">; } = </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3295.1">new</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3296.1">();
    List&lt;Comment&gt; comments = </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3297.1">new</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3298.1">();
    </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3299.1">protected</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3300.1">override</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3301.1">async</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3302.1"> Task </span></span><span class="hljs-title"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3303.1">OnInitializedAsync</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3304.1">()</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3305.1">
    {
        comments = </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3306.1">await</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3307.1"> _api.GetCommentsAsync(BlogPostId);
    }
    </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3308.1">public</span></span><span> </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3309.1">async</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3310.1"> Task </span></span><span class="hljs-title"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3311.1">ValidSubmitAsync</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3312.1">()</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3313.1">
    {
        Model.Id = Guid.NewGuid().ToString();
        Model.Date = DateTime.Now;
        Model.BlogPostId = BlogPostId;
        </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3314.1">await</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3315.1"> _api.SaveCommentAsync(Model);
        comments = </span><span class="hljs-keyword"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3316.1">await</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3317.1"> _api.GetCommentsAsync(BlogPostId);
    }
}
</span></code></pre></li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="5"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3318.1">Here, we are </span><a id="_idIndexMarker338" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3319.1">using a parameter so that our component knows what blog post to show comments for. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3319.2">It has </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3320.1">EditorRequired</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3321.1">, so Visual Studio will warn you if it is missing. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3321.2">The </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3322.1">Model</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3323.1"> parameter has the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3324.1">SupplyParameterFromForm</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3325.1"> attribute, which is required. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3325.2">This is so Blazor knows what property to fill with data when the form is posted. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3325.3">The rest of the code is the same as the code we have used previously. </span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3326.1">Open </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3327.1">Post.cs</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3328.1"> and add the following code just beneath the line @((MarkupString)Markdig.Markdown.ToHtml(BlogPost.Text, pipeline)):
        </span><pre class="programlisting"><code class="hljs-code"><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3329.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3330.1">Comments</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3331.1">BlogPostId</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3332.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3333.1">"@BlogPostId"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3334.1"> /&gt;</span></span>
</code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3335.1">So, what is happening?</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3336.1">When we submit our form, the component will be rerendered, creating a new instance of the component and filling the (in our case) </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3337.1">Model</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3338.1"> parameter with the data from the post. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3338.2">With interactive components, </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3339.1">OnInitialized</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3340.1"> and </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3341.1">OnInitializedAsync</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3342.1"> will only run once (unless we are running prerendering). </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3342.2">With these static components, it will reload the component. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3342.3">But we also get a “problem” because the scrolling positions get lost when the page reloads. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3342.4">We will now find ourselves at the top of the page, which is not a great user experience. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3342.5">Luckily, there is a solution; this is where the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3343.1">Enhance</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3344.1"> part comes in. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3344.2">By adding </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3345.1">Enhance</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3346.1"> to our form, it will now keep its scroll position after posting the page. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3346.2">Pretty neat, right? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3346.3">We can also use a normal form instead of an </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3347.1">EditForm</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3348.1">. </span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3349.1">It would then look something like this:</span></p>
<pre class="programlisting"><code class="hljs-code"><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3350.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3351.1">form</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3352.1">method</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3353.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3354.1">"post"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3355.1"> @</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3356.1">onsubmit</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3357.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3358.1">"…"</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3359.1"> @</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3360.1">formname</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3361.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3362.1">"name"</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3363.1">data-enhance</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3364.1">&gt;</span></span>
</code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3365.1">Instead of </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3366.1">Enhance</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3367.1">, we add </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3368.1">data-enhance</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3369.1">. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3369.2">Personally, I prefer to use an </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3370.1">EditForm</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3371.1"> where I can, but it might be good to know that there are options.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3372.1">We can also use </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3373.1">data-permanent</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3374.1"> to keep the information in the form fields for a search parameter, for example. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3374.2">This way, the enhanced navigation will not update that data when the response is returned. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3374.3">How many times have we used a search field, misspelled something, and then the search field is empty and we need</span><a id="_idIndexMarker339" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3375.1"> to retype everything? </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3375.2">This is where </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3376.1">data-permanent</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3377.1"> saves us.</span></p>
</li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3378.1">Amazing!</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3379.1">This has been a heavy chapter, but wow, we have done so much – a whole bunch of new and reusable components and a complete admin interface.</span></p>
<h1 class="heading" id="_idParaDest-149"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3380.1">Summary</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3381.1">This chapter taught us how to create forms and make API calls to get and save data.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3382.1">We built custom input controls and got Bootstrap styling on our controls. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3382.2">Most business apps use forms; we can add logic close to the data by annotating data.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3383.1">We also created multiple reusable components and used many of the things we discussed in previous chapters. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3383.2">We even touched on JavaScript interop, which we will go into more detail about in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3384.1">Chapter 10</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3385.1">, </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3386.1">JavaScript Interop</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3387.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3388.1">The functionality that Blazor offers when it comes to validation and input controls will help us build amazing applications and give our users a great experience. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3388.2">You may notice that, right now, the admin pages are wide open. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3388.3">We need to secure our blog with a login, but we will come to that in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3389.1">Chapter 8</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3390.1">, </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3391.1">Authentication and Authorization</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3392.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3393.1">In the next chapter, we will create a web API to get data when we are running components such as </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3394.1">InteractiveAuto</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3395.1"> or </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3396.1">InteractiveWebAssembly</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3397.1">.</span></p>
</div>
</body>
</html>
