<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="en-US" xml:lang="en-US">
  <head>
    <title>Chapter_12</title>
    <!-- kobo-style -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="../../stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="../../page_styles.css"/>
</head>
  <body id="Chapter_12" class="calibre">
<div class="calibre1" id="_idContainer060">
<h1 class="chapternumber"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.1.1">12</span></h1>
<h1 class="chaptertitle" id="_idParaDest-214"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.2.1">Debugging the Code</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3.1">In this chapter, we will take a look at debugging. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.3.2">The </span><a id="_idIndexMarker490" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.4.1">debugging experience of Blazor is a good one; hopefully, you haven’t gotten stuck earlier on in the book and had to jump to this chapter.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.5.1">Debugging code is</span><a id="_idIndexMarker491" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.6.1"> an excellent way to solve bugs, understand the workflow, or look at specific values. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.6.2">Blazor has three different ways to debug code, and we will look at each one.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.7.1">In this chapter, we will cover the following:</span></p>
<ul class="calibre4">
<li class="bulletlist"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.8.1">Making things break</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.9.1">Debugging Blazor Server</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.10.1">Debugging Blazor WebAssembly</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.11.1">Debugging Blazor WebAssembly in the browser</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.12.1">Hot Reload</span></li>
</ul>
<h1 class="heading" id="_idParaDest-215"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.13.1">Technical requirements</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.14.1">Make sure you have followed the previous chapters or use the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.15.1">Chapter11</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.16.1"> folder as a starting point.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.17.1">You can find the source code for this chapter’s end result at </span><a href="https://github.com/PacktPublishing/Web-Development-with-Blazor-Third-Edition/tree/main/Chapter12" class="calibre3"><span class="calibre3"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.18.1">https://github.com/PacktPublishing/Web-Development-with-Blazor-Third-Edition/tree/main/Chapter12</span></span></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.19.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.20.1">If you are jumping into this chapter using the code from GitHub, make sure you have added </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.21.1">Auth0</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.22.1"> account information in the settings files. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.22.2">You can find the instructions in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.23.1">Chapter 8</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.24.1">, </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.25.1">Authentication and Authorization</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.26.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.27.1">To debug something, we should first make something break!</span></p>
<h1 class="heading" id="_idParaDest-216"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.28.1">Making things break</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.29.1">Edsger W. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.29.2">Dijkstra once said,</span></p>
<p class="normal1"><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.30.1">“If debugging is the process of removing software bugs, then programming must be the process of putting them in.”</span></em></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.31.1">This is definitely </span><a id="_idIndexMarker492" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.32.1">true in this section because we will add a page that will </span><a id="_idIndexMarker493" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.33.1">throw an exception:</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.34.1">In the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.35.1">SharedComponents</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.36.1"> project, in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.37.1">Pages</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.38.1"> folder, create a new Razor component called </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.39.1">ThrowException.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.40.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.41.1">Replace the contents of the file with the following code block:
        </span><pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.42.1">@page "/ThrowException"
@rendermode @(new InteractiveServerRenderMode(prerender: false))
</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.43.1">&lt;</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.44.1">button</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.45.1"> @</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.46.1">onclick</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.47.1">=</span></span><span class="hljs-string"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.48.1">"@(()=&gt; {throw new Exception("</span></span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.49.1">Something</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.50.1">is</span></span><span> </span><span class="hljs-number"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.51.1">broken</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.52.1">"); })"&gt;</span></span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.53.1">Throw an exception</span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.54.1">&lt;/</span></span><span class="hljs-name"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.55.1">button</span></span><span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.56.1">&gt;</span></span>
</code></pre>
</li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.57.1">This page shows a button, and when you press it, it throws an exception.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.58.1">Great! </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.58.2">We have our application’s Ivan Drago (he wants to break us, but we might just beat him with some fancy debugging).</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.59.1">The next step is to take a look at Blazor Server debugging.</span></p>
<h1 class="heading" id="_idParaDest-217"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.60.1">Debugging Blazor Server</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.61.1">If you have </span><a id="_idIndexMarker494" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.62.1">debugged any .NET application in the past, you will feel</span><a id="_idIndexMarker495" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.63.1"> right at home. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.63.2">Don’t worry; we will go through it if you haven’t. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.63.3">Debugging Blazor Server is just as we might expect and is the best debugging experience of the three different types we will cover.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.64.1">I usually keep my Razor pages in a shared library, and while building my project, I use Blazor Server for two reasons. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.64.2">First, running the project is a bit faster, and second, the debugging</span><a id="_idIndexMarker496" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.65.1"> experience is better.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.66.1">Let’s give it a try!</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.67.1">Press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.68.1">F5</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.69.1"> to start the project (this time with debugging).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.70.1">Using the web browser, navigate to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.71.1">https://localhost:portnumber/throwexception</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.72.1"> (the port number may vary).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.73.1">Press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.74.1">F12</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.75.1"> to show the web browser developer tools.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.76.1">In the developer tools, click </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.77.1">Console</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.78.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.79.1">Click the </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.80.1">Throw exception</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.81.1"> button on our page.
    </span><p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.82.1">At this</span><a id="_idIndexMarker497" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.83.1"> point, Visual Studio should request focus, and it should show the exception as shown in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.84.1">Figure 12.1</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.85.1">:</span></p>
<figure class="mediaobject1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.86.1"><img alt="Figure 12.1 – Exception in Visual Studio " src="../Images/B21849_12_01.png" class="calibre5"/></span></figure>
<p class="packt_figref"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.87.1">Figure 12.1: Exception in Visual Studio</span></p></li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="6"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.88.1">Press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.89.1">F5</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.90.1"> to continue and switch back to the web browser. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.90.2">We should now be able to see the exception message in the developer tools, as shown in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.91.1">Figure 12.2</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.92.1">:
    </span><figure class="mediaobject1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.93.1"><img alt="Figure 12.2 – Exception in the web browser" src="../Images/B21849_12_02.png" class="calibre5"/></span></figure>
<p class="packt_figref"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.94.1">Figure 12.2: Exception in the web browser</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.95.1">As we can see in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.96.1">Figure 12.1</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.97.1"> and </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.98.1">Figure 12.2</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.99.1">, we get the exception both in Visual Studio while debugging and also in the developer tools.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.100.1">This makes it quite easy to find the problem if there is an exception in an app in production (perish the thought) – that feature has saved us many times.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.101.1">Now let’s try a breakpoint:</span></p></li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="7"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.102.1">In </span><a id="_idIndexMarker498" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.103.1">Visual Studio, open </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.104.1">Pages/Home.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.105.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.106.1">Anywhere in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.107.1">LoadPosts</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.108.1"> method, set a breakpoint by clicking the leftmost border (making a red dot appear). </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.108.2">We can also add a breakpoint by pressing </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.109.1">F9</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.110.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.111.1">Go back to the web browser and navigate to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.112.1">https://localhost:portnumber/</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.113.1"> (the port number may vary).</span></li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.114.1">Visual Studio </span><a id="_idIndexMarker499" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.115.1">should now hit the breakpoint, and by hovering over variables, we should be able to see the current values.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.116.1">Both breakpoints and exception debugging work as we might expect. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.116.2">Next, we will take a look at debugging Blazor WebAssembly.</span></p>
<h1 class="heading" id="_idParaDest-218"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.117.1">Debugging Blazor WebAssembly</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.118.1">Blazor WebAssembly </span><a id="_idIndexMarker500" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.119.1">can, of course, be debugged</span><a id="_idIndexMarker501" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.120.1"> as well. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.120.2">There are a couple of things to keep in mind. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.120.3">Debugging </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.121.1">InteractiveWebAssembly</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.122.1">, like we are using in our blog, is going to work just the same as with Blazor Server. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.122.2">Breakpoints and exceptions will work just the same. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.122.3">However, there is an option to run Blazor WebAssembly as a standalone app. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.122.4">And that works a bit differently.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.123.1">To be able to play around with that, we need to add another project.</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.124.1">Right-click on the </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.125.1">MyBlog solution</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.126.1">, select </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.127.1">Add</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.128.1">, </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.129.1">New Project</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.130.1">…, and select </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.131.1">Blazor WebAssembly Standalone App</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.132.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.133.1">Change the project name to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.134.1">BlazorWebAssemblyApp</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.135.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.136.1">Leave the default values as is and click </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.137.1">Create</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.138.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.139.1">Right-click on our </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.140.1">BlazorWebAssemblyApp</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.141.1"> project and select </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.142.1">Set as Startup Project</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.143.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.144.1">In the </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.145.1">Pages</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.146.1"> folder, open </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.147.1">Counter.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.148.1"> and add a breakpoint on the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.149.1">currentCount++</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.150.1"> row.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.151.1">Run the project by pressing </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.152.1">F5</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.153.1">, and lo and behold, the breakpoint is hit.</span></li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.154.1">This has </span><a id="_idIndexMarker502" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.155.1">not always been the case, and I was actually pleasantly surprised it worked that well. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.155.2">In previous versions of .NET, you had to click on another page and then back to have breakpoints hit.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.156.1">Debugging</span><a id="_idIndexMarker503" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.157.1"> Blazor WebAssembly is made possible by the following line of code in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.158.1">launchSettings.json</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.159.1"> file:</span></p>
<pre class="programlisting"><code class="hljs-code"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.160.1">"inspectUri": "{wsProtocol}://{url.hostname}:{url.port}/_framework/debug/ws-proxy?browser={browserInspectUri}"
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.161.1">But it is supplied for us when we create the project, so we don’t need to add that manually.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.162.1">Now let’s see what happens with our exception:</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.163.1">Copy our </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.164.1">ThrowException.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.165.1"> file and put it in the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.166.1">BlazorWebAssemblyApp/Pages</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.167.1"> folder.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.168.1">In the copied file, remove the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.169.1">@rendermode</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.170.1"> line. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.170.2">Since the WebAssembly project is all WebAssembly, we don’t need to specify render mode.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.171.1">In the web browser, navigate to </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.172.1">https://localhost:portnumber/throwexception</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.173.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.174.1">Click the </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.175.1">Throw exception</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.176.1"> button.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.177.1">The unhandled exception won’t get hit in Visual Studio. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.177.2">We get the exception in the developer tools in the web browser, as shown in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.178.1">Figure 12.3</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.179.1">:</span></li>
</ol>
<figure class="mediaobject"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.180.1"><img alt="Figure 12.3 – WebAssembly error" src="../Images/B21849_12_03.png" class="calibre5"/></span></figure>
<p class="packt_figref"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.181.1">Figure 12.3: WebAssembly error</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.182.1">The </span><a id="_idIndexMarker504" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.183.1">debugging</span><a id="_idIndexMarker505" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.184.1"> experience in Blazor WebAssembly is not as polished as with Blazor Server, but it is polished enough to get the job done.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.185.1">We have one method left to explore – debugging in the web browser.</span></p>
<h1 class="heading" id="_idParaDest-219"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.186.1">Debugging Blazor WebAssembly in the web browser</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.187.1">The </span><a id="_idIndexMarker506" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.188.1">first debugging</span><a id="_idIndexMarker507" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.189.1"> experience for Blazor WebAssembly was the ability to debug right in the web browser:</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.190.1">In Visual Studio, start the project by pressing </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.191.1">Ctrl</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.192.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.193.1">F5</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.194.1"> (run without debugging).</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.195.1">In the web browser, press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.196.1">Shift</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.197.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.198.1">Alt</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.199.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.200.1">D</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.201.1">.
    </span><p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.202.1">We will get an error message with instructions on how to start the web browser in debug mode.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.203.1">I am running Edge, so the way to start Edge would be something like this:</span></p>
<pre class="programlisting1"><code class="hljs-con"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.204.1">msedge --remote-debugging-port=9222 --user-data-dir="C:\Users\Jimmy\AppData\Local\Temp\blazor-edge-debug" --no-first-run https://localhost:5001/
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.205.1">The </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.206.1">port</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.207.1"> and </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.208.1">user-data-dir</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.209.1"> values will differ from the example above. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.209.2">Copy </span><a id="_idIndexMarker508" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.210.1">the command from your web browser.</span></p></li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="3"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.211.1">Press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.212.1">Win</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.213.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.214.1">R</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.215.1"> and paste the command.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.216.1">A new instance of Chrome or Edge will open. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.216.2">In this new instance, press </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.217.1">Shift</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.218.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.219.1">Alt</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.220.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.221.1">D</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.222.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.223.1">We should </span><a id="_idIndexMarker509" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.224.1">now see a </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.225.1">Sources</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.226.1"> tab containing C# code from our project. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.226.2">From here, we can put breakpoints that will be hit and hover over variables. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.226.3">Make sure to have only this tab open in the web browser (not multiple tabs open).</span></li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.227.1">The debug UI can be seen in </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.228.1">Figure 12.4</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.229.1">:</span></p>
<figure class="mediaobject"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.230.1"><img alt="Figure 12.4 – Screenshot of the in-browser debug" src="../Images/B21849_12_04.png" class="calibre5"/></span></figure>
<p class="packt_figref"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.231.1">Figure 12.4: Screenshot of the in-browser debug UI</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.232.1">Debugging C# code</span><a id="_idIndexMarker510" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.233.1"> in the browser is </span><a id="_idIndexMarker511" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.234.1">pretty amazing, but since we have been directly debugging in Visual Studio, I don’t see much use for this kind of debugging.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.235.1">Next, we will look at something that might not fall under debugging but is useful while developing Blazor apps.</span></p>
<h1 class="heading" id="_idParaDest-220"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.236.1">Hot Reload</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.237.1">In </span><a id="_idIndexMarker512" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.238.1">Visual Studio</span><a id="_idIndexMarker513" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.239.1"> and the </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.240.1">dotnet CLI</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.241.1">, we can enable </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.242.1">Hot Reload</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.243.1">. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.243.2">This means that as soon as we make changes in our application, our Blazor app will automatically get reloaded, and we will (in most cases) not lose the state.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.244.1">To set this up, do the following:</span></p>
<ol class="numberedlist">
<li class="bulletlist1" value="1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.245.1">In Visual Studio, there is a small fire icon. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.245.2">We can use this button to trigger </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.246.1">Hot Reload</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.247.1"> manually.
    </span><p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.248.1">It is only clickable when the application is running (with or without debugging).</span></p></li>
</ol>
<ol class="numberedlist">
<li class="bulletlist1" value="2"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.249.1">Select the </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.250.1">Hot Reload on File Save</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.251.1"> option.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.252.1">Start the project by pressing </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.253.1">Ctrl</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.254.1"> + </span><em class="italic"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.255.1">F5</span></em><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.256.1">.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.257.1">In the web browser, bring up the counter page by adding </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.258.1">/counter</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.259.1"> to the URL.</span></li>
<li class="bulletlist1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.260.1">Make a change to the </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.261.1">/Pages/Counter.razor</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.262.1"> file and click </span><strong class="screentext"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.263.1">Save</span></strong><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.264.1">.</span></li>
</ol>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.265.1">Our web </span><a id="_idIndexMarker514" class="calibre3"></a><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.266.1">browser should now reload, and the change will be shown. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.266.2">At the time of writing, my Hot Reload did not find any changes when running in Visual Studio, but it did work with </span><code class="inlinecode"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.267.1">dotnet watch</span></code><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.268.1">.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.269.1">Hot Reload does save time and is pretty amazing. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.269.2">Not having to recompile the project and start up a web browser and seeing the changes in the browser just seconds after you save the file is simply amazing. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.269.3">However, there are some cases where our site behaves oddly, and then we need to rebuild. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.269.4">Therefore, you need to remember that if there is an unexplainable issue, you might need to build the project again.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.270.1">This also works from the command line by running the following command:</span></p>
<pre class="programlisting1"><code class="hljs-con"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.271.1">dotnet watch
</span></code></pre>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.272.1">Hot reload gets better and better with each release. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.272.2">I usually run preview versions of Visual Studio to get the best experience, but that can also sometimes have its drawbacks.</span></p>
<h1 class="heading" id="_idParaDest-221"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.273.1">Summary</span></h1>
<p class="normal"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.274.1">This chapter looked at different ways to debug our Blazor application. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.274.2">There will always be moments when we need to step through the code to find a bug or see what is happening. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.274.3">When these moments are upon us, Visual Studio delivers world-class functionality to help us achieve our goals.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.275.1">The nice thing is that debugging Blazor applications, whether it’s Blazor Server or Blazor WebAssembly, will work as expected from a Microsoft product. </span><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.275.2">We get C# errors that are (in most cases) easy to understand and solve.</span></p>
<p class="normal1"><span xmlns="http://www.w3.org/1999/xhtml" class="kobospan" id="kobo.276.1">In the next chapter, we will look at testing our Blazor components.</span></p>
</div>
</body>
</html>
